{"ast":null,"code":"import _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/pages/LoginPage/index.tsx\";\n\nimport { Tooltip, Typography } from '@material-ui/core';\nimport { ButtonFilled, InputField } from 'litmus-ui';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Loader from '../../components/Loader';\nimport config from '../../config';\nimport Center from '../../containers/layouts/Center';\nimport { setUserDetails } from '../../utils/auth';\nimport { validateStartEmptySpacing } from '../../utils/validate';\nimport useStyles from './styles';\n\nvar LoginPage = function LoginPage() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isError = _useState2[0],\n      setIsError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState({\n    username: '',\n    password: ''\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      authData = _useState6[0],\n      setAuthData = _useState6[1];\n\n  var responseCode = 200;\n  var loaderSize = 20;\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    fetch(\"\".concat(config.auth.url, \"/login\"), {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(authData)\n    }).then(function (response) {\n      if (response.status !== responseCode) {\n        setIsError(true);\n        setIsLoading(false);\n      } else {\n        setIsError(false);\n      }\n\n      return response.json();\n    }).then(function (data) {\n      if ('error' in data) {\n        console.error(data);\n      } else {\n        setUserDetails(data.access_token);\n        setIsLoading(false);\n        window.location.assign('/getStarted');\n      }\n    }).catch(function (err) {\n      console.error(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.rootContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Center, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.rootDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"icons/LitmusLogoLight.svg\",\n    alt: \"litmus logo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.HeaderText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, t('login.heading')), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.litmusText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, t('login.subHeading1'))), /*#__PURE__*/React.createElement(\"form\", {\n    id: \"login-form\",\n    autoComplete: \"on\",\n    onSubmit: handleSubmit,\n    className: classes.inputDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InputField, {\n    \"data-cy\": \"inputName\",\n    className: classes.inputValue,\n    label: \"Username\",\n    value: authData.username,\n    helperText: validateStartEmptySpacing(authData.username) ? t('settings.userManagementTab.createUser.userDetails.validationEmptySpace') : '',\n    filled: true,\n    onChange: function onChange(e) {\n      return setAuthData({\n        username: e.target.value,\n        password: authData.password\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(InputField, {\n    \"data-cy\": \"inputPassword\",\n    className: classes.inputValue,\n    label: \"Password\",\n    type: \"password\",\n    required: true,\n    value: authData.password,\n    helperText: isError ? t('login.wrongCredentials') : '',\n    filled: true,\n    onChange: function onChange(e) {\n      return setAuthData({\n        username: authData.username,\n        password: e.target.value\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.buttonGroup,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ButtonFilled, {\n    className: classes.loginButton,\n    type: \"submit\",\n    disabled: isLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    \"data-cy\": \"loginButton\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(Loader, {\n    size: loaderSize,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 32\n    }\n  }) : 'Login')), /*#__PURE__*/React.createElement(Tooltip, {\n    classes: {\n      tooltip: classes.tooltip\n    },\n    disableFocusListener: true,\n    placement: \"bottom\",\n    title: /*#__PURE__*/React.createElement(Typography, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 24\n      }\n    }, t('login.tooltipText')),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.forgetPwdText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, t('login.forgetPassword'))))))));\n};\n\nexport default LoginPage;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/pages/LoginPage/index.tsx"],"names":["Tooltip","Typography","ButtonFilled","InputField","React","useState","useTranslation","Loader","config","Center","setUserDetails","validateStartEmptySpacing","useStyles","LoginPage","classes","t","isError","setIsError","isLoading","setIsLoading","username","password","authData","setAuthData","responseCode","loaderSize","handleSubmit","event","preventDefault","fetch","auth","url","method","headers","body","JSON","stringify","then","response","status","json","data","console","error","access_token","window","location","assign","catch","err","rootContainer","rootDiv","HeaderText","litmusText","inputDiv","inputValue","e","target","value","buttonGroup","loginButton","tooltip","forgetPwdText"],"mappings":"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","sourcesContent":["import { Tooltip, Typography } from '@material-ui/core';\nimport { ButtonFilled, InputField } from 'litmus-ui';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Loader from '../../components/Loader';\nimport config from '../../config';\nimport Center from '../../containers/layouts/Center';\nimport { setUserDetails } from '../../utils/auth';\nimport { validateStartEmptySpacing } from '../../utils/validate';\nimport useStyles from './styles';\n\ninterface authData {\n  username: string;\n  password: string;\n}\n\nconst LoginPage: React.FC = () => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const [isError, setIsError] = useState<boolean>(false);\n  const [isLoading, setIsLoading] = useState<boolean>(false);\n  const [authData, setAuthData] = useState<authData>({\n    username: '',\n    password: '',\n  });\n\n  const responseCode = 200;\n  const loaderSize = 20;\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setIsLoading(true);\n\n    fetch(`${config.auth.url}/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(authData),\n    })\n      .then((response) => {\n        if (response.status !== responseCode) {\n          setIsError(true);\n          setIsLoading(false);\n        } else {\n          setIsError(false);\n        }\n        return response.json();\n      })\n      .then((data) => {\n        if ('error' in data) {\n          console.error(data);\n        } else {\n          setUserDetails(data.access_token);\n          setIsLoading(false);\n          window.location.assign('/getStarted');\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  return (\n    <div className={classes.rootContainer}>\n      <Center>\n        <div className={classes.rootDiv}>\n          <div>\n            <img src=\"icons/LitmusLogoLight.svg\" alt=\"litmus logo\" />\n            <Typography className={classes.HeaderText}>\n              {t('login.heading')}\n            </Typography>\n            <Typography className={classes.litmusText}>\n              {t('login.subHeading1')}\n            </Typography>\n          </div>\n          <form\n            id=\"login-form\"\n            autoComplete=\"on\"\n            onSubmit={handleSubmit}\n            className={classes.inputDiv}\n          >\n            <div>\n              <InputField\n                data-cy=\"inputName\"\n                className={classes.inputValue}\n                label=\"Username\"\n                value={authData.username}\n                helperText={\n                  validateStartEmptySpacing(authData.username)\n                    ? t(\n                        'settings.userManagementTab.createUser.userDetails.validationEmptySpace'\n                      )\n                    : ''\n                }\n                filled\n                onChange={(e) =>\n                  setAuthData({\n                    username: e.target.value,\n                    password: authData.password,\n                  })\n                }\n              />\n              <InputField\n                data-cy=\"inputPassword\"\n                className={classes.inputValue}\n                label=\"Password\"\n                type=\"password\"\n                required\n                value={authData.password}\n                helperText={isError ? t('login.wrongCredentials') : ''}\n                filled\n                onChange={(e) =>\n                  setAuthData({\n                    username: authData.username,\n                    password: e.target.value,\n                  })\n                }\n              />\n            </div>\n            <div className={classes.buttonGroup}>\n              <ButtonFilled\n                className={classes.loginButton}\n                type=\"submit\"\n                disabled={isLoading}\n              >\n                <div data-cy=\"loginButton\">\n                  {isLoading ? <Loader size={loaderSize} /> : 'Login'}\n                </div>\n              </ButtonFilled>\n              <Tooltip\n                classes={{\n                  tooltip: classes.tooltip,\n                }}\n                disableFocusListener\n                placement=\"bottom\"\n                title={<Typography>{t('login.tooltipText')}</Typography>}\n              >\n                <Typography className={classes.forgetPwdText}>\n                  {t('login.forgetPassword')}\n                </Typography>\n              </Tooltip>\n            </div>\n          </form>\n        </div>\n      </Center>\n    </div>\n  );\n};\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}