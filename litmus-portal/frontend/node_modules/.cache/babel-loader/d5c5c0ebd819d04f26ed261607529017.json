{"ast":null,"code":"import _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/components/YamlEditor/Editor.tsx\";\n\n/* eslint-disable no-param-reassign */\n\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport { useTheme } from '@material-ui/core';\nimport Fade from '@material-ui/core/Fade';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ErrorTwoToneIcon from '@material-ui/icons/ErrorTwoTone';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport FindInPageTwoToneIcon from '@material-ui/icons/FindInPageTwoTone';\nimport FindReplaceTwoToneIcon from '@material-ui/icons/FindReplaceTwoTone';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport GetAppTwoToneIcon from '@material-ui/icons/GetAppTwoTone';\nimport RedoTwoToneIcon from '@material-ui/icons/RedoTwoTone';\nimport SelectAllTwoToneIcon from '@material-ui/icons/SelectAllTwoTone';\nimport UndoTwoToneIcon from '@material-ui/icons/UndoTwoTone';\nimport UnfoldLessTwoToneIcon from '@material-ui/icons/UnfoldLessTwoTone';\nimport UnfoldMoreTwoToneIcon from '@material-ui/icons/UnfoldMoreTwoTone';\nimport React, { useEffect, useState } from 'react';\nimport AceEditor from 'react-ace';\nimport useStyles from './styles';\nimport { parseYamlValidations } from './Validations';\nimport 'ace-builds/src-min-noconflict/ext-beautify';\nimport 'ace-builds/src-min-noconflict/ext-code_lens';\nimport 'ace-builds/src-min-noconflict/ext-elastic_tabstops_lite';\nimport 'ace-builds/src-min-noconflict/ext-emmet';\nimport 'ace-builds/src-min-noconflict/ext-error_marker';\nimport 'ace-builds/src-min-noconflict/ext-keybinding_menu';\nimport 'ace-builds/src-min-noconflict/ext-language_tools';\nimport 'ace-builds/src-min-noconflict/ext-linking';\nimport 'ace-builds/src-min-noconflict/ext-modelist';\nimport 'ace-builds/src-min-noconflict/ext-options';\nimport 'ace-builds/src-min-noconflict/ext-prompt';\nimport 'ace-builds/src-min-noconflict/ext-rtl';\nimport 'ace-builds/src-min-noconflict/ext-searchbox';\nimport 'ace-builds/src-min-noconflict/ext-spellcheck';\nimport 'ace-builds/src-min-noconflict/ext-split';\nimport 'ace-builds/src-min-noconflict/ext-static_highlight';\nimport 'ace-builds/src-min-noconflict/ext-statusbar';\nimport 'ace-builds/src-min-noconflict/ext-textarea';\nimport 'ace-builds/src-min-noconflict/ext-themelist';\nimport 'ace-builds/src-min-noconflict/ext-whitespace';\nimport 'brace/mode/yaml';\nimport 'brace/theme/solarized_dark';\n\nvar YamlEditor = function YamlEditor(_ref) {\n  var content = _ref.content,\n      filename = _ref.filename,\n      readOnly = _ref.readOnly,\n      setButtonState = _ref.setButtonState,\n      saveWorkflowChange = _ref.saveWorkflowChange;\n  var classes = useStyles();\n\n  var _useTheme = useTheme(),\n      palette = _useTheme.palette;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isValid = _useState2[0],\n      setIsValid = _useState2[1];\n\n  var _useState3 = useState({\n    markers: [],\n    annotations: [],\n    content: content\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      editorState = _useState4[0],\n      setEditorState = _useState4[1];\n\n  var _useState5 = useState(content),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modifiedYaml = _useState6[0],\n      setModifiedYaml = _useState6[1];\n\n  var YamlAce = React.createRef();\n\n  var onEditorChange = function onEditorChange(value) {\n    var editorValidations = {\n      markers: [],\n      annotations: []\n    };\n    editorValidations = parseYamlValidations(value, classes);\n    var stateObject = {\n      markers: editorValidations.markers,\n      annotations: editorValidations.annotations\n    };\n\n    if (stateObject.annotations.length > 0) {\n      setIsValid(false);\n      var nodeStyleError = document.getElementsByClassName('ace_gutter-cell')[stateObject.annotations[0].row - 1].style;\n      nodeStyleError.background = 'red';\n      nodeStyleError.color = palette.secondary.contrastText;\n    } else {\n      setIsValid(true);\n      var nodeStyleErrorList = document.getElementsByClassName('ace_gutter-cell');\n\n      for (var i = 0; i < nodeStyleErrorList.length; i += 1) {\n        nodeStyleErrorList[i].style.backgroundColor = palette.common.black;\n        nodeStyleErrorList[i].style.color = palette.secondary.contrastText;\n      }\n    }\n\n    setModifiedYaml(value);\n    setEditorState(stateObject);\n    if (saveWorkflowChange) saveWorkflowChange(value);\n  };\n\n  useEffect(function () {\n    if (saveWorkflowChange) saveWorkflowChange(modifiedYaml);\n  }, []);\n\n  var downloadYamlFile = function downloadYamlFile() {\n    var element = document.createElement('a');\n    var file = new Blob([modifiedYaml], {\n      type: 'text/yaml'\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = \"\".concat(filename, \".yaml\");\n    document.body.appendChild(element);\n    element.click();\n  };\n\n  var copycontent = function copycontent() {\n    if (!navigator.clipboard) {\n      console.error('Oops Could not copy text: ');\n      return;\n    }\n\n    navigator.clipboard.writeText(modifiedYaml).catch(function (err) {\n      return console.error('Async: Could not copy text: ', err);\n    });\n  };\n\n  var startfinder = function startfinder() {\n    YamlAce.current.editor.execCommand('find');\n  };\n\n  var startreplace = function startreplace() {\n    YamlAce.current.editor.execCommand('replace');\n  };\n\n  var startundo = function startundo() {\n    YamlAce.current.editor.execCommand('undo');\n  };\n\n  var startredo = function startredo() {\n    YamlAce.current.editor.execCommand('redo');\n  };\n\n  var startfoldall = function startfoldall() {\n    YamlAce.current.editor.execCommand('foldall');\n  };\n\n  var startunfoldall = function startunfoldall() {\n    YamlAce.current.editor.execCommand('unfoldall');\n  };\n\n  var startselectall = function startselectall() {\n    YamlAce.current.editor.execCommand('selectall');\n  };\n\n  var startgotonexterror = function startgotonexterror() {\n    YamlAce.current.editor.execCommand('goToNextError');\n  };\n\n  var fullScreenTrigger = function fullScreenTrigger() {\n    var i = document.getElementById('yaml-editor');\n    YamlAce.current.editor.setOption('maxLines', document.body.clientHeight);\n\n    if (i.requestFullscreen) {\n      i.requestFullscreen();\n    } else if (i.webkitRequestFullscreen) {\n      i.webkitRequestFullscreen();\n    } else if (i.mozRequestFullScreen) {\n      i.mozRequestFullScreen();\n    } else if (i.msRequestFullscreen) {\n      i.msRequestFullscreen();\n    }\n  };\n\n  useEffect(function () {\n    var editorValidations = parseYamlValidations(content, classes);\n    var stateObject = {\n      markers: editorValidations.markers,\n      annotations: editorValidations.annotations\n    };\n\n    if (stateObject.annotations.length > 0) {\n      setIsValid(false);\n    } else {\n      setIsValid(true);\n    }\n\n    setEditorState(stateObject);\n  }, []);\n  useEffect(function () {\n    if (setButtonState) setButtonState(isValid);\n  }, [isValid]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"editor\",\n    \"data-cy\": \"WorkflowEditor\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 5\n    }\n  }, !readOnly && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtonGrid,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Undo\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startundo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UndoTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Redo\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startredo,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(RedoTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Download\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: downloadYamlFile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GetAppTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Copy\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: copycontent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FileCopyTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Goto Error\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startgotonexterror,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ErrorTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Find\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startfinder,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FindInPageTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Replace\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startreplace,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FindReplaceTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Unfold All\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startunfoldall,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UnfoldMoreTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Fold All\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startfoldall,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(UnfoldLessTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Select\",\n    placement: \"top\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: startselectall,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SelectAllTwoToneIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Tooltip, {\n    title: \"Full Screen (Press Escape to End)\",\n    placement: \"bottom\",\n    TransitionComponent: Fade,\n    TransitionProps: {\n      timeout: 500\n    },\n    arrow: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editorButtons,\n    onClick: fullScreenTrigger,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FullscreenIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editor,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"pre\", {\n    id: \"yaml-editor\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AceEditor, {\n    mode: \"yaml\",\n    theme: \"solarized_dark\",\n    name: \"code\",\n    width: \"100%\",\n    height: \"100%\",\n    maxLines: 12000,\n    minLines: 1,\n    highlightActiveLine: false,\n    readOnly: readOnly,\n    tabSize: 2,\n    wrapEnabled: true,\n    ref: YamlAce,\n    showGutter: true,\n    onChange: onEditorChange,\n    showPrintMargin: false,\n    enableBasicAutocompletion: true,\n    enableSnippets: true,\n    enableLiveAutocompletion: true,\n    value: editorState.content,\n    editorProps: {\n      $blockScrolling: Infinity,\n      $useWorker: true\n    },\n    onLoad: function onLoad(editor) {\n      editor.setReadOnly(readOnly);\n      editor.setOptions({\n        fontFamily: 'monospace',\n        highlightGutterLine: false,\n        autoScrollEditorIntoView: true,\n        tooltipFollowsMouse: true,\n        displayIndentGuides: false\n      });\n      editor.focus();\n      editor.setHighlightSelectedWord(true);\n      editor.session.setFoldStyle('markbeginend');\n      editor.setShowFoldWidgets(true);\n      editor.setAnimatedScroll(true);\n      editor.setShowInvisibles(false);\n      editor.setFontSize('0.98rem');\n      editor.container.style.lineHeight = '160%';\n      var nodeStyle = document.getElementsByClassName('ace_gutter')[0].style;\n      nodeStyle.color = palette.secondary.contrastText;\n      nodeStyle.borderRight = 0;\n    },\n    onCursorChange: function onCursorChange(selection) {\n      YamlAce.current.editor.setOptions({\n        autoScrollEditorIntoView: true,\n        tooltipFollowsMouse: true\n      });\n      var nodeStyleActiveList = document.getElementsByClassName('ace_gutter-cell');\n\n      for (var i = 0; i < nodeStyleActiveList.length; i += 1) {\n        nodeStyleActiveList[i].style.backgroundColor = '#01313F';\n        nodeStyleActiveList[i].style.color = palette.secondary.contrastText;\n      }\n\n      if (document.getElementsByClassName('ace_gutter-cell')[selection.cursor.row]) {\n        var nodeStyleActive = document.getElementsByClassName('ace_gutter-cell')[selection.cursor.row].style;\n        nodeStyleActive.backgroundColor = palette.primary.main;\n        nodeStyleActive.color = palette.secondary.contrastText;\n      }\n    },\n    annotations: editorState.annotations,\n    markers: editorState.markers,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default YamlEditor;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/components/YamlEditor/Editor.tsx"],"names":["useTheme","Fade","Tooltip","ErrorTwoToneIcon","FileCopyTwoToneIcon","FindInPageTwoToneIcon","FindReplaceTwoToneIcon","FullscreenIcon","GetAppTwoToneIcon","RedoTwoToneIcon","SelectAllTwoToneIcon","UndoTwoToneIcon","UnfoldLessTwoToneIcon","UnfoldMoreTwoToneIcon","React","useEffect","useState","AceEditor","useStyles","parseYamlValidations","YamlEditor","content","filename","readOnly","setButtonState","saveWorkflowChange","classes","palette","isValid","setIsValid","markers","annotations","editorState","setEditorState","modifiedYaml","setModifiedYaml","YamlAce","createRef","onEditorChange","value","editorValidations","stateObject","length","nodeStyleError","document","getElementsByClassName","row","style","background","color","secondary","contrastText","nodeStyleErrorList","i","backgroundColor","common","black","downloadYamlFile","element","createElement","file","Blob","type","href","URL","createObjectURL","download","body","appendChild","click","copycontent","navigator","clipboard","console","error","writeText","catch","err","startfinder","current","editor","execCommand","startreplace","startundo","startredo","startfoldall","startunfoldall","startselectall","startgotonexterror","fullScreenTrigger","getElementById","setOption","clientHeight","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","editorButtonGrid","timeout","editorButtons","$blockScrolling","Infinity","$useWorker","setReadOnly","setOptions","fontFamily","highlightGutterLine","autoScrollEditorIntoView","tooltipFollowsMouse","displayIndentGuides","focus","setHighlightSelectedWord","session","setFoldStyle","setShowFoldWidgets","setAnimatedScroll","setShowInvisibles","setFontSize","container","lineHeight","nodeStyle","borderRight","selection","nodeStyleActiveList","cursor","nodeStyleActive","primary","main"],"mappings":"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","sourcesContent":["/* eslint-disable no-param-reassign */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable jsx-a11y/no-static-element-interactions */\nimport { useTheme } from '@material-ui/core';\nimport Fade from '@material-ui/core/Fade';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ErrorTwoToneIcon from '@material-ui/icons/ErrorTwoTone';\nimport FileCopyTwoToneIcon from '@material-ui/icons/FileCopyTwoTone';\nimport FindInPageTwoToneIcon from '@material-ui/icons/FindInPageTwoTone';\nimport FindReplaceTwoToneIcon from '@material-ui/icons/FindReplaceTwoTone';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport GetAppTwoToneIcon from '@material-ui/icons/GetAppTwoTone';\nimport RedoTwoToneIcon from '@material-ui/icons/RedoTwoTone';\nimport SelectAllTwoToneIcon from '@material-ui/icons/SelectAllTwoTone';\nimport UndoTwoToneIcon from '@material-ui/icons/UndoTwoTone';\nimport UnfoldLessTwoToneIcon from '@material-ui/icons/UnfoldLessTwoTone';\nimport UnfoldMoreTwoToneIcon from '@material-ui/icons/UnfoldMoreTwoTone';\nimport React, { useEffect, useState } from 'react';\nimport AceEditor from 'react-ace';\nimport useStyles from './styles';\nimport { AceValidations, parseYamlValidations } from './Validations';\nimport 'ace-builds/src-min-noconflict/ext-beautify';\nimport 'ace-builds/src-min-noconflict/ext-code_lens';\nimport 'ace-builds/src-min-noconflict/ext-elastic_tabstops_lite';\nimport 'ace-builds/src-min-noconflict/ext-emmet';\nimport 'ace-builds/src-min-noconflict/ext-error_marker';\nimport 'ace-builds/src-min-noconflict/ext-keybinding_menu';\nimport 'ace-builds/src-min-noconflict/ext-language_tools';\nimport 'ace-builds/src-min-noconflict/ext-linking';\nimport 'ace-builds/src-min-noconflict/ext-modelist';\nimport 'ace-builds/src-min-noconflict/ext-options';\nimport 'ace-builds/src-min-noconflict/ext-prompt';\nimport 'ace-builds/src-min-noconflict/ext-rtl';\nimport 'ace-builds/src-min-noconflict/ext-searchbox';\nimport 'ace-builds/src-min-noconflict/ext-spellcheck';\nimport 'ace-builds/src-min-noconflict/ext-split';\nimport 'ace-builds/src-min-noconflict/ext-static_highlight';\nimport 'ace-builds/src-min-noconflict/ext-statusbar';\nimport 'ace-builds/src-min-noconflict/ext-textarea';\nimport 'ace-builds/src-min-noconflict/ext-themelist';\nimport 'ace-builds/src-min-noconflict/ext-whitespace';\nimport 'brace/mode/yaml';\nimport 'brace/theme/solarized_dark';\n\ninterface YamlEditorProps {\n  content: string;\n  filename?: string;\n  readOnly: boolean;\n  setButtonState?: (btnState: boolean) => void;\n  saveWorkflowChange?: (updatedManifest: string) => void;\n}\n\nconst YamlEditor: React.FC<YamlEditorProps> = ({\n  content,\n  filename,\n  readOnly,\n  setButtonState,\n  saveWorkflowChange,\n}) => {\n  const classes = useStyles();\n  const { palette } = useTheme();\n\n  const [isValid, setIsValid] = useState(true);\n\n  const [editorState, setEditorState] = useState({\n    markers: [],\n    annotations: [],\n    content,\n  });\n\n  const [modifiedYaml, setModifiedYaml] = useState(content);\n\n  const YamlAce = React.createRef() as React.RefObject<AceEditor>;\n\n  const onEditorChange = (value: string) => {\n    let editorValidations: AceValidations = {\n      markers: [],\n      annotations: [],\n    };\n    editorValidations = parseYamlValidations(value, classes);\n    const stateObject = {\n      markers: editorValidations.markers,\n      annotations: editorValidations.annotations,\n    };\n    if (stateObject.annotations.length > 0) {\n      setIsValid(false);\n      const nodeStyleError = (\n        document.getElementsByClassName('ace_gutter-cell')[\n          stateObject.annotations[0].row - 1\n        ] as any\n      ).style;\n      nodeStyleError.background = 'red';\n      nodeStyleError.color = palette.secondary.contrastText;\n    } else {\n      setIsValid(true);\n      const nodeStyleErrorList =\n        document.getElementsByClassName('ace_gutter-cell');\n      for (let i = 0; i < nodeStyleErrorList.length; i += 1) {\n        (nodeStyleErrorList[i] as any).style.backgroundColor =\n          palette.common.black;\n        (nodeStyleErrorList[i] as any).style.color =\n          palette.secondary.contrastText;\n      }\n    }\n    setModifiedYaml(value);\n    setEditorState(stateObject as any);\n    if (saveWorkflowChange) saveWorkflowChange(value);\n  };\n\n  useEffect(() => {\n    if (saveWorkflowChange) saveWorkflowChange(modifiedYaml);\n  }, []);\n\n  const downloadYamlFile = () => {\n    const element = document.createElement('a');\n    const file = new Blob([modifiedYaml as any], {\n      type: 'text/yaml',\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = `${filename}.yaml`;\n    document.body.appendChild(element);\n    element.click();\n  };\n\n  const copycontent = () => {\n    if (!navigator.clipboard) {\n      console.error('Oops Could not copy text: ');\n      return;\n    }\n    navigator.clipboard\n      .writeText(modifiedYaml as any)\n      .catch((err) => console.error('Async: Could not copy text: ', err));\n  };\n\n  const startfinder = () => {\n    (YamlAce.current!.editor as any).execCommand('find');\n  };\n\n  const startreplace = () => {\n    (YamlAce.current!.editor as any).execCommand('replace');\n  };\n\n  const startundo = () => {\n    (YamlAce.current!.editor as any).execCommand('undo');\n  };\n\n  const startredo = () => {\n    (YamlAce.current!.editor as any).execCommand('redo');\n  };\n\n  const startfoldall = () => {\n    (YamlAce.current!.editor as any).execCommand('foldall');\n  };\n\n  const startunfoldall = () => {\n    (YamlAce.current!.editor as any).execCommand('unfoldall');\n  };\n\n  const startselectall = () => {\n    (YamlAce.current!.editor as any).execCommand('selectall');\n  };\n\n  const startgotonexterror = () => {\n    (YamlAce.current!.editor as any).execCommand('goToNextError');\n  };\n\n  const fullScreenTrigger = () => {\n    const i: any = document.getElementById('yaml-editor');\n    (YamlAce.current!.editor as any).setOption(\n      'maxLines',\n      document.body.clientHeight\n    );\n    if (i.requestFullscreen) {\n      i.requestFullscreen();\n    } else if (i.webkitRequestFullscreen) {\n      i.webkitRequestFullscreen();\n    } else if (i.mozRequestFullScreen) {\n      i.mozRequestFullScreen();\n    } else if (i.msRequestFullscreen) {\n      i.msRequestFullscreen();\n    }\n  };\n\n  useEffect(() => {\n    const editorValidations: AceValidations = parseYamlValidations(\n      content,\n      classes\n    );\n    const stateObject = {\n      markers: editorValidations.markers,\n      annotations: editorValidations.annotations,\n    };\n    if (stateObject.annotations.length > 0) {\n      setIsValid(false);\n    } else {\n      setIsValid(true);\n    }\n    setEditorState(stateObject as any);\n  }, []);\n\n  useEffect(() => {\n    if (setButtonState) setButtonState(isValid);\n  }, [isValid]);\n\n  return (\n    <div id=\"editor\" data-cy=\"WorkflowEditor\">\n      {!readOnly && (\n        <div className={classes.editorButtonGrid}>\n          <Tooltip\n            title=\"Undo\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startundo}>\n              <UndoTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Redo\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startredo}>\n              <RedoTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Download\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={downloadYamlFile}>\n              <GetAppTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Copy\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={copycontent}>\n              <FileCopyTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Goto Error\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startgotonexterror}>\n              <ErrorTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Find\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startfinder}>\n              <FindInPageTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Replace\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startreplace}>\n              <FindReplaceTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Unfold All\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startunfoldall}>\n              <UnfoldMoreTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Fold All\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startfoldall}>\n              <UnfoldLessTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Select\"\n            placement=\"top\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={startselectall}>\n              <SelectAllTwoToneIcon />\n            </div>\n          </Tooltip>\n\n          <Tooltip\n            title=\"Full Screen (Press Escape to End)\"\n            placement=\"bottom\"\n            TransitionComponent={Fade}\n            TransitionProps={{ timeout: 500 }}\n            arrow\n          >\n            <div className={classes.editorButtons} onClick={fullScreenTrigger}>\n              <FullscreenIcon />\n            </div>\n          </Tooltip>\n        </div>\n      )}\n      <br />\n      <div className={classes.editor}>\n        <pre id=\"yaml-editor\">\n          <AceEditor\n            mode=\"yaml\"\n            theme=\"solarized_dark\"\n            name=\"code\"\n            width=\"100%\"\n            height=\"100%\"\n            maxLines={12000}\n            minLines={1}\n            highlightActiveLine={false}\n            readOnly={readOnly}\n            tabSize={2}\n            wrapEnabled\n            ref={YamlAce}\n            showGutter\n            onChange={onEditorChange}\n            showPrintMargin={false}\n            enableBasicAutocompletion\n            enableSnippets\n            enableLiveAutocompletion\n            value={editorState.content}\n            editorProps={{\n              $blockScrolling: Infinity,\n              $useWorker: true,\n            }}\n            onLoad={(editor) => {\n              editor.setReadOnly(readOnly);\n              editor.setOptions({\n                fontFamily: 'monospace',\n                highlightGutterLine: false,\n                autoScrollEditorIntoView: true,\n                tooltipFollowsMouse: true,\n                displayIndentGuides: false,\n              });\n              editor.focus();\n              editor.setHighlightSelectedWord(true);\n              editor.session.setFoldStyle('markbeginend');\n              editor.setShowFoldWidgets(true);\n              editor.setAnimatedScroll(true);\n              editor.setShowInvisibles(false);\n              editor.setFontSize('0.98rem');\n              editor.container.style.lineHeight = '160%';\n              const nodeStyle = (\n                document.getElementsByClassName('ace_gutter')[0] as any\n              ).style;\n              nodeStyle.color = palette.secondary.contrastText;\n              nodeStyle.borderRight = 0;\n            }}\n            onCursorChange={(selection) => {\n              (YamlAce.current!.editor as any).setOptions({\n                autoScrollEditorIntoView: true,\n                tooltipFollowsMouse: true,\n              });\n\n              const nodeStyleActiveList =\n                document.getElementsByClassName('ace_gutter-cell');\n              for (let i = 0; i < nodeStyleActiveList.length; i += 1) {\n                (nodeStyleActiveList[i] as any).style.backgroundColor =\n                  '#01313F';\n                (nodeStyleActiveList[i] as any).style.color =\n                  palette.secondary.contrastText;\n              }\n\n              if (\n                document.getElementsByClassName('ace_gutter-cell')[\n                  selection.cursor.row\n                ] as any\n              ) {\n                const nodeStyleActive = (\n                  document.getElementsByClassName('ace_gutter-cell')[\n                    selection.cursor.row\n                  ] as any\n                ).style;\n                nodeStyleActive.backgroundColor = palette.primary.main;\n                nodeStyleActive.color = palette.secondary.contrastText;\n              }\n            }}\n            annotations={editorState.annotations}\n            markers={editorState.markers}\n          />\n        </pre>\n      </div>\n    </div>\n  );\n};\n\nexport default YamlEditor;\n"]},"metadata":{},"sourceType":"module"}