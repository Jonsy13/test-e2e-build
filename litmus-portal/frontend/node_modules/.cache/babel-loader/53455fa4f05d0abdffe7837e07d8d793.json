{"ast":null,"code":"import _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/containers/app/App.tsx\";\n\nimport { useQuery } from '@apollo/client';\nimport { LitmusThemeProvider } from 'litmus-ui';\nimport React, { lazy, Suspense, useEffect, useState } from 'react';\nimport { Redirect, Route, Router, Switch } from 'react-router-dom';\nimport Loader from '../../components/Loader';\nimport { GET_PROJECT, LIST_PROJECTS } from '../../graphql';\nimport { UserRole } from '../../models/graphql/user';\nimport useActions from '../../redux/actions';\nimport * as AnalyticsActions from '../../redux/actions/analytics';\nimport { history } from '../../redux/configureStore';\nimport { getToken, getUserId, getUserRole } from '../../utils/auth';\nimport { getProjectID, getProjectRole } from '../../utils/getSearchParams';\nimport Center from '../layouts/Center';\nvar ErrorPage = lazy(function () {\n  return import('../../pages/ErrorPage');\n});\nvar Workflows = lazy(function () {\n  return import('../../pages/Workflows');\n});\nvar CreateWorkflow = lazy(function () {\n  return import('../../pages/CreateWorkflow');\n});\nvar LoginPage = lazy(function () {\n  return import('../../pages/LoginPage');\n});\nvar GetStarted = lazy(function () {\n  return import('../../pages/GetStartedPage');\n});\nvar WorkflowDetails = lazy(function () {\n  return import('../../pages/WorkflowDetails');\n});\nvar HomePage = lazy(function () {\n  return import('../../pages/HomePage');\n});\nvar Community = lazy(function () {\n  return import('../../pages/Community');\n});\nvar Settings = lazy(function () {\n  return import('../../pages/Settings');\n});\nvar UsageStatistics = lazy(function () {\n  return import('../../pages/UsageStatistics');\n});\nvar Targets = lazy(function () {\n  return import('../../pages/Targets');\n});\nvar EditSchedule = lazy(function () {\n  return import('../../pages/EditSchedule');\n});\nvar SetNewSchedule = lazy(function () {\n  return import('../../pages/EditSchedule/Schedule');\n});\nvar ConnectTargets = lazy(function () {\n  return import('../../pages/ConnectTarget');\n});\nvar AnalyticsPage = lazy(function () {\n  return import('../../pages/WorkflowAnalytics');\n});\nvar AnalyticsDashboard = lazy(function () {\n  return import('../../pages/AnalyticsPage');\n});\nvar DataSourceConfigurePage = lazy(function () {\n  return import('../../pages/ConfigureDataSources');\n});\nvar ChooseAndConfigureDashboards = lazy(function () {\n  return import('../../pages/ChooseAndConfigureDashboards');\n});\nvar DashboardPage = lazy(function () {\n  return import('../../pages/ApplicationDashboard');\n});\nvar MyHub = lazy(function () {\n  return import('../../pages/ChaosHub');\n});\nvar ChaosChart = lazy(function () {\n  return import('../../views/MyHub/MyHubCharts');\n});\nvar MyHubExperiment = lazy(function () {\n  return import('../../views/MyHub/MyHubExperiment');\n});\n\nvar Routes = function Routes() {\n  var baseRoute = window.location.pathname.split('/')[1];\n  var projectIDFromURL = getProjectID();\n  var projectRoleFromURL = getProjectRole();\n  var role = getUserRole();\n\n  var _useState = useState(projectIDFromURL),\n      _useState2 = _slicedToArray(_useState, 2),\n      projectID = _useState2[0],\n      setprojectID = _useState2[1];\n\n  var _useState3 = useState(projectRoleFromURL),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projectRole = _useState4[0],\n      setprojectRole = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isProjectMember = _useState6[0],\n      setIsProjectMember = _useState6[1];\n\n  var userID = getUserId();\n\n  var _useQuery = useQuery(LIST_PROJECTS, {\n    skip: projectID !== '' && projectID !== undefined,\n    onCompleted: function onCompleted(data) {\n      if (data.listProjects) {\n        data.listProjects.forEach(function (project) {\n          project.members.forEach(function (member) {\n            if (member.user_id === userID && member.role === 'Owner') {\n              setprojectID(project.id);\n              setprojectRole(member.role);\n              history.push({\n                pathname: \"/\".concat(baseRoute),\n                search: \"?projectID=\".concat(project.id, \"&projectRole=\").concat(member.role)\n              });\n            }\n          });\n        });\n      }\n    },\n    fetchPolicy: 'cache-and-network'\n  }),\n      loading = _useQuery.loading;\n\n  history.listen(function (location) {\n    if (location.pathname !== '/login') {\n      setprojectID(getProjectID());\n      setprojectRole(getProjectRole());\n    }\n  });\n\n  var _useQuery2 = useQuery(GET_PROJECT, {\n    variables: {\n      projectID: projectID\n    },\n    onCompleted: function onCompleted(data) {\n      if (data === null || data === void 0 ? void 0 : data.getProject) {\n        data.getProject.members.forEach(function (member) {\n          if (member.user_id === userID) {\n            setIsProjectMember(true);\n            setprojectID(data.getProject.id);\n            setprojectRole(member.role);\n          }\n        });\n\n        if (!isProjectMember) {\n          setprojectID('');\n          setprojectRole('');\n        }\n      }\n    },\n    onError: function onError() {\n      if (!isProjectMember) {\n        setprojectID('');\n        setprojectRole('');\n      }\n    }\n  }),\n      projectValidation = _useQuery2.loading;\n\n  if (getToken() === '') {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, loading ? /*#__PURE__*/React.createElement(Loader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(Switch, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/login\",\n      component: LoginPage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      exact: true,\n      path: \"/api-doc\",\n      to: \"/api-doc/index.html\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/login\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 13\n      }\n    })));\n  }\n\n  if (!projectID) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, loading ? /*#__PURE__*/React.createElement(Loader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 11\n      }\n    }) : /*#__PURE__*/React.createElement(Switch, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/getStarted\",\n      component: GetStarted,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      exact: true,\n      path: \"/api-doc\",\n      to: \"/api-doc/index.html\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, projectValidation && loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/home\",\n    component: HomePage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/\",\n    to: \"/home\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/workflows\",\n    component: Workflows,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics\",\n    component: AnalyticsDashboard,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics/datasource/create\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(DataSourceConfigurePage, {\n        configure: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 30\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics/datasource/configure\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(DataSourceConfigurePage, {\n        configure: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 30\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics/dashboard/create\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(ChooseAndConfigureDashboards, {\n        configure: false,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 30\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics/dashboard/configure\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(ChooseAndConfigureDashboards, {\n        configure: true,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 30\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/analytics/application-dashboard\",\n    component: function component() {\n      return /*#__PURE__*/React.createElement(DashboardPage, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 30\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/create-workflow\",\n    component: CreateWorkflow,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/workflows/:workflowRunId\",\n    component: WorkflowDetails,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/workflows/schedule/:scheduleProjectID/:workflowName\",\n    component: EditSchedule,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/workflows/schedule/:scheduleProjectID/:workflowName/set\",\n    component: SetNewSchedule,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/workflows/analytics/:workflowRunId\",\n    component: AnalyticsPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/community\",\n    component: Community,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/targets\",\n    component: Targets,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/target-connect\",\n    component: ConnectTargets,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/myhub\",\n    component: MyHub,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/myhub/:hubname\",\n    component: ChaosChart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/myhub/:hubname/:chart/:experiment\",\n    component: MyHubExperiment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  }), projectRole === 'Owner' ? /*#__PURE__*/React.createElement(Route, {\n    path: \"/settings\",\n    component: Settings,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: '/home',\n      search: \"?projectID=\".concat(projectID, \"&projectRole=\").concat(projectRole)\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }), role === UserRole.admin ? /*#__PURE__*/React.createElement(Route, {\n    path: \"/usage-statistics\",\n    component: UsageStatistics,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: '/home',\n      search: \"?projectID=\".concat(projectID, \"&projectRole=\").concat(projectRole)\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/404\",\n    component: ErrorPage,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/getStarted\",\n    to: \"/home\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/workflows/schedule\",\n    to: \"/workflows\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/workflows/template\",\n    to: \"/workflows\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/analytics/overview\",\n    to: \"/analytics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/analytics/litmusdashboard\",\n    to: \"/analytics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/analytics/kubernetesdashborad\",\n    to: \"/analytics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/analytics/datasource\",\n    to: \"/analytics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/analytics/dashboard\",\n    to: \"/analytics\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    exact: true,\n    path: \"/api-doc\",\n    to: \"/api-doc/index.html\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/404\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 11\n    }\n  })));\n};\n\nfunction App() {\n  var analyticsAction = useActions(AnalyticsActions);\n  var token = getToken();\n  useEffect(function () {\n    if (token !== '') {\n      analyticsAction.loadCommunityAnalytics();\n    }\n  }, [token]);\n  return /*#__PURE__*/React.createElement(LitmusThemeProvider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Suspense, {\n    fallback: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: '100vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Center, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 15\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    history: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Routes, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/containers/app/App.tsx"],"names":["useQuery","LitmusThemeProvider","React","lazy","Suspense","useEffect","useState","Redirect","Route","Router","Switch","Loader","GET_PROJECT","LIST_PROJECTS","UserRole","useActions","AnalyticsActions","history","getToken","getUserId","getUserRole","getProjectID","getProjectRole","Center","ErrorPage","Workflows","CreateWorkflow","LoginPage","GetStarted","WorkflowDetails","HomePage","Community","Settings","UsageStatistics","Targets","EditSchedule","SetNewSchedule","ConnectTargets","AnalyticsPage","AnalyticsDashboard","DataSourceConfigurePage","ChooseAndConfigureDashboards","DashboardPage","MyHub","ChaosChart","MyHubExperiment","Routes","baseRoute","window","location","pathname","split","projectIDFromURL","projectRoleFromURL","role","projectID","setprojectID","projectRole","setprojectRole","isProjectMember","setIsProjectMember","userID","skip","undefined","onCompleted","data","listProjects","forEach","project","members","member","user_id","id","push","search","fetchPolicy","loading","listen","variables","getProject","onError","projectValidation","admin","App","analyticsAction","token","loadCommunityAnalytics","height"],"mappings":"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","sourcesContent":["import { useQuery } from '@apollo/client';\nimport { LitmusThemeProvider } from 'litmus-ui';\nimport React, { lazy, Suspense, useEffect, useState } from 'react';\nimport { Redirect, Route, Router, Switch } from 'react-router-dom';\nimport Loader from '../../components/Loader';\nimport { GET_PROJECT, LIST_PROJECTS } from '../../graphql';\nimport {\n  Member,\n  ProjectDetail,\n  Projects,\n  UserRole,\n} from '../../models/graphql/user';\nimport useActions from '../../redux/actions';\nimport * as AnalyticsActions from '../../redux/actions/analytics';\nimport { history } from '../../redux/configureStore';\nimport { getToken, getUserId, getUserRole } from '../../utils/auth';\nimport { getProjectID, getProjectRole } from '../../utils/getSearchParams';\nimport Center from '../layouts/Center';\n\nconst ErrorPage = lazy(() => import('../../pages/ErrorPage'));\nconst Workflows = lazy(() => import('../../pages/Workflows'));\nconst CreateWorkflow = lazy(() => import('../../pages/CreateWorkflow'));\nconst LoginPage = lazy(() => import('../../pages/LoginPage'));\nconst GetStarted = lazy(() => import('../../pages/GetStartedPage'));\nconst WorkflowDetails = lazy(() => import('../../pages/WorkflowDetails'));\nconst HomePage = lazy(() => import('../../pages/HomePage'));\nconst Community = lazy(() => import('../../pages/Community'));\nconst Settings = lazy(() => import('../../pages/Settings'));\nconst UsageStatistics = lazy(() => import('../../pages/UsageStatistics'));\nconst Targets = lazy(() => import('../../pages/Targets'));\nconst EditSchedule = lazy(() => import('../../pages/EditSchedule'));\nconst SetNewSchedule = lazy(() => import('../../pages/EditSchedule/Schedule'));\nconst ConnectTargets = lazy(() => import('../../pages/ConnectTarget'));\nconst AnalyticsPage = lazy(() => import('../../pages/WorkflowAnalytics'));\nconst AnalyticsDashboard = lazy(() => import('../../pages/AnalyticsPage'));\nconst DataSourceConfigurePage = lazy(\n  () => import('../../pages/ConfigureDataSources')\n);\nconst ChooseAndConfigureDashboards = lazy(\n  () => import('../../pages/ChooseAndConfigureDashboards')\n);\nconst DashboardPage = lazy(() => import('../../pages/ApplicationDashboard'));\nconst MyHub = lazy(() => import('../../pages/ChaosHub'));\nconst ChaosChart = lazy(() => import('../../views/MyHub/MyHubCharts'));\nconst MyHubExperiment = lazy(() => import('../../views/MyHub/MyHubExperiment'));\n\nconst Routes: React.FC = () => {\n  const baseRoute = window.location.pathname.split('/')[1];\n  const projectIDFromURL = getProjectID();\n  const projectRoleFromURL = getProjectRole();\n  const role = getUserRole();\n  const [projectID, setprojectID] = useState<string>(projectIDFromURL);\n  const [projectRole, setprojectRole] = useState<string>(projectRoleFromURL);\n  const [isProjectMember, setIsProjectMember] = useState<boolean>(false);\n  const userID = getUserId();\n\n  const { loading } = useQuery<Projects>(LIST_PROJECTS, {\n    skip: projectID !== '' && projectID !== undefined,\n    onCompleted: (data) => {\n      if (data.listProjects) {\n        data.listProjects.forEach((project): void => {\n          project.members.forEach((member: Member): void => {\n            if (member.user_id === userID && member.role === 'Owner') {\n              setprojectID(project.id);\n              setprojectRole(member.role);\n              history.push({\n                pathname: `/${baseRoute}`,\n                search: `?projectID=${project.id}&projectRole=${member.role}`,\n              });\n            }\n          });\n        });\n      }\n    },\n    fetchPolicy: 'cache-and-network',\n  });\n\n  history.listen((location) => {\n    if (location.pathname !== '/login') {\n      setprojectID(getProjectID());\n      setprojectRole(getProjectRole());\n    }\n  });\n\n  const { loading: projectValidation } = useQuery<ProjectDetail>(GET_PROJECT, {\n    variables: { projectID },\n    onCompleted: (data) => {\n      if (data?.getProject) {\n        data.getProject.members.forEach((member: Member) => {\n          if (member.user_id === userID) {\n            setIsProjectMember(true);\n            setprojectID(data.getProject.id);\n            setprojectRole(member.role);\n          }\n        });\n        if (!isProjectMember) {\n          setprojectID('');\n          setprojectRole('');\n        }\n      }\n    },\n    onError: () => {\n      if (!isProjectMember) {\n        setprojectID('');\n        setprojectRole('');\n      }\n    },\n  });\n\n  if (getToken() === '') {\n    return (\n      <>\n        {loading ? (\n          <Loader />\n        ) : (\n          <Switch>\n            <Route exact path=\"/login\" component={LoginPage} />\n            <Redirect exact path=\"/api-doc\" to=\"/api-doc/index.html\" />\n            <Redirect to=\"/login\" />\n          </Switch>\n        )}\n      </>\n    );\n  }\n\n  if (!projectID) {\n    return (\n      <>\n        {loading ? (\n          <Loader />\n        ) : (\n          <Switch>\n            <Route exact path=\"/getStarted\" component={GetStarted} />\n            <Redirect exact path=\"/api-doc\" to=\"/api-doc/index.html\" />\n          </Switch>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      {projectValidation && loading ? (\n        <Loader />\n      ) : (\n        <Switch>\n          <Route exact path=\"/home\" component={HomePage} />\n          <Redirect exact path=\"/\" to=\"/home\" />\n          <Route exact path=\"/workflows\" component={Workflows} />\n          <Route exact path=\"/analytics\" component={AnalyticsDashboard} />\n          <Route\n            exact\n            path=\"/analytics/datasource/create\"\n            component={() => <DataSourceConfigurePage configure={false} />}\n          />\n          <Route\n            exact\n            path=\"/analytics/datasource/configure\"\n            component={() => <DataSourceConfigurePage configure />}\n          />\n          <Route\n            exact\n            path=\"/analytics/dashboard/create\"\n            component={() => <ChooseAndConfigureDashboards configure={false} />}\n          />\n          <Route\n            exact\n            path=\"/analytics/dashboard/configure\"\n            component={() => <ChooseAndConfigureDashboards configure />}\n          />\n          <Route\n            exact\n            path=\"/analytics/application-dashboard\"\n            component={() => <DashboardPage />}\n          />\n          <Route exact path=\"/create-workflow\" component={CreateWorkflow} />\n          <Route\n            exact\n            path=\"/workflows/:workflowRunId\"\n            component={WorkflowDetails}\n          />\n          <Route\n            exact\n            path=\"/workflows/schedule/:scheduleProjectID/:workflowName\"\n            component={EditSchedule}\n          />\n          <Route\n            exact\n            path=\"/workflows/schedule/:scheduleProjectID/:workflowName/set\"\n            component={SetNewSchedule}\n          />\n          <Route\n            exact\n            path=\"/workflows/analytics/:workflowRunId\"\n            component={AnalyticsPage}\n          />\n          <Route exact path=\"/community\" component={Community} />\n          <Route exact path=\"/targets\" component={Targets} />\n          <Route exact path=\"/target-connect\" component={ConnectTargets} />\n          <Route exact path=\"/myhub\" component={MyHub} />\n          <Route exact path=\"/myhub/:hubname\" component={ChaosChart} />\n          <Route\n            exact\n            path=\"/myhub/:hubname/:chart/:experiment\"\n            component={MyHubExperiment}\n          />\n          {projectRole === 'Owner' ? (\n            <Route path=\"/settings\" component={Settings} />\n          ) : (\n            <Redirect\n              to={{\n                pathname: '/home',\n                search: `?projectID=${projectID}&projectRole=${projectRole}`,\n              }}\n            />\n          )}\n          {role === UserRole.admin ? (\n            <Route path=\"/usage-statistics\" component={UsageStatistics} />\n          ) : (\n            <Redirect\n              to={{\n                pathname: '/home',\n                search: `?projectID=${projectID}&projectRole=${projectRole}`,\n              }}\n            />\n          )}\n          <Route exact path=\"/404\" component={ErrorPage} />\n          {/* Redirects */}\n          <Redirect exact path=\"/getStarted\" to=\"/home\" />\n          <Redirect exact path=\"/workflows/schedule\" to=\"/workflows\" />\n          <Redirect exact path=\"/workflows/template\" to=\"/workflows\" />\n          <Redirect exact path=\"/analytics/overview\" to=\"/analytics\" />\n          <Redirect exact path=\"/analytics/litmusdashboard\" to=\"/analytics\" />\n          <Redirect\n            exact\n            path=\"/analytics/kubernetesdashborad\"\n            to=\"/analytics\"\n          />\n          <Redirect exact path=\"/analytics/datasource\" to=\"/analytics\" />\n          <Redirect exact path=\"/analytics/dashboard\" to=\"/analytics\" />\n          <Redirect exact path=\"/api-doc\" to=\"/api-doc/index.html\" />\n          <Redirect to=\"/404\" />\n        </Switch>\n      )}\n    </>\n  );\n};\n\nfunction App() {\n  const analyticsAction = useActions(AnalyticsActions);\n  const token = getToken();\n  useEffect(() => {\n    if (token !== '') {\n      analyticsAction.loadCommunityAnalytics();\n    }\n  }, [token]);\n  return (\n    <LitmusThemeProvider>\n      <Suspense\n        fallback={\n          <div style={{ height: '100vh' }}>\n            <Center>\n              <Loader />\n            </Center>\n          </div>\n        }\n      >\n        <Router history={history}>\n          {/* <Routes /> */}\n          <Routes />\n        </Router>\n      </Suspense>\n    </LitmusThemeProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}