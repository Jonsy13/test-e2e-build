{"ast":null,"code":"import _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Settings/TeamingTab/Team/invitedTableData.tsx\";\n\nimport { useMutation, useQuery } from '@apollo/client';\nimport { Avatar, IconButton, Menu, MenuItem, TableCell, Typography } from '@material-ui/core';\nimport { ButtonFilled, LightPills } from 'litmus-ui';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { ALL_USERS, GET_PROJECT, GET_USER, SEND_INVITE } from '../../../../graphql';\nimport { InvitationStatus } from '../../../../models/graphql/invite';\nimport { Role } from '../../../../models/graphql/user';\nimport { getProjectID } from '../../../../utils/getSearchParams';\nimport { userInitials } from '../../../../utils/userInitials';\nimport RemoveMemberModal from './removeMemberModal';\nimport useStyles from './styles';\n\nvar InvitedTableData = function InvitedTableData(_ref) {\n  var row = _ref.row,\n      showModal = _ref.showModal;\n  var classes = useStyles();\n  var projectID = getProjectID();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var _useState3 = useState(row.role),\n      _useState4 = _slicedToArray(_useState3, 2),\n      role = _useState4[0],\n      setRole = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      anchorEl = _useState6[0],\n      setAnchorEl = _useState6[1];\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var _useMutation = useMutation(SEND_INVITE, {\n    onCompleted: function onCompleted() {\n      window.location.reload();\n    },\n    refetchQueries: [{\n      query: GET_PROJECT,\n      variables: {\n        projectID: projectID\n      }\n    }, {\n      query: ALL_USERS\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      SendInvite = _useMutation2[0];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      memberDetails = _useState8[0],\n      setMemberDetails = _useState8[1]; // Query to get user details\n\n\n  useQuery(GET_USER, {\n    variables: {\n      username: row.user_name\n    },\n    onCompleted: function onCompleted(data) {\n      setMemberDetails({\n        // TODO: Check if all are being used\n        name: data.getUser.name,\n        uid: data.getUser.id,\n        username: data.getUser.username,\n        role: data.getUser.role,\n        email: data.getUser.email\n      });\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.firstTC,\n    component: \"th\",\n    scope: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.firstCol,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    \"data-cy\": \"avatar\",\n    alt: \"User\",\n    className: classes.avatarBackground,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, userInitials(memberDetails ? memberDetails.username : '')), memberDetails ? memberDetails.username : '')), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.otherTC,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.dropDown,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, role, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"more\",\n    \"aria-controls\": \"long-menu\",\n    \"aria-haspopup\": \"true\",\n    onClick: function onClick(event) {\n      setAnchorEl(event.currentTarget);\n    },\n    className: classes.optionBtn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./icons/down-arrow.svg\",\n    alt: \"more\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Menu, {\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    id: \"long-menu\",\n    anchorEl: anchorEl,\n    onClose: handleClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: function onClick() {\n      setRole(Role.editor);\n      setAnchorEl(null);\n    },\n    className: classes.menuOpt,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.menuDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.menuHeader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.invitation.sentInvitation.menuItem.editorRole.label')))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.menuDesc,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }, t('settings.teamingTab.invitation.sentInvitation.menuItem.editorRole.body'))))), /*#__PURE__*/React.createElement(MenuItem, {\n    onClick: function onClick() {\n      setRole(Role.viewer);\n      setAnchorEl(null);\n    },\n    className: classes.menuOpt,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.menuDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.menuHeader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, t('settings.teamingTab.invitation.sentInvitation.menuItem.viewerRole.label')))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.menuDesc,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, t('settings.teamingTab.invitation.sentInvitation.menuItem.viewerRole.body')))))))), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.otherTC,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, memberDetails ? memberDetails.email : ''), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.otherTC,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LightPills, {\n    variant: row.invitation === InvitationStatus.pending ? 'warning' : 'danger',\n    label: row.invitation,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.buttonTC,\n    key: row.user_id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.lastCell,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, row.invitation !== InvitationStatus.exited && row.invitation !== InvitationStatus.declined && /*#__PURE__*/React.createElement(IconButton, {\n    onClick: function onClick() {\n      return setOpen(true);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    alt: \"delete\",\n    src: \"./icons/deleteBox.svg\",\n    height: \"45\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(ButtonFilled, {\n    disabled: false,\n    onClick: function onClick() {\n      SendInvite({\n        variables: {\n          member: {\n            project_id: projectID,\n            user_id: row.user_id,\n            role: role\n          }\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 11\n    }\n  }, t('settings.teamingTab.invitation.sentInvitation.resend')))), open && /*#__PURE__*/React.createElement(RemoveMemberModal, {\n    open: open,\n    handleClose: function handleClose() {\n      setOpen(false);\n    },\n    row: row,\n    showModal: showModal,\n    isRemove: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }\n  }));\n};\n\nexport default InvitedTableData;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Settings/TeamingTab/Team/invitedTableData.tsx"],"names":["useMutation","useQuery","Avatar","IconButton","Menu","MenuItem","TableCell","Typography","ButtonFilled","LightPills","React","useState","useTranslation","ALL_USERS","GET_PROJECT","GET_USER","SEND_INVITE","InvitationStatus","Role","getProjectID","userInitials","RemoveMemberModal","useStyles","InvitedTableData","row","showModal","classes","projectID","t","open","setOpen","role","setRole","anchorEl","setAnchorEl","handleClose","onCompleted","window","location","reload","refetchQueries","query","variables","SendInvite","memberDetails","setMemberDetails","username","user_name","data","name","getUser","uid","id","email","firstTC","firstCol","avatarBackground","otherTC","dropDown","event","currentTarget","optionBtn","Boolean","editor","menuOpt","menuDiv","menuHeader","menuDesc","viewer","invitation","pending","buttonTC","user_id","lastCell","exited","declined","member","project_id"],"mappings":"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","sourcesContent":["import { useMutation, useQuery } from '@apollo/client';\nimport {\n  Avatar,\n  IconButton,\n  Menu,\n  MenuItem,\n  TableCell,\n  Typography,\n} from '@material-ui/core';\nimport { ButtonFilled, LightPills } from 'litmus-ui';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  ALL_USERS,\n  GET_PROJECT,\n  GET_USER,\n  SEND_INVITE,\n} from '../../../../graphql';\nimport {\n  InvitationStatus,\n  MemberInviteNew,\n} from '../../../../models/graphql/invite';\nimport {\n  CurrentUserDedtailsVars,\n  CurrentUserDetails,\n  Member,\n  Role,\n} from '../../../../models/graphql/user';\nimport { CurrentUserData } from '../../../../models/userData';\nimport { getProjectID } from '../../../../utils/getSearchParams';\nimport { userInitials } from '../../../../utils/userInitials';\nimport RemoveMemberModal from './removeMemberModal';\nimport useStyles from './styles';\n\ninterface TableDataProps {\n  row: Member;\n  index: number;\n  showModal: () => void;\n}\nconst InvitedTableData: React.FC<TableDataProps> = ({ row, showModal }) => {\n  const classes = useStyles();\n  const projectID = getProjectID();\n\n  const { t } = useTranslation();\n  const [open, setOpen] = useState<boolean>(false);\n  const [role, setRole] = useState<string>(row.role);\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const [SendInvite] = useMutation<MemberInviteNew>(SEND_INVITE, {\n    onCompleted: () => {\n      window.location.reload();\n    },\n    refetchQueries: [\n      {\n        query: GET_PROJECT,\n        variables: { projectID },\n      },\n      {\n        query: ALL_USERS,\n      },\n    ],\n  });\n\n  const [memberDetails, setMemberDetails] = useState<CurrentUserData>();\n\n  // Query to get user details\n  useQuery<CurrentUserDetails, CurrentUserDedtailsVars>(GET_USER, {\n    variables: { username: row.user_name },\n    onCompleted: (data) => {\n      setMemberDetails({\n        // TODO: Check if all are being used\n        name: data.getUser.name,\n        uid: data.getUser.id,\n        username: data.getUser.username,\n        role: data.getUser.role,\n        email: data.getUser.email,\n      });\n    },\n  });\n  return (\n    <>\n      <TableCell className={classes.firstTC} component=\"th\" scope=\"row\">\n        <div className={classes.firstCol}>\n          <Avatar\n            data-cy=\"avatar\"\n            alt=\"User\"\n            className={classes.avatarBackground}\n          >\n            {userInitials(memberDetails ? memberDetails.username : '')}\n          </Avatar>\n          {memberDetails ? memberDetails.username : ''}\n        </div>\n      </TableCell>\n      <TableCell className={classes.otherTC}>\n        <div className={classes.dropDown}>\n          {role}\n          <IconButton\n            aria-label=\"more\"\n            aria-controls=\"long-menu\"\n            aria-haspopup=\"true\"\n            onClick={(event) => {\n              setAnchorEl(event.currentTarget);\n            }}\n            className={classes.optionBtn}\n          >\n            <img src=\"./icons/down-arrow.svg\" alt=\"more\" />\n          </IconButton>\n          <Menu\n            keepMounted\n            open={Boolean(anchorEl)}\n            id=\"long-menu\"\n            anchorEl={anchorEl}\n            onClose={handleClose}\n          >\n            <MenuItem\n              onClick={() => {\n                setRole(Role.editor);\n                setAnchorEl(null);\n              }}\n              className={classes.menuOpt}\n            >\n              <div className={classes.menuDiv}>\n                <div>\n                  <Typography className={classes.menuHeader}>\n                    <strong>\n                      {t(\n                        'settings.teamingTab.invitation.sentInvitation.menuItem.editorRole.label'\n                      )}\n                    </strong>\n                  </Typography>\n                </div>\n                <div>\n                  <Typography className={classes.menuDesc}>\n                    {t(\n                      'settings.teamingTab.invitation.sentInvitation.menuItem.editorRole.body'\n                    )}\n                  </Typography>\n                </div>\n              </div>\n            </MenuItem>\n            <MenuItem\n              onClick={() => {\n                setRole(Role.viewer);\n                setAnchorEl(null);\n              }}\n              className={classes.menuOpt}\n            >\n              <div className={classes.menuDiv}>\n                <div>\n                  <Typography className={classes.menuHeader}>\n                    <strong>\n                      {t(\n                        'settings.teamingTab.invitation.sentInvitation.menuItem.viewerRole.label'\n                      )}\n                    </strong>\n                  </Typography>\n                </div>\n                <div>\n                  <Typography className={classes.menuDesc}>\n                    {t(\n                      'settings.teamingTab.invitation.sentInvitation.menuItem.viewerRole.body'\n                    )}\n                  </Typography>\n                </div>\n              </div>\n            </MenuItem>\n          </Menu>\n        </div>\n      </TableCell>\n      <TableCell className={classes.otherTC}>\n        {memberDetails ? memberDetails.email : ''}\n      </TableCell>\n      <TableCell className={classes.otherTC}>\n        <LightPills\n          variant={\n            row.invitation === InvitationStatus.pending ? 'warning' : 'danger'\n          }\n          label={row.invitation}\n        />\n      </TableCell>\n\n      <TableCell className={classes.buttonTC} key={row.user_id}>\n        <div className={classes.lastCell}>\n          {row.invitation !== InvitationStatus.exited &&\n            row.invitation !== InvitationStatus.declined && (\n              <IconButton onClick={() => setOpen(true)}>\n                <img alt=\"delete\" src=\"./icons/deleteBox.svg\" height=\"45\" />\n              </IconButton>\n            )}\n          <ButtonFilled\n            disabled={false}\n            onClick={() => {\n              SendInvite({\n                variables: {\n                  member: {\n                    project_id: projectID,\n                    user_id: row.user_id,\n                    role,\n                  },\n                },\n              });\n            }}\n          >\n            {t('settings.teamingTab.invitation.sentInvitation.resend')}\n          </ButtonFilled>\n        </div>\n      </TableCell>\n      {open && (\n        <RemoveMemberModal\n          open={open}\n          handleClose={() => {\n            setOpen(false);\n          }}\n          row={row}\n          showModal={showModal}\n          isRemove={false}\n        />\n      )}\n    </>\n  );\n};\nexport default InvitedTableData;\n"]},"metadata":{},"sourceType":"module"}