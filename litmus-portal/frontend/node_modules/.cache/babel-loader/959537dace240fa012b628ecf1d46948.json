{"ast":null,"code":"import _slicedToArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useMutation}from'@apollo/client';import{Button,IconButton,Menu,MenuItem,Popover,TableCell,Typography}from'@material-ui/core';import{InsertDriveFileOutlined}from'@material-ui/icons';import ChevronRightIcon from'@material-ui/icons/ChevronRight';import GetAppIcon from'@material-ui/icons/GetApp';import KeyboardArrowDownIcon from'@material-ui/icons/KeyboardArrowDown';import MoreVertIcon from'@material-ui/icons/MoreVert';import ReplayIcon from'@material-ui/icons/Replay';import parser from'cron-parser';import cronstrue from'cronstrue';import{ButtonFilled,ButtonOutlined,Modal}from'litmus-ui';import moment from'moment';import React from'react';import{useTranslation}from'react-i18next';import YAML from'yaml';import{RERUN_CHAOS_WORKFLOW}from'../../../graphql/mutations';import useActions from'../../../redux/actions';import*as TabActions from'../../../redux/actions/tabs';import*as WorkflowActions from'../../../redux/actions/workflow';import{history}from'../../../redux/configureStore';import{ReactComponent as CrossMarkIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../svg/crossmark.svg\";import timeDifferenceForDate from'../../../utils/datesModifier';import{getProjectID,getProjectRole}from'../../../utils/getSearchParams';import ExperimentPoints from'./ExperimentPoints';import SaveTemplateModal from'./SaveTemplateModal';import useStyles from'./styles';var TableData=function TableData(_ref){var data=_ref.data,deleteRow=_ref.deleteRow,handleToggleSchedule=_ref.handleToggleSchedule;var classes=useStyles();var _useTranslation=useTranslation(),t=_useTranslation.t;var projectID=getProjectID();var projectRole=getProjectRole();var workflow=useActions(WorkflowActions);// States for PopOver to display Experiment Weights\nvar _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),popAnchorEl=_React$useState4[0],setPopAnchorEl=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isModalOpen=_React$useState6[0],setIsModalOpen=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isTemplateModalOpen=_React$useState8[0],setIsTemplateModalOpen=_React$useState8[1];var tabs=useActions(TabActions);var open=Boolean(anchorEl);var isOpen=Boolean(popAnchorEl);var id=isOpen?'simple-popover':undefined;var handlePopOverClose=function handlePopOverClose(){setPopAnchorEl(null);};var handlePopOverClick=function handlePopOverClick(event){setPopAnchorEl(event.currentTarget);};var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);setIsModalOpen(false);};// States for PopOver to display schedule details\nvar _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),popAnchorElSchedule=_React$useState10[0],setPopAnchorElSchedule=_React$useState10[1];var isOpenSchedule=Boolean(popAnchorElSchedule);var idSchedule=isOpenSchedule?'simple-popover':undefined;var handlePopOverCloseForSchedule=function handlePopOverCloseForSchedule(){setPopAnchorElSchedule(null);};var handlePopOverClickForSchedule=function handlePopOverClickForSchedule(event){setPopAnchorElSchedule(event.currentTarget);};// Function to download the manifest\nvar downloadYAML=function downloadYAML(manifest,name){var parsedYAML=YAML.parse(manifest);var doc=new YAML.Document();doc.contents=parsedYAML;var element=document.createElement('a');var file=new Blob([YAML.stringify(doc)],{type:'text/yaml'});element.href=URL.createObjectURL(file);element.download=\"\".concat(name,\".yaml\");document.body.appendChild(element);element.click();};// Function to convert UNIX time in format of DD MMM YYY\nvar formatDate=function formatDate(date){var updated=new Date(parseInt(date,10)*1000).toString();var resDate=moment(updated).format('DD MMM YYYY');if(date)return resDate;return'Date not available';};var editSchedule=function editSchedule(){history.push({pathname:\"/workflows/schedule/\".concat(data.project_id,\"/\").concat(data.workflow_name),search:\"?projectID=\".concat(projectID,\"&projectRole=\").concat(projectRole)});};var _useMutation=useMutation(RERUN_CHAOS_WORKFLOW,{onCompleted:function onCompleted(){tabs.changeWorkflowsTabs(0);}}),_useMutation2=_slicedToArray(_useMutation,1),reRunChaosWorkFlow=_useMutation2[0];var reRunSchedule=function reRunSchedule(){reRunChaosWorkFlow({variables:{data:data.workflow_id}});};var handleSaveWorkflowTemplate=function handleSaveWorkflowTemplate(manifest){var parsedYAML=YAML.parse(manifest);if(parsedYAML.metadata.labels!==undefined){var labelData=parsedYAML.metadata.labels;if(labelData.cluster_id!==undefined){delete labelData.cluster_id;}if(labelData.workflow_id!==undefined){delete labelData.workflow_id;}}workflow.setWorkflowManifest({manifest:YAML.stringify(parsedYAML)});setIsTemplateModalOpen(true);};var handleCloseTemplate=function handleCloseTemplate(){setIsTemplateModalOpen(false);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{width:\"60%\",open:isTemplateModalOpen,onClose:handleCloseTemplate,modalActions:/*#__PURE__*/React.createElement(ButtonOutlined,{onClick:handleCloseTemplate},\"\\u2715\")},/*#__PURE__*/React.createElement(SaveTemplateModal,{closeTemplate:handleCloseTemplate,isCustomWorkflow:data.isCustomWorkflow})),/*#__PURE__*/React.createElement(TableCell,{className:classes.workflowNameData},/*#__PURE__*/React.createElement(Typography,null,/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(classes.boldText,\" \").concat(YAML.parse(data.workflow_manifest).spec.suspend===true?classes.dark:'')},data.workflow_name))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Typography,{className:classes.clusterData},/*#__PURE__*/React.createElement(\"span\",{className:YAML.parse(data.workflow_manifest).spec.suspend===true?classes.dark:''},data.cluster_name))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Button,{onClick:handlePopOverClick,className:classes.buttonTransform},/*#__PURE__*/React.createElement(\"span\",{className:YAML.parse(data.workflow_manifest).spec.suspend===true?classes.dark:''},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(Typography,{className:\"\".concat(classes.boldText,\" \").concat(classes.expInfo)},t('chaosWorkflows.browseSchedules.showExperiments')),isOpen?/*#__PURE__*/React.createElement(KeyboardArrowDownIcon,null):/*#__PURE__*/React.createElement(ChevronRightIcon,null)))),/*#__PURE__*/React.createElement(Popover,{id:id,open:isOpen,anchorEl:popAnchorEl,onClose:handlePopOverClose,anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.weightDiv},data.weightages.map(function(expData){return/*#__PURE__*/React.createElement(\"div\",{key:expData.experiment_name,style:{marginBottom:8}},/*#__PURE__*/React.createElement(ExperimentPoints,{expName:expData.experiment_name,weight:expData.weightage}));})))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Button,{onClick:handlePopOverClickForSchedule,className:classes.buttonTransform},/*#__PURE__*/React.createElement(\"span\",{className:YAML.parse(data.workflow_manifest).spec.suspend===true?classes.dark:''},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(Typography,{className:\"\".concat(classes.boldText,\" \").concat(classes.expInfo)},t('chaosWorkflows.browseSchedules.showSchedule')),isOpenSchedule?/*#__PURE__*/React.createElement(KeyboardArrowDownIcon,null):/*#__PURE__*/React.createElement(ChevronRightIcon,null)))),/*#__PURE__*/React.createElement(Popover,{id:idSchedule,open:isOpenSchedule,anchorEl:popAnchorElSchedule,onClose:handlePopOverCloseForSchedule,anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.weightDiv},/*#__PURE__*/React.createElement(Typography,{className:classes.scheduleDetailsFlex},/*#__PURE__*/React.createElement(\"span\",{className:classes.boldText},t('chaosWorkflows.browseSchedules.startingDate'),\" :\"),/*#__PURE__*/React.createElement(\"span\",{className:classes.scheduleDetailsValue},formatDate(data.created_at))),/*#__PURE__*/React.createElement(Typography,{className:classes.scheduleDetailsFlex},/*#__PURE__*/React.createElement(\"span\",{className:classes.boldText},t('chaosWorkflows.browseSchedules.lastRun'),\" :\"),/*#__PURE__*/React.createElement(\"span\",{className:classes.scheduleDetailsValue},timeDifferenceForDate(data.updated_at))),/*#__PURE__*/React.createElement(Typography,{className:classes.scheduleDetailsFlex},/*#__PURE__*/React.createElement(\"span\",{className:classes.boldText},t('chaosWorkflows.browseSchedules.regularity'),\" :\"),/*#__PURE__*/React.createElement(\"span\",{className:classes.scheduleDetailsValue},data.cronSyntax===''?\"\".concat(t('chaosWorkflows.browseSchedules.regularityOnce')):cronstrue.toString(data.cronSyntax)))))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"span\",{className:YAML.parse(data.workflow_manifest).spec.suspend===true?classes.dark:''},YAML.parse(data.workflow_manifest).spec.suspend===true?/*#__PURE__*/React.createElement(Typography,null,t('chaosWorkflows.browseSchedules.scheduleIsDisabled')):data.cronSyntax!==''&&/*#__PURE__*/React.createElement(Typography,null,parser.parseExpression(data.cronSyntax).next().toString()))),/*#__PURE__*/React.createElement(TableCell,{className:classes.menuCell},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"more\",\"aria-controls\":\"long-menu\",\"aria-haspopup\":\"true\",onClick:handleClick,className:classes.optionBtn,\"data-cy\":\"browseScheduleOptions\"},/*#__PURE__*/React.createElement(MoreVertIcon,null)),/*#__PURE__*/React.createElement(Menu,{id:\"long-menu\",anchorEl:anchorEl,keepMounted:true,open:open,onClose:handleClose},data.cronSyntax!==''?/*#__PURE__*/React.createElement(MenuItem,{value:\"Edit_Schedule\",onClick:function onClick(){return editSchedule();}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/Edit.svg\",alt:\"Edit Schedule\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"editSchedule\",className:classes.btnText},t('chaosWorkflows.browseSchedules.editSchedule')))):/*#__PURE__*/React.createElement(React.Fragment,null),projectRole!=='Viewer'&&data.cronSyntax===''?/*#__PURE__*/React.createElement(MenuItem,{value:\"Rerun_Schedule\",onClick:function onClick(){return reRunSchedule();}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(ReplayIcon,{className:classes.rerunBtn}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"reRunSchedule\",className:classes.btnText},t('chaosWorkflows.browseSchedules.reRunSchedule')))):/*#__PURE__*/React.createElement(React.Fragment,null),projectRole!=='Viewer'&&data.cronSyntax!==''&&YAML.parse(data.workflow_manifest).spec.suspend!==true&&/*#__PURE__*/React.createElement(MenuItem,{value:\"Disable\",onClick:function onClick(){handleToggleSchedule(data);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/disableSchedule.svg\",alt:\"Delete Schedule\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"disableSchedule\",className:classes.downloadText},t('chaosWorkflows.browseSchedules.disableSchedule')))),projectRole!=='Viewer'&&YAML.parse(data.workflow_manifest).spec.suspend===true&&/*#__PURE__*/React.createElement(MenuItem,{value:\"Enable\",onClick:function onClick(){handleToggleSchedule(data);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/disableSchedule.svg\",alt:\"Enable Schedule\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"enableSchedule\",className:classes.downloadText},t('chaosWorkflows.browseSchedules.enableSchedule')))),/*#__PURE__*/React.createElement(MenuItem,{value:\"Download\",onClick:function onClick(){return downloadYAML(data.workflow_manifest,data.workflow_name);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(GetAppIcon,{className:classes.downloadBtn}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"downloadManifest\",className:classes.downloadText},t('chaosWorkflows.browseSchedules.downloadManifest')))),/*#__PURE__*/React.createElement(MenuItem,{value:\"Download\",onClick:function onClick(){return handleSaveWorkflowTemplate(data.workflow_manifest);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(InsertDriveFileOutlined,{className:classes.downloadBtn}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"downloadManifest\",className:classes.downloadText},t('chaosWorkflows.browseSchedules.saveTemplate')))),projectRole!=='Viewer'?/*#__PURE__*/React.createElement(MenuItem,{value:\"Analysis\",onClick:function onClick(){return setIsModalOpen(true);}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/deleteSchedule.svg\",alt:\"Delete Schedule\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"deleteSchedule\",className:classes.btnText},data.cronSyntax!==''?t('chaosWorkflows.browseSchedules.deleteSchedule'):t('chaosWorkflows.browseSchedules.deleteWorkflow')))):null)),isModalOpen?/*#__PURE__*/React.createElement(Modal,{open:isModalOpen,onClose:handleClose,width:\"60%\",modalActions:/*#__PURE__*/React.createElement(ButtonOutlined,{onClick:handleClose},\"\\u2715\")},/*#__PURE__*/React.createElement(\"div\",{className:classes.modalDiv},/*#__PURE__*/React.createElement(CrossMarkIcon,null),/*#__PURE__*/React.createElement(Typography,{className:classes.modalHeader},t('createWorkflow.scheduleWorkflow.modalHeader')),/*#__PURE__*/React.createElement(Typography,{className:classes.modalConfirm},t('createWorkflow.scheduleWorkflow.modalSubheader')),/*#__PURE__*/React.createElement(\"div\",{className:classes.modalBtns},/*#__PURE__*/React.createElement(ButtonOutlined,{onClick:function onClick(){return setIsModalOpen(false);}},t('createWorkflow.scheduleWorkflow.cancelBtn')),/*#__PURE__*/React.createElement(ButtonFilled,{variant:\"error\",className:classes.w7,onClick:function onClick(){deleteRow(data.workflow_id);setIsModalOpen(false);}},t('createWorkflow.scheduleWorkflow.deleteBtn'))))):/*#__PURE__*/React.createElement(React.Fragment,null));};export default TableData;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/ChaosWorkflows/BrowseSchedule/TableData.tsx"],"names":["useMutation","Button","IconButton","Menu","MenuItem","Popover","TableCell","Typography","InsertDriveFileOutlined","ChevronRightIcon","GetAppIcon","KeyboardArrowDownIcon","MoreVertIcon","ReplayIcon","parser","cronstrue","ButtonFilled","ButtonOutlined","Modal","moment","React","useTranslation","YAML","RERUN_CHAOS_WORKFLOW","useActions","TabActions","WorkflowActions","history","timeDifferenceForDate","getProjectID","getProjectRole","ExperimentPoints","SaveTemplateModal","useStyles","TableData","data","deleteRow","handleToggleSchedule","classes","t","projectID","projectRole","workflow","useState","anchorEl","setAnchorEl","popAnchorEl","setPopAnchorEl","isModalOpen","setIsModalOpen","isTemplateModalOpen","setIsTemplateModalOpen","tabs","open","Boolean","isOpen","id","undefined","handlePopOverClose","handlePopOverClick","event","currentTarget","handleClick","handleClose","popAnchorElSchedule","setPopAnchorElSchedule","isOpenSchedule","idSchedule","handlePopOverCloseForSchedule","handlePopOverClickForSchedule","downloadYAML","manifest","name","parsedYAML","parse","doc","Document","contents","element","document","createElement","file","Blob","stringify","type","href","URL","createObjectURL","download","body","appendChild","click","formatDate","date","updated","Date","parseInt","toString","resDate","format","editSchedule","push","pathname","project_id","workflow_name","search","onCompleted","changeWorkflowsTabs","reRunChaosWorkFlow","reRunSchedule","variables","workflow_id","handleSaveWorkflowTemplate","metadata","labels","labelData","cluster_id","setWorkflowManifest","handleCloseTemplate","isCustomWorkflow","workflowNameData","boldText","workflow_manifest","spec","suspend","dark","clusterData","cluster_name","buttonTransform","expDiv","expInfo","vertical","horizontal","weightDiv","weightages","map","expData","experiment_name","marginBottom","weightage","scheduleDetailsFlex","scheduleDetailsValue","created_at","updated_at","cronSyntax","parseExpression","next","menuCell","optionBtn","btnImg","btnText","rerunBtn","downloadText","downloadBtn","modalDiv","modalHeader","modalConfirm","modalBtns","w7"],"mappings":"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","sourcesContent":["import { useMutation } from '@apollo/client';\nimport {\n  Button,\n  IconButton,\n  Menu,\n  MenuItem,\n  Popover,\n  TableCell,\n  Typography,\n} from '@material-ui/core';\nimport { InsertDriveFileOutlined } from '@material-ui/icons';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport GetAppIcon from '@material-ui/icons/GetApp';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport parser from 'cron-parser';\nimport cronstrue from 'cronstrue';\nimport { ButtonFilled, ButtonOutlined, Modal } from 'litmus-ui';\nimport moment from 'moment';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport YAML from 'yaml';\nimport { RERUN_CHAOS_WORKFLOW } from '../../../graphql/mutations';\nimport { ScheduledWorkflow } from '../../../models/graphql/workflowListData';\nimport useActions from '../../../redux/actions';\nimport * as TabActions from '../../../redux/actions/tabs';\nimport * as WorkflowActions from '../../../redux/actions/workflow';\nimport { history } from '../../../redux/configureStore';\nimport { ReactComponent as CrossMarkIcon } from '../../../svg/crossmark.svg';\nimport timeDifferenceForDate from '../../../utils/datesModifier';\nimport { getProjectID, getProjectRole } from '../../../utils/getSearchParams';\nimport ExperimentPoints from './ExperimentPoints';\nimport SaveTemplateModal from './SaveTemplateModal';\nimport useStyles from './styles';\n\ninterface TableDataProps {\n  data: ScheduledWorkflow;\n  deleteRow: (wfid: string) => void;\n  handleToggleSchedule: (schedule: ScheduledWorkflow) => void;\n}\n\nconst TableData: React.FC<TableDataProps> = ({\n  data,\n  deleteRow,\n  handleToggleSchedule,\n}) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n\n  const projectID = getProjectID();\n  const projectRole = getProjectRole();\n\n  const workflow = useActions(WorkflowActions);\n\n  // States for PopOver to display Experiment Weights\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [popAnchorEl, setPopAnchorEl] = React.useState<null | HTMLElement>(\n    null\n  );\n  const [isModalOpen, setIsModalOpen] = React.useState<boolean>(false);\n  const [isTemplateModalOpen, setIsTemplateModalOpen] =\n    React.useState<boolean>(false);\n\n  const tabs = useActions(TabActions);\n  const open = Boolean(anchorEl);\n  const isOpen = Boolean(popAnchorEl);\n  const id = isOpen ? 'simple-popover' : undefined;\n  const handlePopOverClose = () => {\n    setPopAnchorEl(null);\n  };\n\n  const handlePopOverClick = (event: React.MouseEvent<HTMLElement>) => {\n    setPopAnchorEl(event.currentTarget);\n  };\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n    setIsModalOpen(false);\n  };\n\n  // States for PopOver to display schedule details\n  const [popAnchorElSchedule, setPopAnchorElSchedule] =\n    React.useState<null | HTMLElement>(null);\n  const isOpenSchedule = Boolean(popAnchorElSchedule);\n  const idSchedule = isOpenSchedule ? 'simple-popover' : undefined;\n  const handlePopOverCloseForSchedule = () => {\n    setPopAnchorElSchedule(null);\n  };\n\n  const handlePopOverClickForSchedule = (\n    event: React.MouseEvent<HTMLElement>\n  ) => {\n    setPopAnchorElSchedule(event.currentTarget);\n  };\n\n  // Function to download the manifest\n  const downloadYAML = (manifest: string, name: string) => {\n    const parsedYAML = YAML.parse(manifest);\n    const doc = new YAML.Document();\n    doc.contents = parsedYAML;\n    const element = document.createElement('a');\n    const file = new Blob([YAML.stringify(doc)], {\n      type: 'text/yaml',\n    });\n    element.href = URL.createObjectURL(file);\n    element.download = `${name}.yaml`;\n    document.body.appendChild(element);\n    element.click();\n  };\n\n  // Function to convert UNIX time in format of DD MMM YYY\n  const formatDate = (date: string) => {\n    const updated = new Date(parseInt(date, 10) * 1000).toString();\n    const resDate = moment(updated).format('DD MMM YYYY');\n    if (date) return resDate;\n    return 'Date not available';\n  };\n\n  const editSchedule = () => {\n    history.push({\n      pathname: `/workflows/schedule/${data.project_id}/${data.workflow_name}`,\n      search: `?projectID=${projectID}&projectRole=${projectRole}`,\n    });\n  };\n\n  const [reRunChaosWorkFlow] = useMutation(RERUN_CHAOS_WORKFLOW, {\n    onCompleted: () => {\n      tabs.changeWorkflowsTabs(0);\n    },\n  });\n\n  const reRunSchedule = () => {\n    reRunChaosWorkFlow({\n      variables: {\n        data: data.workflow_id,\n      },\n    });\n  };\n\n  const handleSaveWorkflowTemplate = (manifest: string) => {\n    const parsedYAML = YAML.parse(manifest);\n    if (parsedYAML.metadata.labels !== undefined) {\n      const labelData = parsedYAML.metadata.labels;\n      if (labelData.cluster_id !== undefined) {\n        delete labelData.cluster_id;\n      }\n      if (labelData.workflow_id !== undefined) {\n        delete labelData.workflow_id;\n      }\n    }\n    workflow.setWorkflowManifest({\n      manifest: YAML.stringify(parsedYAML),\n    });\n    setIsTemplateModalOpen(true);\n  };\n\n  const handleCloseTemplate = () => {\n    setIsTemplateModalOpen(false);\n  };\n\n  return (\n    <>\n      <Modal\n        width=\"60%\"\n        open={isTemplateModalOpen}\n        onClose={handleCloseTemplate}\n        modalActions={\n          <ButtonOutlined onClick={handleCloseTemplate}>\n            &#x2715;\n          </ButtonOutlined>\n        }\n      >\n        <SaveTemplateModal\n          closeTemplate={handleCloseTemplate}\n          isCustomWorkflow={data.isCustomWorkflow as unknown as boolean}\n        />\n      </Modal>\n      <TableCell className={classes.workflowNameData}>\n        <Typography>\n          <span\n            className={`${classes.boldText} ${\n              YAML.parse(data.workflow_manifest).spec.suspend === true\n                ? classes.dark\n                : ''\n            }`}\n          >\n            {data.workflow_name}\n          </span>\n        </Typography>\n      </TableCell>\n      <TableCell>\n        <Typography className={classes.clusterData}>\n          <span\n            className={\n              YAML.parse(data.workflow_manifest).spec.suspend === true\n                ? classes.dark\n                : ''\n            }\n          >\n            {data.cluster_name}\n          </span>\n        </Typography>\n      </TableCell>\n      <TableCell>\n        <Button\n          onClick={handlePopOverClick}\n          className={classes.buttonTransform}\n        >\n          <span\n            className={\n              YAML.parse(data.workflow_manifest).spec.suspend === true\n                ? classes.dark\n                : ''\n            }\n          >\n            <div className={classes.expDiv}>\n              <Typography className={`${classes.boldText} ${classes.expInfo}`}>\n                {t('chaosWorkflows.browseSchedules.showExperiments')}\n              </Typography>\n              {isOpen ? <KeyboardArrowDownIcon /> : <ChevronRightIcon />}\n            </div>\n          </span>\n        </Button>\n        <Popover\n          id={id}\n          open={isOpen}\n          anchorEl={popAnchorEl}\n          onClose={handlePopOverClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n        >\n          <div className={classes.weightDiv}>\n            {data.weightages.map((expData) => {\n              return (\n                <div key={expData.experiment_name} style={{ marginBottom: 8 }}>\n                  <ExperimentPoints\n                    expName={expData.experiment_name}\n                    weight={expData.weightage}\n                  />\n                </div>\n              );\n            })}\n          </div>\n        </Popover>\n      </TableCell>\n      <TableCell>\n        <Button\n          onClick={handlePopOverClickForSchedule}\n          className={classes.buttonTransform}\n        >\n          <span\n            className={\n              YAML.parse(data.workflow_manifest).spec.suspend === true\n                ? classes.dark\n                : ''\n            }\n          >\n            <div className={classes.expDiv}>\n              <Typography className={`${classes.boldText} ${classes.expInfo}`}>\n                {t('chaosWorkflows.browseSchedules.showSchedule')}\n              </Typography>\n              {isOpenSchedule ? (\n                <KeyboardArrowDownIcon />\n              ) : (\n                <ChevronRightIcon />\n              )}\n            </div>\n          </span>\n        </Button>\n        <Popover\n          id={idSchedule}\n          open={isOpenSchedule}\n          anchorEl={popAnchorElSchedule}\n          onClose={handlePopOverCloseForSchedule}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n        >\n          <div className={classes.weightDiv}>\n            <Typography className={classes.scheduleDetailsFlex}>\n              <span className={classes.boldText}>\n                {t('chaosWorkflows.browseSchedules.startingDate')} :\n              </span>\n              <span className={classes.scheduleDetailsValue}>\n                {formatDate(data.created_at)}\n              </span>\n            </Typography>\n            <Typography className={classes.scheduleDetailsFlex}>\n              <span className={classes.boldText}>\n                {t('chaosWorkflows.browseSchedules.lastRun')} :\n              </span>\n              <span className={classes.scheduleDetailsValue}>\n                {timeDifferenceForDate(data.updated_at)}\n              </span>\n            </Typography>\n            <Typography className={classes.scheduleDetailsFlex}>\n              <span className={classes.boldText}>\n                {t('chaosWorkflows.browseSchedules.regularity')} :\n              </span>\n              <span className={classes.scheduleDetailsValue}>\n                {data.cronSyntax === ''\n                  ? `${t('chaosWorkflows.browseSchedules.regularityOnce')}`\n                  : cronstrue.toString(data.cronSyntax)}\n              </span>\n            </Typography>\n          </div>\n        </Popover>\n      </TableCell>\n      <TableCell>\n        <span\n          className={\n            YAML.parse(data.workflow_manifest).spec.suspend === true\n              ? classes.dark\n              : ''\n          }\n        >\n          {YAML.parse(data.workflow_manifest).spec.suspend === true ? (\n            <Typography>\n              {t('chaosWorkflows.browseSchedules.scheduleIsDisabled')}\n            </Typography>\n          ) : (\n            data.cronSyntax !== '' && (\n              <Typography>\n                {parser.parseExpression(data.cronSyntax).next().toString()}\n              </Typography>\n            )\n          )}\n        </span>\n      </TableCell>\n      <TableCell className={classes.menuCell}>\n        <IconButton\n          aria-label=\"more\"\n          aria-controls=\"long-menu\"\n          aria-haspopup=\"true\"\n          onClick={handleClick}\n          className={classes.optionBtn}\n          data-cy=\"browseScheduleOptions\"\n        >\n          <MoreVertIcon />\n        </IconButton>\n\n        <Menu\n          id=\"long-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n        >\n          {data.cronSyntax !== '' ? (\n            <MenuItem value=\"Edit_Schedule\" onClick={() => editSchedule()}>\n              <div className={classes.expDiv}>\n                <img\n                  src=\"/icons/Edit.svg\"\n                  alt=\"Edit Schedule\"\n                  className={classes.btnImg}\n                />\n                <Typography data-cy=\"editSchedule\" className={classes.btnText}>\n                  {t('chaosWorkflows.browseSchedules.editSchedule')}\n                </Typography>\n              </div>\n            </MenuItem>\n          ) : (\n            <></>\n          )}\n          {projectRole !== 'Viewer' && data.cronSyntax === '' ? (\n            <MenuItem value=\"Rerun_Schedule\" onClick={() => reRunSchedule()}>\n              <div className={classes.expDiv}>\n                <ReplayIcon className={classes.rerunBtn} />\n                <Typography data-cy=\"reRunSchedule\" className={classes.btnText}>\n                  {t('chaosWorkflows.browseSchedules.reRunSchedule')}\n                </Typography>\n              </div>\n            </MenuItem>\n          ) : (\n            <></>\n          )}\n          {projectRole !== 'Viewer' &&\n            data.cronSyntax !== '' &&\n            YAML.parse(data.workflow_manifest).spec.suspend !== true && (\n              <MenuItem\n                value=\"Disable\"\n                onClick={() => {\n                  handleToggleSchedule(data);\n                }}\n              >\n                <div className={classes.expDiv}>\n                  <img\n                    src=\"/icons/disableSchedule.svg\"\n                    alt=\"Delete Schedule\"\n                    className={classes.btnImg}\n                  />\n                  <Typography\n                    data-cy=\"disableSchedule\"\n                    className={classes.downloadText}\n                  >\n                    {t('chaosWorkflows.browseSchedules.disableSchedule')}\n                  </Typography>\n                </div>\n              </MenuItem>\n            )}\n\n          {projectRole !== 'Viewer' &&\n            YAML.parse(data.workflow_manifest).spec.suspend === true && (\n              <MenuItem\n                value=\"Enable\"\n                onClick={() => {\n                  handleToggleSchedule(data);\n                }}\n              >\n                <div className={classes.expDiv}>\n                  <img\n                    src=\"/icons/disableSchedule.svg\"\n                    alt=\"Enable Schedule\"\n                    className={classes.btnImg}\n                  />\n                  <Typography\n                    data-cy=\"enableSchedule\"\n                    className={classes.downloadText}\n                  >\n                    {t('chaosWorkflows.browseSchedules.enableSchedule')}\n                  </Typography>\n                </div>\n              </MenuItem>\n            )}\n          <MenuItem\n            value=\"Download\"\n            onClick={() =>\n              downloadYAML(data.workflow_manifest, data.workflow_name)\n            }\n          >\n            <div className={classes.expDiv}>\n              <GetAppIcon className={classes.downloadBtn} />\n              <Typography\n                data-cy=\"downloadManifest\"\n                className={classes.downloadText}\n              >\n                {t('chaosWorkflows.browseSchedules.downloadManifest')}\n              </Typography>\n            </div>\n          </MenuItem>\n          <MenuItem\n            value=\"Download\"\n            onClick={() => handleSaveWorkflowTemplate(data.workflow_manifest)}\n          >\n            <div className={classes.expDiv}>\n              <InsertDriveFileOutlined className={classes.downloadBtn} />\n              <Typography\n                data-cy=\"downloadManifest\"\n                className={classes.downloadText}\n              >\n                {t('chaosWorkflows.browseSchedules.saveTemplate')}\n              </Typography>\n            </div>\n          </MenuItem>\n          {projectRole !== 'Viewer' ? (\n            <MenuItem value=\"Analysis\" onClick={() => setIsModalOpen(true)}>\n              <div className={classes.expDiv}>\n                <img\n                  src=\"/icons/deleteSchedule.svg\"\n                  alt=\"Delete Schedule\"\n                  className={classes.btnImg}\n                />\n                <Typography\n                  data-cy=\"deleteSchedule\"\n                  className={classes.btnText}\n                >\n                  {data.cronSyntax !== ''\n                    ? t('chaosWorkflows.browseSchedules.deleteSchedule')\n                    : t('chaosWorkflows.browseSchedules.deleteWorkflow')}\n                </Typography>\n              </div>\n            </MenuItem>\n          ) : null}\n        </Menu>\n      </TableCell>\n      {isModalOpen ? (\n        <Modal\n          open={isModalOpen}\n          onClose={handleClose}\n          width=\"60%\"\n          modalActions={\n            <ButtonOutlined onClick={handleClose}>&#x2715;</ButtonOutlined>\n          }\n        >\n          <div className={classes.modalDiv}>\n            <CrossMarkIcon />\n            <Typography className={classes.modalHeader}>\n              {t('createWorkflow.scheduleWorkflow.modalHeader')}\n            </Typography>\n            <Typography className={classes.modalConfirm}>\n              {t('createWorkflow.scheduleWorkflow.modalSubheader')}\n            </Typography>\n            <div className={classes.modalBtns}>\n              <ButtonOutlined onClick={() => setIsModalOpen(false)}>\n                {t('createWorkflow.scheduleWorkflow.cancelBtn')}\n              </ButtonOutlined>\n              <ButtonFilled\n                variant=\"error\"\n                className={classes.w7}\n                onClick={() => {\n                  deleteRow(data.workflow_id);\n                  setIsModalOpen(false);\n                }}\n              >\n                {t('createWorkflow.scheduleWorkflow.deleteBtn')}\n              </ButtonFilled>\n            </div>\n          </div>\n        </Modal>\n      ) : (\n        <></>\n      )}\n    </>\n  );\n};\nexport default TableData;\n"]},"metadata":{},"sourceType":"module"}