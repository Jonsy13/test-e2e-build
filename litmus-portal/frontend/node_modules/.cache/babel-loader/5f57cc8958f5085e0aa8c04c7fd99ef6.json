{"ast":null,"code":"import _toConsumableArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useLazyQuery,useQuery}from'@apollo/client';import{AccordionDetails,FormControl,InputLabel,MenuItem,RadioGroup,Select,Typography,useTheme}from'@material-ui/core';import{LitmusCard,RadioButton,Search}from'litmus-ui';import localforage from'localforage';import React,{useEffect,useState}from'react';import{useTranslation}from'react-i18next';import config from'../../../config';import{GET_HUB_STATUS,GET_PREDEFINED_WORKFLOW_LIST}from'../../../graphql';import{getProjectID}from'../../../utils/getSearchParams';import useStyles,{MenuProps}from'./styles';var ChoosePreDefinedExperiments=function ChoosePreDefinedExperiments(){var _useTranslation=useTranslation(),t=_useTranslation.t;var classes=useStyles();var _useTheme=useTheme(),palette=_useTheme.palette;// Local States\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var selectedProjectID=getProjectID();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),selectedHub=_useState6[0],setSelectedHub=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),availableHubs=_useState8[0],setAvailableHubs=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),workflowList=_useState10[0],setWorkflowlist=_useState10[1];// Get all MyHubs with status\nvar _useQuery=useQuery(GET_HUB_STATUS,{variables:{data:selectedProjectID},fetchPolicy:'cache-and-network'}),data=_useQuery.data,loading=_useQuery.loading;/**\n   * Query to get the list of Pre-defined workflows\n   */var _useLazyQuery=useLazyQuery(GET_PREDEFINED_WORKFLOW_LIST,{fetchPolicy:'network-only',onCompleted:function onCompleted(data){if(data.GetPredefinedWorkflowList!==undefined){setWorkflowlist(data.GetPredefinedWorkflowList);}},onError:function onError(){setWorkflowlist([]);}}),_useLazyQuery2=_slicedToArray(_useLazyQuery,1),getPredefinedWorkflow=_useLazyQuery2[0];/**\n   * Function to handle changes in Radio Buttons\n   */var handleChange=function handleChange(event){setSelected(event.target.value);var selection={selected:'A',id:event.target.value};localforage.setItem('selectedScheduleOption',selection);localforage.setItem('hasSetWorkflowData',false);};var filteredPreDefinedWorkflows=workflowList.filter(function(w){if(search===null)return w;if(w.toLowerCase().includes(search.toLowerCase()))return w;return null;});/**\n   * Function to handle change in MyHub dropdown\n   */var handleMyHubChange=function handleMyHubChange(event){setSelectedHub(event.target.value);getPredefinedWorkflow({variables:{hubname:event.target.value,projectid:selectedProjectID}});localforage.setItem('selectedHub',event.target.value);};// Selects Option A -> Sub Experiment Options which was already selected by the user\nuseEffect(function(){localforage.getItem('selectedScheduleOption').then(function(value){return value!==null?setSelected(value.id):setSelected('');});},[]);/**\n   * UseEffect to check if Chaos Hub exists and if exists\n   * fetch the pre-defined workflows\n   */useEffect(function(){if((data===null||data===void 0?void 0:data.getHubStatus)!==undefined){if(data.getHubStatus.length){setAvailableHubs(_toConsumableArray(data.getHubStatus));}data.getHubStatus.forEach(function(hubData){if(hubData.HubName.toLowerCase()==='chaos hub'){setSelectedHub('Chaos Hub');localforage.setItem('selectedHub','Chaos Hub');getPredefinedWorkflow({variables:{hubname:'Chaos Hub',projectid:selectedProjectID}});}});}},[loading]);return/*#__PURE__*/React.createElement(AccordionDetails,null,/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.inputMyHubDiv},/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",className:classes.formControl},/*#__PURE__*/React.createElement(InputLabel,{className:classes.label},t('createWorkflow.chooseWorkflow.selectMyHub')),/*#__PURE__*/React.createElement(Select,{\"data-cy\":\"selectPreDefinedMyHub\",value:selectedHub,onChange:function onChange(e){handleMyHubChange(e);},label:\"Select MyHub\",MenuProps:MenuProps},availableHubs.map(function(hubs){return/*#__PURE__*/React.createElement(MenuItem,{key:hubs.HubName,value:hubs.HubName},/*#__PURE__*/React.createElement(Typography,{\"data-cy\":\"PreDefinedHubOption\"},hubs.HubName));})))),/*#__PURE__*/React.createElement(\"div\",{className:classes.searchDiv},/*#__PURE__*/React.createElement(Search,{\"data-cy\":\"agentSearch\",id:\"input-with-icon-textfield\",placeholder:\"Search\",value:search,onChange:function onChange(event){return setSearch(event.target.value);}}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:classes.predefinedWorkflowDiv},selectedHub===''?/*#__PURE__*/React.createElement(\"div\",{className:classes.noTemplatesDiv},/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesText},/*#__PURE__*/React.createElement(\"strong\",null,t('createWorkflow.chooseWorkflow.noMyHub'))),/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesDesc},t('createWorkflow.chooseWorkflow.selectHub'))):workflowList.length===0?/*#__PURE__*/React.createElement(\"div\",{className:classes.noTemplatesDiv},/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesText},/*#__PURE__*/React.createElement(\"strong\",null,t('createWorkflow.chooseWorkflow.noPredefined'))),/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesDesc},t('createWorkflow.chooseWorkflow.addPredefined'))):/*#__PURE__*/React.createElement(RadioGroup,{value:selected,\"data-cy\":\"PredefinedWorkflowsRadioGroup\",onChange:handleChange},(filteredPreDefinedWorkflows===null||filteredPreDefinedWorkflows===void 0?void 0:filteredPreDefinedWorkflows.length)>0?filteredPreDefinedWorkflows===null||filteredPreDefinedWorkflows===void 0?void 0:filteredPreDefinedWorkflows.map(function(wfData){return/*#__PURE__*/React.createElement(LitmusCard,{width:\"100%\",height:\"5rem\",key:wfData,borderColor:palette.border.main,className:classes.predefinedWorkflowCard},/*#__PURE__*/React.createElement(RadioButton,{value:wfData},/*#__PURE__*/React.createElement(\"div\",{id:\"body\"},/*#__PURE__*/React.createElement(\"div\",{id:\"left-div\"},/*#__PURE__*/React.createElement(\"img\",{className:classes.experimentIcon,src:\"\".concat(config.grahqlEndpoint,\"/icon/\").concat(selectedProjectID,\"/\").concat(selectedHub,\"/predefined/\").concat(wfData,\".png\"),alt:\"Experiment Icon\"}),/*#__PURE__*/React.createElement(Typography,{className:classes.predefinedWorkflowName},wfData)))));}):/*#__PURE__*/React.createElement(\"div\",{className:classes.noTemplatesDiv},/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesText},/*#__PURE__*/React.createElement(\"strong\",null,t('createWorkflow.chooseWorkflow.noPredefined'))),/*#__PURE__*/React.createElement(Typography,{className:classes.noTemplatesDesc},t('createWorkflow.chooseWorkflow.searchTerm'))))),/*#__PURE__*/React.createElement(\"div\",{className:classes.blur})));};export default ChoosePreDefinedExperiments;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/CreateWorkflow/ChooseWorkflow/choosePreDefinedExperiments.tsx"],"names":["useLazyQuery","useQuery","AccordionDetails","FormControl","InputLabel","MenuItem","RadioGroup","Select","Typography","useTheme","LitmusCard","RadioButton","Search","localforage","React","useEffect","useState","useTranslation","config","GET_HUB_STATUS","GET_PREDEFINED_WORKFLOW_LIST","getProjectID","useStyles","MenuProps","ChoosePreDefinedExperiments","t","classes","palette","search","setSearch","selected","setSelected","selectedProjectID","selectedHub","setSelectedHub","availableHubs","setAvailableHubs","workflowList","setWorkflowlist","variables","data","fetchPolicy","loading","onCompleted","GetPredefinedWorkflowList","undefined","onError","getPredefinedWorkflow","handleChange","event","target","value","selection","id","setItem","filteredPreDefinedWorkflows","filter","w","toLowerCase","includes","handleMyHubChange","hubname","projectid","getItem","then","getHubStatus","length","forEach","hubData","HubName","width","display","inputMyHubDiv","formControl","label","e","map","hubs","searchDiv","predefinedWorkflowDiv","noTemplatesDiv","noTemplatesText","noTemplatesDesc","wfData","border","main","predefinedWorkflowCard","experimentIcon","grahqlEndpoint","predefinedWorkflowName","blur"],"mappings":"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","sourcesContent":["import { useLazyQuery, useQuery } from '@apollo/client';\nimport {\n  AccordionDetails,\n  FormControl,\n  InputLabel,\n  MenuItem,\n  RadioGroup,\n  Select,\n  Typography,\n  useTheme,\n} from '@material-ui/core';\nimport { LitmusCard, RadioButton, Search } from 'litmus-ui';\nimport localforage from 'localforage';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport config from '../../../config';\nimport { GET_HUB_STATUS, GET_PREDEFINED_WORKFLOW_LIST } from '../../../graphql';\nimport { MyHubDetail } from '../../../models/graphql/user';\nimport { HubStatus } from '../../../models/redux/myhub';\nimport { getProjectID } from '../../../utils/getSearchParams';\nimport useStyles, { MenuProps } from './styles';\n\ninterface ChooseWorkflowRadio {\n  selected: string;\n  id: string;\n}\n\nconst ChoosePreDefinedExperiments = () => {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const { palette } = useTheme();\n\n  // Local States\n  const [search, setSearch] = useState<string | null>(null);\n  const [selected, setSelected] = useState<string>('');\n\n  const selectedProjectID = getProjectID();\n  const [selectedHub, setSelectedHub] = useState('');\n  const [availableHubs, setAvailableHubs] = useState<MyHubDetail[]>([]);\n  const [workflowList, setWorkflowlist] = useState([]);\n\n  // Get all MyHubs with status\n  const { data, loading } = useQuery<HubStatus>(GET_HUB_STATUS, {\n    variables: { data: selectedProjectID },\n    fetchPolicy: 'cache-and-network',\n  });\n\n  /**\n   * Query to get the list of Pre-defined workflows\n   */\n  const [getPredefinedWorkflow] = useLazyQuery(GET_PREDEFINED_WORKFLOW_LIST, {\n    fetchPolicy: 'network-only',\n    onCompleted: (data) => {\n      if (data.GetPredefinedWorkflowList !== undefined) {\n        setWorkflowlist(data.GetPredefinedWorkflowList);\n      }\n    },\n    onError: () => {\n      setWorkflowlist([]);\n    },\n  });\n\n  /**\n   * Function to handle changes in Radio Buttons\n   */\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setSelected(event.target.value);\n    const selection: ChooseWorkflowRadio = {\n      selected: 'A',\n      id: event.target.value,\n    };\n    localforage.setItem('selectedScheduleOption', selection);\n    localforage.setItem('hasSetWorkflowData', false);\n  };\n\n  const filteredPreDefinedWorkflows = workflowList.filter((w: string) => {\n    if (search === null) return w;\n    if (w.toLowerCase().includes(search.toLowerCase())) return w;\n    return null;\n  });\n\n  /**\n   * Function to handle change in MyHub dropdown\n   */\n  const handleMyHubChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined;\n      value: unknown;\n    }>\n  ) => {\n    setSelectedHub(event.target.value as string);\n    getPredefinedWorkflow({\n      variables: {\n        hubname: event.target.value as string,\n        projectid: selectedProjectID,\n      },\n    });\n    localforage.setItem('selectedHub', event.target.value as string);\n  };\n\n  // Selects Option A -> Sub Experiment Options which was already selected by the user\n  useEffect(() => {\n    localforage\n      .getItem('selectedScheduleOption')\n      .then((value) =>\n        value !== null\n          ? setSelected((value as ChooseWorkflowRadio).id)\n          : setSelected('')\n      );\n  }, []);\n\n  /**\n   * UseEffect to check if Chaos Hub exists and if exists\n   * fetch the pre-defined workflows\n   */\n  useEffect(() => {\n    if (data?.getHubStatus !== undefined) {\n      if (data.getHubStatus.length) {\n        setAvailableHubs([...data.getHubStatus]);\n      }\n      data.getHubStatus.forEach((hubData) => {\n        if (hubData.HubName.toLowerCase() === 'chaos hub') {\n          setSelectedHub('Chaos Hub');\n          localforage.setItem('selectedHub', 'Chaos Hub');\n          getPredefinedWorkflow({\n            variables: {\n              hubname: 'Chaos Hub',\n              projectid: selectedProjectID,\n            },\n          });\n        }\n      });\n    }\n  }, [loading]);\n\n  return (\n    <AccordionDetails>\n      {/* Wrapping content inside the Accordion to take full width */}\n      <div style={{ width: '100%' }}>\n        <div style={{ display: 'flex' }}>\n          <div className={classes.inputMyHubDiv}>\n            <FormControl variant=\"outlined\" className={classes.formControl}>\n              <InputLabel className={classes.label}>\n                {t('createWorkflow.chooseWorkflow.selectMyHub')}\n              </InputLabel>\n              <Select\n                data-cy=\"selectPreDefinedMyHub\"\n                value={selectedHub}\n                onChange={(e) => {\n                  handleMyHubChange(e);\n                }}\n                label=\"Select MyHub\"\n                MenuProps={MenuProps}\n              >\n                {availableHubs.map((hubs) => (\n                  <MenuItem key={hubs.HubName} value={hubs.HubName}>\n                    <Typography data-cy=\"PreDefinedHubOption\">\n                      {hubs.HubName}\n                    </Typography>\n                  </MenuItem>\n                ))}\n              </Select>\n            </FormControl>\n          </div>\n          <div className={classes.searchDiv}>\n            <Search\n              data-cy=\"agentSearch\"\n              id=\"input-with-icon-textfield\"\n              placeholder=\"Search\"\n              value={search}\n              onChange={(event) => setSearch(event.target.value)}\n            />\n          </div>\n        </div>\n\n        {/* Leaving some space between the search and pre-defined workflow cards */}\n        <br />\n\n        {/* List of Pre-defined workflows */}\n        <div className={classes.predefinedWorkflowDiv}>\n          {selectedHub === '' ? (\n            <div className={classes.noTemplatesDiv}>\n              <Typography className={classes.noTemplatesText}>\n                <strong>{t('createWorkflow.chooseWorkflow.noMyHub')}</strong>\n              </Typography>\n              <Typography className={classes.noTemplatesDesc}>\n                {t('createWorkflow.chooseWorkflow.selectHub')}\n              </Typography>\n            </div>\n          ) : workflowList.length === 0 ? (\n            <div className={classes.noTemplatesDiv}>\n              <Typography className={classes.noTemplatesText}>\n                <strong>\n                  {t('createWorkflow.chooseWorkflow.noPredefined')}\n                </strong>\n              </Typography>\n              <Typography className={classes.noTemplatesDesc}>\n                {t('createWorkflow.chooseWorkflow.addPredefined')}\n              </Typography>\n            </div>\n          ) : (\n            <RadioGroup\n              value={selected}\n              data-cy=\"PredefinedWorkflowsRadioGroup\"\n              onChange={handleChange}\n            >\n              {filteredPreDefinedWorkflows?.length > 0 ? (\n                filteredPreDefinedWorkflows?.map((wfData) => (\n                  <LitmusCard\n                    width=\"100%\"\n                    height=\"5rem\"\n                    key={wfData}\n                    borderColor={palette.border.main}\n                    className={classes.predefinedWorkflowCard}\n                  >\n                    <RadioButton value={wfData}>\n                      {/* Wrap the entire body with 100% width to divide into 40-60 */}\n                      <div id=\"body\">\n                        {/* Left Div => Icon + Name of Workflow */}\n                        <div id=\"left-div\">\n                          <img\n                            className={classes.experimentIcon}\n                            src={`${config.grahqlEndpoint}/icon/${selectedProjectID}/${selectedHub}/predefined/${wfData}.png`}\n                            alt=\"Experiment Icon\"\n                          />\n                          <Typography\n                            className={classes.predefinedWorkflowName}\n                          >\n                            {wfData}\n                          </Typography>\n                        </div>\n                      </div>\n                    </RadioButton>\n                  </LitmusCard>\n                ))\n              ) : (\n                <div className={classes.noTemplatesDiv}>\n                  <Typography className={classes.noTemplatesText}>\n                    <strong>\n                      {t('createWorkflow.chooseWorkflow.noPredefined')}\n                    </strong>\n                  </Typography>\n                  <Typography className={classes.noTemplatesDesc}>\n                    {t('createWorkflow.chooseWorkflow.searchTerm')}\n                  </Typography>\n                </div>\n              )}\n            </RadioGroup>\n          )}\n        </div>\n        {/* Bottom Blur */}\n        <div className={classes.blur} />\n      </div>\n    </AccordionDetails>\n  );\n};\n\nexport default ChoosePreDefinedExperiments;\n"]},"metadata":{},"sourceType":"module"}