{"ast":null,"code":"import _slicedToArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useMutation,useQuery}from'@apollo/client';import{Button,IconButton,Menu,MenuItem,Popover,TableCell,Typography}from'@material-ui/core';import ChevronRightIcon from'@material-ui/icons/ChevronRight';import KeyboardArrowDownIcon from'@material-ui/icons/KeyboardArrowDown';import MoreVertIcon from'@material-ui/icons/MoreVert';import{ButtonFilled,LightPills}from'litmus-ui';import React from'react';import{useTranslation}from'react-i18next';import TimePopOver from'../../../components/TimePopOver';import{DELETE_WORKFLOW,SYNC_WORKFLOW,WORKFLOW_LIST_DETAILS}from'../../../graphql';import useActions from'../../../redux/actions';import*as NodeSelectionActions from'../../../redux/actions/nodeSelection';import{history}from'../../../redux/configureStore';import{getProjectID,getProjectRole}from'../../../utils/getSearchParams';import ExperimentPoints from'../BrowseSchedule/ExperimentPoints';import useStyles from'./styles';var TableData=function TableData(_ref){var _data$workflow_id,_data$last_updated,_data$phase,_data$last_updated2,_data$phase2,_data$phase3,_data$cluster_name,_data$last_updated3;var data=_ref.data,refetchQuery=_ref.refetchQuery;var classes=useStyles();var projectID=getProjectID();var projectRole=getProjectRole();var _useTranslation=useTranslation(),t=_useTranslation.t;var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),anchorEl=_React$useState2[0],setAnchorEl=_React$useState2[1];var open=Boolean(anchorEl);var nodeSelection=useActions(NodeSelectionActions);var handleClick=function handleClick(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};// Function to capitalize the first letter of the word\n// eg: internal to Internal\nvar nameCapitalized=function nameCapitalized(clusterType){if(clusterType)return clusterType.charAt(0).toUpperCase()+clusterType.slice(1);return'Not Available';};var _useQuery=useQuery(WORKFLOW_LIST_DETAILS,{variables:{workflowInput:{project_id:projectID,workflow_ids:[(_data$workflow_id=data.workflow_id)!==null&&_data$workflow_id!==void 0?_data$workflow_id:'']}}}),scheduledWorkflowData=_useQuery.data;var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),popAnchorEl=_React$useState4[0],setPopAnchorEl=_React$useState4[1];var isOpen=Boolean(popAnchorEl);var id=isOpen?'simple-popover':undefined;var handlePopOverClose=function handlePopOverClose(){setPopAnchorEl(null);};var handlePopOverClick=function handlePopOverClick(event){setPopAnchorEl(event.currentTarget);};/**\n   * State variables for warning popover\n   */var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),popWarningAnchorEl=_React$useState6[0],setWarningPopAnchorEl=_React$useState6[1];var isWarningOpen=Boolean(popWarningAnchorEl);var idWarning=isWarningOpen?'simple-popover':undefined;var handleWarningPopOverClose=function handleWarningPopOverClose(){setWarningPopAnchorEl(null);};var handleWarningPopOverClick=function handleWarningPopOverClick(event){setWarningPopAnchorEl(event.currentTarget);};/**\n   * Sync workflow to sync a chaos workflow\n   */var _useMutation=useMutation(SYNC_WORKFLOW,{onCompleted:function onCompleted(data){if(data.syncWorkflow){handleWarningPopOverClose();refetchQuery();}}}),_useMutation2=_slicedToArray(_useMutation,1),syncWorkflow=_useMutation2[0];/**\n   * Delete workflow mutation to delete a chaos workflow\n   */var _useMutation3=useMutation(DELETE_WORKFLOW,{onCompleted:function onCompleted(data){if(data.deleteChaosWorkflow){handleWarningPopOverClose();refetchQuery();}}}),_useMutation4=_slicedToArray(_useMutation3,1),deleteWorkflow=_useMutation4[0];function getResiliencyScoreColor(score){if(score<39){return classes.less;}if(score>40&&score<79){return classes.medium;}return classes.high;}// Function to find the time different in minutes\nvar timeDiff=function timeDiff(currentTime,lastUpdated){var current=currentTime;var last=parseInt(lastUpdated,10)*1000;var timeDifference=(current-last)/(60*1000);return timeDifference;};var getVariant=function getVariant(variant){switch(variant){case'succeeded':return'success';case'failed':return'danger';case'running':return'warning';default:return undefined;}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TableCell,{className:classes.warningTableCell},timeDiff(new Date().getTime(),(_data$last_updated=data.last_updated)!==null&&_data$last_updated!==void 0?_data$last_updated:'')>=20&&((_data$phase=data.phase)===null||_data$phase===void 0?void 0:_data$phase.toLowerCase())==='running'?/*#__PURE__*/React.createElement(IconButton,{onClick:handleWarningPopOverClick},/*#__PURE__*/React.createElement(\"img\",{src:\"./icons/warning.svg\",alt:\"warning\",width:\"20\"})):/*#__PURE__*/React.createElement(React.Fragment,null),/*#__PURE__*/React.createElement(Popover,{id:idWarning,open:isWarningOpen,anchorEl:popWarningAnchorEl,onClose:handleWarningPopOverClose,anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.popoverWarning},/*#__PURE__*/React.createElement(Typography,null,t('chaosWorkflows.browseWorkflows.wfIssue')),/*#__PURE__*/React.createElement(\"div\",{className:classes.imageRunning},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/running.svg\",alt:\"running\",className:classes.runningSmallIcon}),' ',/*#__PURE__*/React.createElement(Typography,{className:classes.runningText},t('chaosWorkflows.browseWorkflows.runningFrom'),' ',Math.round(timeDiff(new Date().getTime(),(_data$last_updated2=data.last_updated)!==null&&_data$last_updated2!==void 0?_data$last_updated2:'')),' ',t('chaosWorkflows.browseWorkflows.min'))),/*#__PURE__*/React.createElement(\"div\",{className:classes.warningBtnDiv},/*#__PURE__*/React.createElement(ButtonFilled,{className:classes.syncBtn,onClick:function onClick(){syncWorkflow({variables:{workflowid:data.workflow_id,workflow_run_id:data.workflow_run_id}});}},/*#__PURE__*/React.createElement(\"img\",{src:\"./icons/sync-wf.svg\",alt:\"sync\"}),/*#__PURE__*/React.createElement(Typography,{className:classes.waitingBtnText},t('chaosWorkflows.browseWorkflows.sync'))),/*#__PURE__*/React.createElement(ButtonFilled,{onClick:function onClick(){deleteWorkflow({variables:{workflowid:data.workflow_id,workflow_run_id:data.workflow_run_id}});},className:classes.terminateText},/*#__PURE__*/React.createElement(\"img\",{src:\"./icons/terminate-wf.svg\",alt:\"terminate\"}),/*#__PURE__*/React.createElement(Typography,{className:classes.waitingBtnText},t('chaosWorkflows.browseWorkflows.terminate'))))))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(LightPills,{variant:getVariant((_data$phase2=data.phase)===null||_data$phase2===void 0?void 0:_data$phase2.toLowerCase()),label:(_data$phase3=data.phase)!==null&&_data$phase3!==void 0?_data$phase3:''})),/*#__PURE__*/React.createElement(TableCell,{className:classes.workflowNameData,style:{cursor:'pointer'},onClick:function onClick(){var _data$phase4;nodeSelection.selectNode({pod_name:''});if(((_data$phase4=data.phase)===null||_data$phase4===void 0?void 0:_data$phase4.toLowerCase())!=='notavailable')history.push({pathname:\"/workflows/\".concat(data.workflow_run_id),search:\"?projectID=\".concat(projectID,\"&projectRole=\").concat(projectRole)});}},/*#__PURE__*/React.createElement(Typography,{className:classes.boldText,\"data-cy\":\"workflowName\"},data.workflow_name)),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(Typography,{className:classes.clusterName},nameCapitalized((_data$cluster_name=data.cluster_name)!==null&&_data$cluster_name!==void 0?_data$cluster_name:''))),/*#__PURE__*/React.createElement(TableCell,{className:classes.reliabiltyData},/*#__PURE__*/React.createElement(Typography,null,/*#__PURE__*/React.createElement(\"span\",null,t('chaosWorkflows.browseWorkflows.tableData.overallRR')),data.resiliency_score===undefined||data.resiliency_score===null?/*#__PURE__*/React.createElement(\"span\",{className:classes.less},t('chaosWorkflows.browseWorkflows.tableData.na')):/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(classes.boldText,\" \").concat(getResiliencyScoreColor(data.resiliency_score))},data.resiliency_score,\"%\")),/*#__PURE__*/React.createElement(Typography,null,/*#__PURE__*/React.createElement(\"span\",null,t('chaosWorkflows.browseWorkflows.tableData.experimentsPassed')),data.experiments_passed===undefined||data.experiments_passed===null||data.total_experiments===undefined||data.total_experiments===null||data.resiliency_score===undefined||data.resiliency_score===null?/*#__PURE__*/React.createElement(\"span\",{className:classes.less},t('chaosWorkflows.browseWorkflows.tableData.na')):/*#__PURE__*/React.createElement(\"span\",{className:\"\".concat(classes.boldText,\" \").concat(getResiliencyScoreColor(data.resiliency_score))},data.experiments_passed,\"/\",data.total_experiments))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{onClick:handlePopOverClick,className:classes.buttonTransform},/*#__PURE__*/React.createElement(Typography,{className:classes.boldText},t('chaosWorkflows.browseWorkflows.tableData.showExperiments'),\"(\",scheduledWorkflowData===null||scheduledWorkflowData===void 0?void 0:scheduledWorkflowData.ListWorkflow.workflows[0].weightages.length,\")\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.experimentDetails},isOpen?/*#__PURE__*/React.createElement(KeyboardArrowDownIcon,{className:classes.arrowMargin}):/*#__PURE__*/React.createElement(ChevronRightIcon,{className:classes.arrowMargin}))),/*#__PURE__*/React.createElement(Popover,{id:id,open:isOpen,anchorEl:popAnchorEl,onClose:handlePopOverClose,anchorOrigin:{vertical:'bottom',horizontal:'center'},transformOrigin:{vertical:'top',horizontal:'center'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.popover},scheduledWorkflowData===null||scheduledWorkflowData===void 0?void 0:scheduledWorkflowData.ListWorkflow.workflows[0].weightages.map(function(weightEntry){return/*#__PURE__*/React.createElement(\"div\",{key:weightEntry.experiment_name,style:{marginBottom:8}},/*#__PURE__*/React.createElement(ExperimentPoints,{expName:weightEntry.experiment_name,weight:weightEntry.weightage}));}))))),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(TimePopOver,{unixTime:(_data$last_updated3=data.last_updated)!==null&&_data$last_updated3!==void 0?_data$last_updated3:''})),/*#__PURE__*/React.createElement(TableCell,null,/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"more\",\"aria-controls\":\"long-menu\",\"aria-haspopup\":\"true\",onClick:handleClick,className:classes.optionBtn,\"data-cy\":\"browseWorkflowOptions\"},/*#__PURE__*/React.createElement(MoreVertIcon,null)),/*#__PURE__*/React.createElement(Menu,{id:\"long-menu\",anchorEl:anchorEl,keepMounted:true,open:open,onClose:handleClose},/*#__PURE__*/React.createElement(MenuItem,{value:\"Workflow\",onClick:function onClick(){var _data$phase5;nodeSelection.selectNode({pod_name:''});if(((_data$phase5=data.phase)===null||_data$phase5===void 0?void 0:_data$phase5.toLowerCase())!=='notavailable')history.push({pathname:\"/workflows/\".concat(data.workflow_run_id),search:\"?projectID=\".concat(projectID,\"&projectRole=\").concat(projectRole)});}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv,\"data-cy\":\"workflowDetails\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/show-workflow.svg\",alt:\"Display Workflow\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{className:classes.btnText},t('chaosWorkflows.browseWorkflows.tableData.showTheWorkflow')))),/*#__PURE__*/React.createElement(MenuItem,{value:\"Analysis\",onClick:function onClick(){var _data$phase6;if(((_data$phase6=data.phase)===null||_data$phase6===void 0?void 0:_data$phase6.toLowerCase())!=='notavailable')history.push({pathname:\"/workflows/analytics/\".concat(data.workflow_id),search:\"?projectID=\".concat(projectID,\"&projectRole=\").concat(projectRole)});}},/*#__PURE__*/React.createElement(\"div\",{className:classes.expDiv,\"data-cy\":\"workflowAnalytics\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/show-analytics.svg\",alt:\"Display Analytics\",className:classes.btnImg}),/*#__PURE__*/React.createElement(Typography,{className:classes.btnText},t('chaosWorkflows.browseWorkflows.tableData.showTheAnalytics')))))));};export default TableData;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/ChaosWorkflows/BrowseWorkflow/TableData.tsx"],"names":["useMutation","useQuery","Button","IconButton","Menu","MenuItem","Popover","TableCell","Typography","ChevronRightIcon","KeyboardArrowDownIcon","MoreVertIcon","ButtonFilled","LightPills","React","useTranslation","TimePopOver","DELETE_WORKFLOW","SYNC_WORKFLOW","WORKFLOW_LIST_DETAILS","useActions","NodeSelectionActions","history","getProjectID","getProjectRole","ExperimentPoints","useStyles","TableData","data","refetchQuery","classes","projectID","projectRole","t","useState","anchorEl","setAnchorEl","open","Boolean","nodeSelection","handleClick","event","currentTarget","handleClose","nameCapitalized","clusterType","charAt","toUpperCase","slice","variables","workflowInput","project_id","workflow_ids","workflow_id","scheduledWorkflowData","popAnchorEl","setPopAnchorEl","isOpen","id","undefined","handlePopOverClose","handlePopOverClick","popWarningAnchorEl","setWarningPopAnchorEl","isWarningOpen","idWarning","handleWarningPopOverClose","handleWarningPopOverClick","onCompleted","syncWorkflow","deleteChaosWorkflow","deleteWorkflow","getResiliencyScoreColor","score","less","medium","high","timeDiff","currentTime","lastUpdated","current","last","parseInt","timeDifference","getVariant","variant","warningTableCell","Date","getTime","last_updated","phase","toLowerCase","vertical","horizontal","popoverWarning","imageRunning","runningSmallIcon","runningText","Math","round","warningBtnDiv","syncBtn","workflowid","workflow_run_id","waitingBtnText","terminateText","workflowNameData","cursor","selectNode","pod_name","push","pathname","search","boldText","workflow_name","clusterName","cluster_name","reliabiltyData","resiliency_score","experiments_passed","total_experiments","buttonTransform","ListWorkflow","workflows","weightages","length","experimentDetails","arrowMargin","popover","map","weightEntry","experiment_name","marginBottom","weightage","optionBtn","expDiv","btnImg","btnText"],"mappings":"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","sourcesContent":["import { useMutation, useQuery } from '@apollo/client';\nimport {\n  Button,\n  IconButton,\n  Menu,\n  MenuItem,\n  Popover,\n  TableCell,\n  Typography,\n} from '@material-ui/core';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport { ButtonFilled, LightPills } from 'litmus-ui';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport TimePopOver from '../../../components/TimePopOver';\nimport {\n  DELETE_WORKFLOW,\n  SYNC_WORKFLOW,\n  WORKFLOW_LIST_DETAILS,\n} from '../../../graphql';\nimport { WorkflowRun } from '../../../models/graphql/workflowData';\nimport {\n  ListWorkflowsInput,\n  ScheduledWorkflows,\n} from '../../../models/graphql/workflowListData';\nimport useActions from '../../../redux/actions';\nimport * as NodeSelectionActions from '../../../redux/actions/nodeSelection';\nimport { history } from '../../../redux/configureStore';\nimport { getProjectID, getProjectRole } from '../../../utils/getSearchParams';\nimport ExperimentPoints from '../BrowseSchedule/ExperimentPoints';\nimport useStyles from './styles';\n\ninterface TableDataProps {\n  data: Partial<WorkflowRun>;\n  refetchQuery: any;\n}\n\nconst TableData: React.FC<TableDataProps> = ({ data, refetchQuery }) => {\n  const classes = useStyles();\n  const projectID = getProjectID();\n  const projectRole = getProjectRole();\n  const { t } = useTranslation();\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const open = Boolean(anchorEl);\n  const nodeSelection = useActions(NodeSelectionActions);\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  // Function to capitalize the first letter of the word\n  // eg: internal to Internal\n  const nameCapitalized = (clusterType: string) => {\n    if (clusterType)\n      return clusterType.charAt(0).toUpperCase() + clusterType.slice(1);\n    return 'Not Available';\n  };\n\n  const { data: scheduledWorkflowData } = useQuery<\n    ScheduledWorkflows,\n    ListWorkflowsInput\n  >(WORKFLOW_LIST_DETAILS, {\n    variables: {\n      workflowInput: {\n        project_id: projectID,\n        workflow_ids: [data.workflow_id ?? ''],\n      },\n    },\n  });\n\n  const [popAnchorEl, setPopAnchorEl] = React.useState<null | HTMLElement>(\n    null\n  );\n  const isOpen = Boolean(popAnchorEl);\n  const id = isOpen ? 'simple-popover' : undefined;\n  const handlePopOverClose = () => {\n    setPopAnchorEl(null);\n  };\n  const handlePopOverClick = (event: React.MouseEvent<HTMLElement>) => {\n    setPopAnchorEl(event.currentTarget);\n  };\n\n  /**\n   * State variables for warning popover\n   */\n  const [popWarningAnchorEl, setWarningPopAnchorEl] =\n    React.useState<null | HTMLElement>(null);\n  const isWarningOpen = Boolean(popWarningAnchorEl);\n  const idWarning = isWarningOpen ? 'simple-popover' : undefined;\n  const handleWarningPopOverClose = () => {\n    setWarningPopAnchorEl(null);\n  };\n  const handleWarningPopOverClick = (event: React.MouseEvent<HTMLElement>) => {\n    setWarningPopAnchorEl(event.currentTarget);\n  };\n\n  /**\n   * Sync workflow to sync a chaos workflow\n   */\n  const [syncWorkflow] = useMutation(SYNC_WORKFLOW, {\n    onCompleted: (data) => {\n      if (data.syncWorkflow) {\n        handleWarningPopOverClose();\n        refetchQuery();\n      }\n    },\n  });\n\n  /**\n   * Delete workflow mutation to delete a chaos workflow\n   */\n  const [deleteWorkflow] = useMutation(DELETE_WORKFLOW, {\n    onCompleted: (data) => {\n      if (data.deleteChaosWorkflow) {\n        handleWarningPopOverClose();\n        refetchQuery();\n      }\n    },\n  });\n\n  function getResiliencyScoreColor(score: number) {\n    if (score < 39) {\n      return classes.less;\n    }\n    if (score > 40 && score < 79) {\n      return classes.medium;\n    }\n    return classes.high;\n  }\n\n  // Function to find the time different in minutes\n  const timeDiff = (currentTime: number, lastUpdated: string) => {\n    const current = currentTime;\n    const last = parseInt(lastUpdated, 10) * 1000;\n    const timeDifference = (current - last) / (60 * 1000);\n    return timeDifference;\n  };\n\n  const getVariant = (variant: string | undefined) => {\n    switch (variant) {\n      case 'succeeded':\n        return 'success';\n      case 'failed':\n        return 'danger';\n      case 'running':\n        return 'warning';\n      default:\n        return undefined;\n    }\n  };\n\n  return (\n    <>\n      {/* Table cell for warning (if the workflow is in running state from 20 mins) */}\n      <TableCell className={classes.warningTableCell}>\n        {timeDiff(new Date().getTime(), data.last_updated ?? '') >= 20 &&\n        data.phase?.toLowerCase() === 'running' ? (\n          <IconButton onClick={handleWarningPopOverClick}>\n            <img src=\"./icons/warning.svg\" alt=\"warning\" width=\"20\" />\n          </IconButton>\n        ) : (\n          <></>\n        )}\n        {/* Warning PopOver */}\n        <Popover\n          id={idWarning}\n          open={isWarningOpen}\n          anchorEl={popWarningAnchorEl}\n          onClose={handleWarningPopOverClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n        >\n          <div className={classes.popoverWarning}>\n            <Typography>\n              {t('chaosWorkflows.browseWorkflows.wfIssue')}\n            </Typography>\n            <div className={classes.imageRunning}>\n              <img\n                src=\"/icons/running.svg\"\n                alt=\"running\"\n                className={classes.runningSmallIcon}\n              />{' '}\n              <Typography className={classes.runningText}>\n                {t('chaosWorkflows.browseWorkflows.runningFrom')}{' '}\n                {Math.round(\n                  timeDiff(new Date().getTime(), data.last_updated ?? '')\n                )}{' '}\n                {t('chaosWorkflows.browseWorkflows.min')}\n              </Typography>\n            </div>\n            {/* Buttons to sync and terminate the workflow */}\n            <div className={classes.warningBtnDiv}>\n              <ButtonFilled\n                className={classes.syncBtn}\n                onClick={() => {\n                  syncWorkflow({\n                    variables: {\n                      workflowid: data.workflow_id,\n                      workflow_run_id: data.workflow_run_id,\n                    },\n                  });\n                }}\n              >\n                <img src=\"./icons/sync-wf.svg\" alt=\"sync\" />\n                <Typography className={classes.waitingBtnText}>\n                  {t('chaosWorkflows.browseWorkflows.sync')}\n                </Typography>\n              </ButtonFilled>\n              <ButtonFilled\n                onClick={() => {\n                  deleteWorkflow({\n                    variables: {\n                      workflowid: data.workflow_id,\n                      workflow_run_id: data.workflow_run_id,\n                    },\n                  });\n                }}\n                className={classes.terminateText}\n              >\n                <img src=\"./icons/terminate-wf.svg\" alt=\"terminate\" />\n                <Typography className={classes.waitingBtnText}>\n                  {t('chaosWorkflows.browseWorkflows.terminate')}\n                </Typography>\n              </ButtonFilled>\n            </div>\n          </div>\n        </Popover>\n      </TableCell>\n      <TableCell>\n        <LightPills\n          variant={getVariant(data.phase?.toLowerCase())}\n          label={data.phase ?? ''}\n        />\n      </TableCell>\n      <TableCell\n        className={classes.workflowNameData}\n        style={{ cursor: 'pointer' }}\n        onClick={() => {\n          nodeSelection.selectNode({\n            pod_name: '',\n          });\n          if (data.phase?.toLowerCase() !== 'notavailable')\n            history.push({\n              pathname: `/workflows/${data.workflow_run_id}`,\n              search: `?projectID=${projectID}&projectRole=${projectRole}`,\n            });\n        }}\n      >\n        <Typography className={classes.boldText} data-cy=\"workflowName\">\n          {data.workflow_name}\n        </Typography>\n      </TableCell>\n      <TableCell>\n        <Typography className={classes.clusterName}>\n          {nameCapitalized(data.cluster_name ?? '')}\n        </Typography>\n      </TableCell>\n      <TableCell className={classes.reliabiltyData}>\n        <Typography>\n          <span>{t('chaosWorkflows.browseWorkflows.tableData.overallRR')}</span>\n          {data.resiliency_score === undefined ||\n          data.resiliency_score === null ? (\n            <span className={classes.less}>\n              {t('chaosWorkflows.browseWorkflows.tableData.na')}\n            </span>\n          ) : (\n            <span\n              className={`${classes.boldText} ${getResiliencyScoreColor(\n                data.resiliency_score\n              )}`}\n            >\n              {data.resiliency_score}%\n            </span>\n          )}\n        </Typography>\n        <Typography>\n          <span>\n            {t('chaosWorkflows.browseWorkflows.tableData.experimentsPassed')}\n          </span>\n          {data.experiments_passed === undefined ||\n          data.experiments_passed === null ||\n          data.total_experiments === undefined ||\n          data.total_experiments === null ||\n          data.resiliency_score === undefined ||\n          data.resiliency_score === null ? (\n            <span className={classes.less}>\n              {t('chaosWorkflows.browseWorkflows.tableData.na')}\n            </span>\n          ) : (\n            <span\n              className={`${classes.boldText} ${getResiliencyScoreColor(\n                data.resiliency_score\n              )}`}\n            >\n              {data.experiments_passed}/{data.total_experiments}\n            </span>\n          )}\n        </Typography>\n      </TableCell>\n      <TableCell>\n        <div>\n          <Button\n            onClick={handlePopOverClick}\n            className={classes.buttonTransform}\n          >\n            <Typography className={classes.boldText}>\n              {t('chaosWorkflows.browseWorkflows.tableData.showExperiments')}(\n              {\n                scheduledWorkflowData?.ListWorkflow.workflows[0].weightages\n                  .length\n              }\n              )\n            </Typography>\n            <div className={classes.experimentDetails}>\n              {isOpen ? (\n                <KeyboardArrowDownIcon className={classes.arrowMargin} />\n              ) : (\n                <ChevronRightIcon className={classes.arrowMargin} />\n              )}\n            </div>\n          </Button>\n          <Popover\n            id={id}\n            open={isOpen}\n            anchorEl={popAnchorEl}\n            onClose={handlePopOverClose}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center',\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'center',\n            }}\n          >\n            <div className={classes.popover}>\n              {scheduledWorkflowData?.ListWorkflow.workflows[0].weightages.map(\n                (weightEntry) => (\n                  <div\n                    key={weightEntry.experiment_name}\n                    style={{ marginBottom: 8 }}\n                  >\n                    <ExperimentPoints\n                      expName={weightEntry.experiment_name}\n                      weight={weightEntry.weightage}\n                    />\n                  </div>\n                )\n              )}\n            </div>\n          </Popover>\n        </div>\n      </TableCell>\n      <TableCell>\n        <TimePopOver unixTime={data.last_updated ?? ''} />\n      </TableCell>\n      <TableCell>\n        <IconButton\n          aria-label=\"more\"\n          aria-controls=\"long-menu\"\n          aria-haspopup=\"true\"\n          onClick={handleClick}\n          className={classes.optionBtn}\n          data-cy=\"browseWorkflowOptions\"\n        >\n          <MoreVertIcon />\n        </IconButton>\n        <Menu\n          id=\"long-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n        >\n          <MenuItem\n            value=\"Workflow\"\n            onClick={() => {\n              nodeSelection.selectNode({\n                pod_name: '',\n              });\n              if (data.phase?.toLowerCase() !== 'notavailable')\n                history.push({\n                  pathname: `/workflows/${data.workflow_run_id}`,\n                  search: `?projectID=${projectID}&projectRole=${projectRole}`,\n                });\n            }}\n          >\n            <div className={classes.expDiv} data-cy=\"workflowDetails\">\n              <img\n                src=\"/icons/show-workflow.svg\"\n                alt=\"Display Workflow\"\n                className={classes.btnImg}\n              />\n              <Typography className={classes.btnText}>\n                {t('chaosWorkflows.browseWorkflows.tableData.showTheWorkflow')}\n              </Typography>\n            </div>\n          </MenuItem>\n          <MenuItem\n            value=\"Analysis\"\n            onClick={() => {\n              if (data.phase?.toLowerCase() !== 'notavailable')\n                history.push({\n                  pathname: `/workflows/analytics/${data.workflow_id}`,\n                  search: `?projectID=${projectID}&projectRole=${projectRole}`,\n                });\n            }}\n          >\n            <div className={classes.expDiv} data-cy=\"workflowAnalytics\">\n              <img\n                src=\"/icons/show-analytics.svg\"\n                alt=\"Display Analytics\"\n                className={classes.btnImg}\n              />\n              <Typography className={classes.btnText}>\n                {t('chaosWorkflows.browseWorkflows.tableData.showTheAnalytics')}\n              </Typography>\n            </div>\n          </MenuItem>\n          {/* <MenuItem value=\"Scheduler\" onClick={handleMenu}>\n            Show the scheduler\n          </MenuItem> */}\n        </Menu>\n      </TableCell>\n    </>\n  );\n};\nexport default TableData;\n"]},"metadata":{},"sourceType":"module"}