{"ast":null,"code":"import _objectSpread from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Snackbar from'@material-ui/core/Snackbar';import Typography from'@material-ui/core/Typography';import MuiAlert from'@material-ui/lab/Alert';import{ButtonFilled,ButtonOutlined}from'litmus-ui';import React,{useEffect,useRef}from'react';import{useTranslation}from'react-i18next';import{useSelector}from'react-redux';import{LitmusStepper}from'../../../../components/LitmusStepper';import Loader from'../../../../components/Loader';import Row from'../../../../containers/layouts/Row';import useActions from'../../../../redux/actions';import*as AlertActions from'../../../../redux/actions/alert';import{getProjectRole}from'../../../../utils/getSearchParams';import ChooseADashboardType from'../Steps/ChooseADashboardType';import ConfigureDashboardMetadata from'../Steps/ConfigureDashboardMetadata';import SelectTheMetrics from'../Steps/SelectTheMetrics';import TuneTheQueries from'../Steps/TuneTheQueries';import useStyles from'./styles';function Alert(props){return/*#__PURE__*/React.createElement(MuiAlert,Object.assign({elevation:6,variant:\"filled\"},props));}var DashboardStepper=function DashboardStepper(_ref){var _existingDashboardVar,_existingDashboardVar2,_existingDashboardVar3,_existingDashboardVar4,_existingDashboardVar5,_existingDashboardVar6,_existingDashboardVar7,_existingDashboardVar8,_existingDashboardVar9,_existingDashboardVar10,_existingDashboardVar11,_existingDashboardVar12,_existingDashboardVar13,_existingDashboardVar14;var configure=_ref.configure,activePanelID=_ref.activePanelID,existingDashboardVars=_ref.existingDashboardVars,dataSourceList=_ref.dataSourceList;var classes=useStyles();var _useTranslation=useTranslation(),t=_useTranslation.t;var stepsArray=[\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step1')),\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step2')),\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step3')),\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step4'))];var childRef=useRef();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState(configure&&activePanelID!==''?1:0),_React$useState4=_slicedToArray(_React$useState3,2),activeStep=_React$useState4[0],setActiveStep=_React$useState4[1];var _React$useState5=React.useState({id:!configure?'':(_existingDashboardVar=existingDashboardVars.id)!==null&&_existingDashboardVar!==void 0?_existingDashboardVar:'',name:!configure?'':(_existingDashboardVar2=existingDashboardVars.name)!==null&&_existingDashboardVar2!==void 0?_existingDashboardVar2:'',dashboardTypeID:!configure?'':(_existingDashboardVar3=existingDashboardVars.dashboardTypeID)!==null&&_existingDashboardVar3!==void 0?_existingDashboardVar3:'',dashboardTypeName:!configure?'':(_existingDashboardVar4=existingDashboardVars.dashboardTypeName)!==null&&_existingDashboardVar4!==void 0?_existingDashboardVar4:'',dataSourceType:!configure?'':(_existingDashboardVar5=existingDashboardVars.dataSourceType)!==null&&_existingDashboardVar5!==void 0?_existingDashboardVar5:'',dataSourceID:!configure?dataSourceList.length!==0?dataSourceList[0].ds_id:'':(_existingDashboardVar6=existingDashboardVars.dataSourceID)!==null&&_existingDashboardVar6!==void 0?_existingDashboardVar6:'',dataSourceURL:!configure?dataSourceList.length!==0?dataSourceList[0].ds_url:'':(_existingDashboardVar7=existingDashboardVars.dataSourceURL)!==null&&_existingDashboardVar7!==void 0?_existingDashboardVar7:'',chaosEventQueryTemplate:!configure?'':(_existingDashboardVar8=existingDashboardVars.chaosEventQueryTemplate)!==null&&_existingDashboardVar8!==void 0?_existingDashboardVar8:'',chaosVerdictQueryTemplate:!configure?'':(_existingDashboardVar9=existingDashboardVars.chaosVerdictQueryTemplate)!==null&&_existingDashboardVar9!==void 0?_existingDashboardVar9:'',agentID:!configure?'':(_existingDashboardVar10=existingDashboardVars.agentID)!==null&&_existingDashboardVar10!==void 0?_existingDashboardVar10:'',information:!configure?'':(_existingDashboardVar11=existingDashboardVars.information)!==null&&_existingDashboardVar11!==void 0?_existingDashboardVar11:'',panelGroupMap:!configure?[]:(_existingDashboardVar12=existingDashboardVars.panelGroupMap)!==null&&_existingDashboardVar12!==void 0?_existingDashboardVar12:[],panelGroups:!configure?[]:(_existingDashboardVar13=existingDashboardVars.panelGroups)!==null&&_existingDashboardVar13!==void 0?_existingDashboardVar13:[],selectedPanelGroupMap:[],applicationMetadataMap:!configure?[]:(_existingDashboardVar14=existingDashboardVars.applicationMetadataMap)!==null&&_existingDashboardVar14!==void 0?_existingDashboardVar14:[]}),_React$useState6=_slicedToArray(_React$useState5,2),dashboardVars=_React$useState6[0],setDashboardVars=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),disabledNext=_React$useState8[0],_setDisabledNext=_React$useState8[1];var steps=stepsArray;if(configure){steps=steps.filter(function(step){return step!==\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step1'))&&step!==\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step3'));});}else if(dashboardVars.dashboardTypeID==='custom'){steps=steps.filter(function(step){return step!==\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.steps.step3'));});}// Checks if the button is in loading state or not\nvar isButtonLoading=function isButtonLoading(status){return setLoading(status);};var _handleNext=function handleNext(){if(childRef.current&&childRef.current.onNext()){setActiveStep(function(prevActiveStep){return prevActiveStep+1;});}};function getStepContent(stepIndex,childRef){switch(stepIndex){case!configure?0:-1:return/*#__PURE__*/React.createElement(ChooseADashboardType,{ref:childRef,handleNext:_handleNext});case!configure?1:0:return/*#__PURE__*/React.createElement(ConfigureDashboardMetadata,{ref:childRef,configure:configure,dashboardVars:dashboardVars,dataSourceList:dataSourceList,handleMetadataUpdate:function handleMetadataUpdate(dashboardMetadata){var _dashboardMetadata$id,_dashboardMetadata$na,_dashboardMetadata$da,_dashboardMetadata$da2,_dashboardMetadata$da3,_dashboardMetadata$da4,_dashboardMetadata$da5,_dashboardMetadata$ch,_dashboardMetadata$ch2,_dashboardMetadata$ag,_dashboardMetadata$in,_dashboardMetadata$pa,_dashboardMetadata$pa2,_dashboardMetadata$ap;setDashboardVars(_objectSpread(_objectSpread({},dashboardVars),{},{id:(_dashboardMetadata$id=dashboardMetadata.id)!==null&&_dashboardMetadata$id!==void 0?_dashboardMetadata$id:'',name:(_dashboardMetadata$na=dashboardMetadata.name)!==null&&_dashboardMetadata$na!==void 0?_dashboardMetadata$na:'',dashboardTypeID:(_dashboardMetadata$da=dashboardMetadata.dashboardTypeID)!==null&&_dashboardMetadata$da!==void 0?_dashboardMetadata$da:'',dashboardTypeName:(_dashboardMetadata$da2=dashboardMetadata.dashboardTypeName)!==null&&_dashboardMetadata$da2!==void 0?_dashboardMetadata$da2:'',dataSourceType:(_dashboardMetadata$da3=dashboardMetadata.dataSourceType)!==null&&_dashboardMetadata$da3!==void 0?_dashboardMetadata$da3:'',dataSourceID:(_dashboardMetadata$da4=dashboardMetadata.dataSourceID)!==null&&_dashboardMetadata$da4!==void 0?_dashboardMetadata$da4:'',dataSourceURL:(_dashboardMetadata$da5=dashboardMetadata.dataSourceURL)!==null&&_dashboardMetadata$da5!==void 0?_dashboardMetadata$da5:'',chaosEventQueryTemplate:(_dashboardMetadata$ch=dashboardMetadata.chaosEventQueryTemplate)!==null&&_dashboardMetadata$ch!==void 0?_dashboardMetadata$ch:'',chaosVerdictQueryTemplate:(_dashboardMetadata$ch2=dashboardMetadata.chaosVerdictQueryTemplate)!==null&&_dashboardMetadata$ch2!==void 0?_dashboardMetadata$ch2:'',agentID:(_dashboardMetadata$ag=dashboardMetadata.agentID)!==null&&_dashboardMetadata$ag!==void 0?_dashboardMetadata$ag:'',information:(_dashboardMetadata$in=dashboardMetadata.information)!==null&&_dashboardMetadata$in!==void 0?_dashboardMetadata$in:'',panelGroupMap:(_dashboardMetadata$pa=dashboardMetadata.panelGroupMap)!==null&&_dashboardMetadata$pa!==void 0?_dashboardMetadata$pa:[],panelGroups:(_dashboardMetadata$pa2=dashboardMetadata.panelGroups)!==null&&_dashboardMetadata$pa2!==void 0?_dashboardMetadata$pa2:[],applicationMetadataMap:(_dashboardMetadata$ap=dashboardMetadata.applicationMetadataMap)!==null&&_dashboardMetadata$ap!==void 0?_dashboardMetadata$ap:[]}));},setDisabledNext:function setDisabledNext(next){_setDisabledNext(next);}});case!configure?dashboardVars.dashboardTypeID!=='custom'?2:-1:-1:return/*#__PURE__*/React.createElement(SelectTheMetrics,{ref:childRef,dashboardVars:dashboardVars,handleMetricsUpdate:function handleMetricsUpdate(dashboardMetrics){var _dashboardMetrics$sel;setDashboardVars(_objectSpread(_objectSpread({},dashboardVars),{},{selectedPanelGroupMap:(_dashboardMetrics$sel=dashboardMetrics.selectedPanelGroupMap)!==null&&_dashboardMetrics$sel!==void 0?_dashboardMetrics$sel:[]}));},setDisabledNext:function setDisabledNext(next){_setDisabledNext(next);}});case!configure?dashboardVars.dashboardTypeID!=='custom'?3:2:1:return/*#__PURE__*/React.createElement(TuneTheQueries,{ref:childRef,configure:configure,isLoading:isButtonLoading,activeEditPanelID:activePanelID,dashboardVars:dashboardVars});default:return/*#__PURE__*/React.createElement(ChooseADashboardType,{ref:childRef,handleNext:_handleNext});}}var isAlertOpen=useSelector(function(state){return state.alert.isAlertOpen;});var alert=useActions(AlertActions);var handleBack=function handleBack(){if(activeStep===1&&!configure){setDashboardVars({id:'',name:'',dashboardTypeID:'',dashboardTypeName:'',dataSourceType:'',dataSourceID:'',dataSourceURL:'',chaosEventQueryTemplate:'',chaosVerdictQueryTemplate:'',agentID:'',information:'',panelGroupMap:[],panelGroups:[],selectedPanelGroupMap:[],applicationMetadataMap:[]});}setActiveStep(function(prevActiveStep){return prevActiveStep-1;});};/** \n    Control Buttons\n    ------------------------------------------------------------------------------\n    When active step is zero (First Step) there won't be a Back button\n    When active step is the last step in the stepper the button will change to Finish\n    All steps in the middle will have next and back buttons\n  * */var ControlButton=function ControlButton(){return/*#__PURE__*/React.createElement(React.Fragment,null,activeStep===steps.length-1?/*#__PURE__*/ // Show Save changes button at Bottom for Last Step\nReact.createElement(\"div\",{className:classes.headerButtonWrapper,\"aria-label\":\"buttons\",style:{width:'fit-content'}},!loading&&/*#__PURE__*/React.createElement(ButtonOutlined,{onClick:function onClick(){return handleBack();},style:{marginRight:'1rem'}},/*#__PURE__*/React.createElement(Typography,null,t('analyticsDashboard.applicationDashboards.stepper.buttons.back'))),/*#__PURE__*/React.createElement(ButtonFilled,{disabled:loading,onClick:function onClick(){return _handleNext();}},!loading&&/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/save-changes.svg\",alt:\"Info icon\",className:classes.icon}),/*#__PURE__*/React.createElement(Typography,{className:classes.buttonText},!loading?\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.saveChanges')):configure?\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.status.updating')):\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.status.creating'))),loading&&/*#__PURE__*/React.createElement(Loader,{size:20}))):activeStep!==0&&!configure||activeStep===0&&configure?/*#__PURE__*/ // Apply headerButtonWrapper style for top button's div\nReact.createElement(\"div\",{className:classes.headerButtonWrapper,\"aria-label\":\"buttons\"},!(activeStep===0&&configure)&&/*#__PURE__*/React.createElement(ButtonOutlined,{onClick:function onClick(){return handleBack();},style:{marginRight:'1rem'}},/*#__PURE__*/React.createElement(Typography,null,t('analyticsDashboard.applicationDashboards.stepper.buttons.back'))),/*#__PURE__*/React.createElement(ButtonFilled,{onClick:function onClick(){return _handleNext();},disabled:disabledNext},/*#__PURE__*/React.createElement(Typography,null,t('analyticsDashboard.applicationDashboards.stepper.buttons.next')))):/*#__PURE__*/React.createElement(React.Fragment,null));};/** \n    Alert\n    ------------------------------------------------------------------------------\n    Displays a snackbar with the appropriate message whenever a condition is not satisfied\n  * */var AlertBox=function AlertBox(_ref2){var message=_ref2.message;return/*#__PURE__*/React.createElement(\"div\",null,isAlertOpen?/*#__PURE__*/React.createElement(Snackbar,{open:isAlertOpen,autoHideDuration:6000,onClose:function onClose(){return alert.changeAlertState(false);}},/*#__PURE__*/React.createElement(Alert,{onClose:function onClose(){return alert.changeAlertState(false);},severity:\"error\"},message)):/*#__PURE__*/React.createElement(React.Fragment,null));};function getAlertMessage(stepNumber){switch(stepNumber){case!configure?0:-1:if(getProjectRole()==='Viewer'){return t('analyticsDashboard.applicationDashboards.stepper.errors.step1.messageViewer');}return t('analyticsDashboard.applicationDashboards.stepper.errors.step1.message');case!configure?1:0:return t('analyticsDashboard.applicationDashboards.stepper.errors.step2.messageViewer');case!configure?dashboardVars.dashboardTypeID!=='custom'?2:-1:-1:return t('analyticsDashboard.applicationDashboards.stepper.errors.step3.message');case!configure?dashboardVars.dashboardTypeID!=='custom'?3:2:1:return configure?t('analyticsDashboard.applicationDashboards.stepper.errors.step4.messageConfigure'):t('analyticsDashboard.applicationDashboards.stepper.errors.step4.messageCreate');default:return'';}}useEffect(function(){if(configure){setDashboardVars(_objectSpread({},existingDashboardVars));}},[existingDashboardVars]);return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(AlertBox,{message:getAlertMessage(activeStep)}),/*#__PURE__*/React.createElement(\"div\",{className:classes.headWrapper},/*#__PURE__*/React.createElement(Row,{justifyContent:\"space-between\"},/*#__PURE__*/React.createElement(Typography,{className:classes.header},!configure?t('analyticsDashboard.applicationDashboards.createHeader'):\"\".concat(t('analyticsDashboard.applicationDashboards.configureHeader'),\" / \").concat(dashboardVars.name)),/*#__PURE__*/React.createElement(ControlButton,null))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(LitmusStepper,{steps:steps,activeStep:activeStep,handleBack:handleBack,loader:loading,hideNext:!configure?!activeStep:false,disableNext:configure&&activeStep===steps.length-1?loading:disabledNext,handleNext:function handleNext(){return _handleNext();},finishAction:function finishAction(){},finishButtonText:/*#__PURE__*/React.createElement(React.Fragment,null,!loading&&/*#__PURE__*/React.createElement(\"img\",{src:\"/icons/save-changes.svg\",alt:\"Info icon\",className:classes.icon}),/*#__PURE__*/React.createElement(Typography,null,!loading?\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.saveChanges')):configure?\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.status.updating')):\"\".concat(t('analyticsDashboard.applicationDashboards.stepper.buttons.status.creating'))))},getStepContent(activeStep,childRef)));};export default DashboardStepper;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Analytics/ApplicationDashboards/Stepper/index.tsx"],"names":["Snackbar","Typography","MuiAlert","ButtonFilled","ButtonOutlined","React","useEffect","useRef","useTranslation","useSelector","LitmusStepper","Loader","Row","useActions","AlertActions","getProjectRole","ChooseADashboardType","ConfigureDashboardMetadata","SelectTheMetrics","TuneTheQueries","useStyles","Alert","props","DashboardStepper","configure","activePanelID","existingDashboardVars","dataSourceList","classes","t","stepsArray","childRef","useState","loading","setLoading","activeStep","setActiveStep","id","name","dashboardTypeID","dashboardTypeName","dataSourceType","dataSourceID","length","ds_id","dataSourceURL","ds_url","chaosEventQueryTemplate","chaosVerdictQueryTemplate","agentID","information","panelGroupMap","panelGroups","selectedPanelGroupMap","applicationMetadataMap","dashboardVars","setDashboardVars","disabledNext","setDisabledNext","steps","filter","step","isButtonLoading","status","handleNext","current","onNext","prevActiveStep","getStepContent","stepIndex","dashboardMetadata","next","dashboardMetrics","isAlertOpen","state","alert","handleBack","ControlButton","headerButtonWrapper","width","marginRight","icon","buttonText","AlertBox","message","changeAlertState","getAlertMessage","stepNumber","root","headWrapper","header"],"mappings":"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","sourcesContent":["import Snackbar from '@material-ui/core/Snackbar';\nimport Typography from '@material-ui/core/Typography';\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\nimport { ButtonFilled, ButtonOutlined } from 'litmus-ui';\nimport React, { useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport { LitmusStepper } from '../../../../components/LitmusStepper';\nimport Loader from '../../../../components/Loader';\nimport Row from '../../../../containers/layouts/Row';\nimport { DashboardDetails } from '../../../../models/dashboardsData';\nimport { ListDataSourceResponse } from '../../../../models/graphql/dataSourceDetails';\nimport useActions from '../../../../redux/actions';\nimport * as AlertActions from '../../../../redux/actions/alert';\nimport { RootState } from '../../../../redux/reducers';\nimport { getProjectRole } from '../../../../utils/getSearchParams';\nimport ChooseADashboardType from '../Steps/ChooseADashboardType';\nimport ConfigureDashboardMetadata from '../Steps/ConfigureDashboardMetadata';\nimport SelectTheMetrics from '../Steps/SelectTheMetrics';\nimport TuneTheQueries from '../Steps/TuneTheQueries';\nimport useStyles from './styles';\n\ninterface ChildRef {\n  onNext: () => void;\n}\n\ninterface AlertBoxProps {\n  message: string;\n}\n\nfunction Alert(props: AlertProps) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\ninterface DashboardStepperProps {\n  configure: boolean;\n  activePanelID: string;\n  existingDashboardVars: DashboardDetails;\n  dataSourceList: ListDataSourceResponse[];\n}\n\nconst DashboardStepper: React.FC<DashboardStepperProps> = ({\n  configure,\n  activePanelID,\n  existingDashboardVars,\n  dataSourceList,\n}) => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const stepsArray: string[] = [\n    `${t('analyticsDashboard.applicationDashboards.stepper.steps.step1')}`,\n    `${t('analyticsDashboard.applicationDashboards.stepper.steps.step2')}`,\n    `${t('analyticsDashboard.applicationDashboards.stepper.steps.step3')}`,\n    `${t('analyticsDashboard.applicationDashboards.stepper.steps.step4')}`,\n  ];\n  const childRef = useRef<ChildRef>();\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const [activeStep, setActiveStep] = React.useState<number>(\n    configure && activePanelID !== '' ? 1 : 0\n  );\n  const [dashboardVars, setDashboardVars] = React.useState<DashboardDetails>({\n    id: !configure ? '' : existingDashboardVars.id ?? '',\n    name: !configure ? '' : existingDashboardVars.name ?? '',\n    dashboardTypeID: !configure\n      ? ''\n      : existingDashboardVars.dashboardTypeID ?? '',\n    dashboardTypeName: !configure\n      ? ''\n      : existingDashboardVars.dashboardTypeName ?? '',\n    dataSourceType: !configure\n      ? ''\n      : existingDashboardVars.dataSourceType ?? '',\n    dataSourceID: !configure\n      ? dataSourceList.length !== 0\n        ? dataSourceList[0].ds_id\n        : ''\n      : existingDashboardVars.dataSourceID ?? '',\n    dataSourceURL: !configure\n      ? dataSourceList.length !== 0\n        ? dataSourceList[0].ds_url\n        : ''\n      : existingDashboardVars.dataSourceURL ?? '',\n    chaosEventQueryTemplate: !configure\n      ? ''\n      : existingDashboardVars.chaosEventQueryTemplate ?? '',\n    chaosVerdictQueryTemplate: !configure\n      ? ''\n      : existingDashboardVars.chaosVerdictQueryTemplate ?? '',\n    agentID: !configure ? '' : existingDashboardVars.agentID ?? '',\n    information: !configure ? '' : existingDashboardVars.information ?? '',\n    panelGroupMap: !configure ? [] : existingDashboardVars.panelGroupMap ?? [],\n    panelGroups: !configure ? [] : existingDashboardVars.panelGroups ?? [],\n    selectedPanelGroupMap: [],\n    applicationMetadataMap: !configure\n      ? []\n      : existingDashboardVars.applicationMetadataMap ?? [],\n  });\n  const [disabledNext, setDisabledNext] = React.useState<boolean>(true);\n  let steps = stepsArray;\n  if (configure) {\n    steps = steps.filter(\n      (step: string) =>\n        step !==\n          `${t(\n            'analyticsDashboard.applicationDashboards.stepper.steps.step1'\n          )}` &&\n        step !==\n          `${t('analyticsDashboard.applicationDashboards.stepper.steps.step3')}`\n    );\n  } else if (dashboardVars.dashboardTypeID === 'custom') {\n    steps = steps.filter(\n      (step: string) =>\n        step !==\n        `${t('analyticsDashboard.applicationDashboards.stepper.steps.step3')}`\n    );\n  }\n  // Checks if the button is in loading state or not\n  const isButtonLoading = (status: boolean) => setLoading(status);\n  const handleNext = () => {\n    if (childRef.current && childRef.current.onNext()) {\n      setActiveStep((prevActiveStep) => prevActiveStep + 1);\n    }\n  };\n  function getStepContent(\n    stepIndex: number,\n    childRef: React.MutableRefObject<ChildRef | undefined>\n  ): React.ReactNode {\n    switch (stepIndex) {\n      case !configure ? 0 : -1:\n        return <ChooseADashboardType ref={childRef} handleNext={handleNext} />;\n      case !configure ? 1 : 0:\n        return (\n          <ConfigureDashboardMetadata\n            ref={childRef}\n            configure={configure}\n            dashboardVars={dashboardVars}\n            dataSourceList={dataSourceList}\n            handleMetadataUpdate={(dashboardMetadata: DashboardDetails) => {\n              setDashboardVars({\n                ...dashboardVars,\n                id: dashboardMetadata.id ?? '',\n                name: dashboardMetadata.name ?? '',\n                dashboardTypeID: dashboardMetadata.dashboardTypeID ?? '',\n                dashboardTypeName: dashboardMetadata.dashboardTypeName ?? '',\n                dataSourceType: dashboardMetadata.dataSourceType ?? '',\n                dataSourceID: dashboardMetadata.dataSourceID ?? '',\n                dataSourceURL: dashboardMetadata.dataSourceURL ?? '',\n                chaosEventQueryTemplate:\n                  dashboardMetadata.chaosEventQueryTemplate ?? '',\n                chaosVerdictQueryTemplate:\n                  dashboardMetadata.chaosVerdictQueryTemplate ?? '',\n                agentID: dashboardMetadata.agentID ?? '',\n                information: dashboardMetadata.information ?? '',\n                panelGroupMap: dashboardMetadata.panelGroupMap ?? [],\n                panelGroups: dashboardMetadata.panelGroups ?? [],\n                applicationMetadataMap:\n                  dashboardMetadata.applicationMetadataMap ?? [],\n              });\n            }}\n            setDisabledNext={(next: boolean) => {\n              setDisabledNext(next);\n            }}\n          />\n        );\n      case !configure\n        ? dashboardVars.dashboardTypeID !== 'custom'\n          ? 2\n          : -1\n        : -1:\n        return (\n          <SelectTheMetrics\n            ref={childRef}\n            dashboardVars={dashboardVars}\n            handleMetricsUpdate={(dashboardMetrics: DashboardDetails) => {\n              setDashboardVars({\n                ...dashboardVars,\n                selectedPanelGroupMap:\n                  dashboardMetrics.selectedPanelGroupMap ?? [],\n              });\n            }}\n            setDisabledNext={(next: boolean) => {\n              setDisabledNext(next);\n            }}\n          />\n        );\n      case !configure\n        ? dashboardVars.dashboardTypeID !== 'custom'\n          ? 3\n          : 2\n        : 1:\n        return (\n          <TuneTheQueries\n            ref={childRef}\n            configure={configure}\n            isLoading={isButtonLoading}\n            activeEditPanelID={activePanelID}\n            dashboardVars={dashboardVars}\n          />\n        );\n      default:\n        return <ChooseADashboardType ref={childRef} handleNext={handleNext} />;\n    }\n  }\n\n  const isAlertOpen = useSelector(\n    (state: RootState) => state.alert.isAlertOpen\n  );\n  const alert = useActions(AlertActions);\n  const handleBack = () => {\n    if (activeStep === 1 && !configure) {\n      setDashboardVars({\n        id: '',\n        name: '',\n        dashboardTypeID: '',\n        dashboardTypeName: '',\n        dataSourceType: '',\n        dataSourceID: '',\n        dataSourceURL: '',\n        chaosEventQueryTemplate: '',\n        chaosVerdictQueryTemplate: '',\n        agentID: '',\n        information: '',\n        panelGroupMap: [],\n        panelGroups: [],\n        selectedPanelGroupMap: [],\n        applicationMetadataMap: [],\n      });\n    }\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\n  };\n\n  /** \n    Control Buttons\n    ------------------------------------------------------------------------------\n    When active step is zero (First Step) there won't be a Back button\n    When active step is the last step in the stepper the button will change to Finish\n    All steps in the middle will have next and back buttons\n  * */\n\n  const ControlButton: React.FC = () => {\n    return (\n      <>\n        {activeStep === steps.length - 1 ? ( // Show Save changes button at Bottom for Last Step\n          <div\n            className={classes.headerButtonWrapper}\n            aria-label=\"buttons\"\n            style={{ width: 'fit-content' }}\n          >\n            {!loading && (\n              <ButtonOutlined\n                onClick={() => handleBack()}\n                style={{ marginRight: '1rem' }}\n              >\n                <Typography>\n                  {t(\n                    'analyticsDashboard.applicationDashboards.stepper.buttons.back'\n                  )}\n                </Typography>\n              </ButtonOutlined>\n            )}\n            <ButtonFilled disabled={loading} onClick={() => handleNext()}>\n              {!loading && (\n                <img\n                  src=\"/icons/save-changes.svg\"\n                  alt=\"Info icon\"\n                  className={classes.icon}\n                />\n              )}\n              <Typography className={classes.buttonText}>\n                {!loading\n                  ? `${t(\n                      'analyticsDashboard.applicationDashboards.stepper.buttons.saveChanges'\n                    )}`\n                  : configure\n                  ? `${t(\n                      'analyticsDashboard.applicationDashboards.stepper.buttons.status.updating'\n                    )}`\n                  : `${t(\n                      'analyticsDashboard.applicationDashboards.stepper.buttons.status.creating'\n                    )}`}\n              </Typography>\n              {loading && <Loader size={20} />}\n            </ButtonFilled>\n          </div>\n        ) : (activeStep !== 0 && !configure) ||\n          (activeStep === 0 && configure) ? ( // Apply headerButtonWrapper style for top button's div\n          <div className={classes.headerButtonWrapper} aria-label=\"buttons\">\n            {!(activeStep === 0 && configure) && (\n              <ButtonOutlined\n                onClick={() => handleBack()}\n                style={{ marginRight: '1rem' }}\n              >\n                <Typography>\n                  {t(\n                    'analyticsDashboard.applicationDashboards.stepper.buttons.back'\n                  )}\n                </Typography>\n              </ButtonOutlined>\n            )}\n            <ButtonFilled onClick={() => handleNext()} disabled={disabledNext}>\n              <Typography>\n                {t(\n                  'analyticsDashboard.applicationDashboards.stepper.buttons.next'\n                )}\n              </Typography>\n            </ButtonFilled>\n          </div>\n        ) : (\n          <></>\n        )}\n      </>\n    );\n  };\n\n  /** \n    Alert\n    ------------------------------------------------------------------------------\n    Displays a snackbar with the appropriate message whenever a condition is not satisfied\n  * */\n\n  const AlertBox: React.FC<AlertBoxProps> = ({ message }) => {\n    return (\n      <div>\n        {isAlertOpen ? (\n          <Snackbar\n            open={isAlertOpen}\n            autoHideDuration={6000}\n            onClose={() => alert.changeAlertState(false)}\n          >\n            <Alert\n              onClose={() => alert.changeAlertState(false)}\n              severity=\"error\"\n            >\n              {message}\n            </Alert>\n          </Snackbar>\n        ) : (\n          <></>\n        )}\n      </div>\n    );\n  };\n\n  function getAlertMessage(stepNumber: number) {\n    switch (stepNumber) {\n      case !configure ? 0 : -1:\n        if (getProjectRole() === 'Viewer') {\n          return t(\n            'analyticsDashboard.applicationDashboards.stepper.errors.step1.messageViewer'\n          );\n        }\n        return t(\n          'analyticsDashboard.applicationDashboards.stepper.errors.step1.message'\n        );\n      case !configure ? 1 : 0:\n        return t(\n          'analyticsDashboard.applicationDashboards.stepper.errors.step2.messageViewer'\n        );\n      case !configure\n        ? dashboardVars.dashboardTypeID !== 'custom'\n          ? 2\n          : -1\n        : -1:\n        return t(\n          'analyticsDashboard.applicationDashboards.stepper.errors.step3.message'\n        );\n      case !configure\n        ? dashboardVars.dashboardTypeID !== 'custom'\n          ? 3\n          : 2\n        : 1:\n        return configure\n          ? t(\n              'analyticsDashboard.applicationDashboards.stepper.errors.step4.messageConfigure'\n            )\n          : t(\n              'analyticsDashboard.applicationDashboards.stepper.errors.step4.messageCreate'\n            );\n      default:\n        return '';\n    }\n  }\n\n  useEffect(() => {\n    if (configure) {\n      setDashboardVars({\n        ...existingDashboardVars,\n      });\n    }\n  }, [existingDashboardVars]);\n\n  return (\n    <div className={classes.root}>\n      {/* Alert */}\n      <AlertBox message={getAlertMessage(activeStep)} />\n\n      {/* Header */}\n      <div className={classes.headWrapper}>\n        <Row justifyContent=\"space-between\">\n          <Typography className={classes.header}>\n            {!configure\n              ? t('analyticsDashboard.applicationDashboards.createHeader')\n              : `${t(\n                  'analyticsDashboard.applicationDashboards.configureHeader'\n                )} / ${dashboardVars.name}`}\n          </Typography>\n          <ControlButton />\n        </Row>\n      </div>\n      <br />\n      {/* Stepper */}\n      <LitmusStepper\n        steps={steps}\n        activeStep={activeStep}\n        handleBack={handleBack}\n        loader={loading}\n        hideNext={!configure ? !activeStep : false}\n        disableNext={\n          configure && activeStep === steps.length - 1 ? loading : disabledNext\n        }\n        handleNext={() => handleNext()}\n        finishAction={() => {}}\n        finishButtonText={\n          <>\n            {!loading && (\n              <img\n                src=\"/icons/save-changes.svg\"\n                alt=\"Info icon\"\n                className={classes.icon}\n              />\n            )}\n            <Typography>\n              {!loading\n                ? `${t(\n                    'analyticsDashboard.applicationDashboards.stepper.buttons.saveChanges'\n                  )}`\n                : configure\n                ? `${t(\n                    'analyticsDashboard.applicationDashboards.stepper.buttons.status.updating'\n                  )}`\n                : `${t(\n                    'analyticsDashboard.applicationDashboards.stepper.buttons.status.creating'\n                  )}`}\n            </Typography>\n          </>\n        }\n      >\n        {getStepContent(activeStep, childRef)}\n      </LitmusStepper>\n    </div>\n  );\n};\n\nexport default DashboardStepper;\n"]},"metadata":{},"sourceType":"module"}