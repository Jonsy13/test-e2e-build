{"ast":null,"code":"import _toConsumableArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Settings/TeamingTab/Invitation/ReceivedInvitations/index.tsx\";\n\nimport { useMutation, useQuery } from '@apollo/client';\nimport { Avatar, Paper, Typography } from '@material-ui/core';\nimport { ButtonFilled, ButtonOutlined } from 'litmus-ui';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { ACCEPT_INVITE, ALL_USERS, DECLINE_INVITE, LIST_PROJECTS } from '../../../../../graphql';\nimport { getUserId } from '../../../../../utils/auth';\nimport { userInitials } from '../../../../../utils/userInitials';\nimport useStyles from './styles';\n\nvar ReceivedInvitations = function ReceivedInvitations() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t; // for response data\n\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      rows = _useState2[0],\n      setRows = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      allUsers = _useState4[0],\n      setAllUsers = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1]; // stores the user whose invitation is accepted/declined\n\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      acceptDecline = _useState8[0],\n      setAcceptDecline = _useState8[1];\n\n  var userID = getUserId(); // mutation to accept the invitation\n\n  var _useMutation = useMutation(ACCEPT_INVITE, {\n    onCompleted: function onCompleted() {\n      setRows(rows.filter(function (row) {\n        return row.user_id !== acceptDecline;\n      }));\n    },\n    refetchQueries: [{\n      query: LIST_PROJECTS\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      acceptInvite = _useMutation2[0]; // mutation to decline the invitation\n\n\n  var _useMutation3 = useMutation(DECLINE_INVITE, {\n    onCompleted: function onCompleted() {\n      setRows(rows.filter(function (row) {\n        return row.user_id !== acceptDecline;\n      }));\n    },\n    refetchQueries: [{\n      query: LIST_PROJECTS\n    }]\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      declineInvite = _useMutation4[0];\n\n  var _useQuery = useQuery(LIST_PROJECTS, {\n    fetchPolicy: 'cache-and-network'\n  }),\n      data = _useQuery.data;\n\n  useEffect(function () {\n    var _data$listProjects;\n\n    var projectList = (_data$listProjects = data === null || data === void 0 ? void 0 : data.listProjects) !== null && _data$listProjects !== void 0 ? _data$listProjects : [];\n    var users = [];\n    var flag = 0;\n    var roleVar = '';\n    projectList.forEach(function (project) {\n      project.members.forEach(function (member) {\n        if (member.user_id === userID && member.invitation === 'Pending') {\n          flag = 1;\n          roleVar = member.role;\n        }\n      });\n\n      if (flag === 1) {\n        project.members.forEach(function (member) {\n          if (member.user_id !== userID && member.role === 'Owner') {\n            users.push({\n              projectID: project.id,\n              projectName: project.name,\n              role: roleVar,\n              user_id: member.user_id,\n              user_name: member.user_name\n            });\n          }\n        });\n        flag = 0;\n      }\n    });\n    setRows([].concat(users));\n  }, [data]);\n  useQuery(ALL_USERS, {\n    onCompleted: function onCompleted(data) {\n      setAllUsers(_toConsumableArray(data.users));\n      setLoading(false);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-cy\": \"receivedInvitationModal\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, !loading ? /*#__PURE__*/React.createElement(React.Fragment, null, rows.length > 0 ? rows.map(function (row) {\n    return /*#__PURE__*/React.createElement(Paper, {\n      className: classes.root,\n      key: \"\".concat(row),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.avatarDiv,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      \"data-cy\": \"avatar\",\n      alt: \"User\",\n      className: classes.avatarBackground,\n      style: {\n        alignContent: 'right'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 19\n      }\n    }, userInitials(allUsers.filter(function (data) {\n      return row.user_id === data.id;\n    })[0].username)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }\n    }, allUsers.filter(function (data) {\n      return row.user_id === data.id;\n    })[0].username), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.email,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, t('settings.teamingTab.invitation.receivedInvitation.inviteTextFirst'), ' ', row.role === 'Editor' ? 'an' : 'a', ' ', /*#__PURE__*/React.createElement(\"strong\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    }, row.role), ' ', t('settings.teamingTab.invitation.receivedInvitation.inviteTextSecond')))), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.projectDiv,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.projectName,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }, row.projectName)), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.buttonDiv,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ButtonOutlined, {\n      className: classes.butnOutline,\n      onClick: function onClick() {\n        setAcceptDecline(row.user_id);\n        declineInvite({\n          variables: {\n            member: {\n              project_id: row.projectID,\n              user_id: getUserId(),\n              role: row.role\n            }\n          }\n        });\n      },\n      disabled: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 21\n      }\n    }, t('settings.teamingTab.invitation.receivedInvitation.button.ignore'))), /*#__PURE__*/React.createElement(\"div\", {\n      \"data-cy\": \"receivedInvitationAccept\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(ButtonFilled, {\n      onClick: function onClick() {\n        setAcceptDecline(row.user_id);\n        acceptInvite({\n          variables: {\n            member: {\n              project_id: row.projectID,\n              user_id: getUserId(),\n              role: row.role\n            }\n          }\n        });\n      },\n      disabled: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 21\n      }\n    }, t('settings.teamingTab.invitation.receivedInvitation.button.accept')))), ' ');\n  }) : /*#__PURE__*/React.createElement(React.Fragment, null)) : /*#__PURE__*/React.createElement(React.Fragment, null));\n};\n\nexport default ReceivedInvitations;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Settings/TeamingTab/Invitation/ReceivedInvitations/index.tsx"],"names":["useMutation","useQuery","Avatar","Paper","Typography","ButtonFilled","ButtonOutlined","React","useEffect","useState","useTranslation","ACCEPT_INVITE","ALL_USERS","DECLINE_INVITE","LIST_PROJECTS","getUserId","userInitials","useStyles","ReceivedInvitations","classes","t","rows","setRows","allUsers","setAllUsers","loading","setLoading","acceptDecline","setAcceptDecline","userID","onCompleted","filter","row","user_id","refetchQueries","query","acceptInvite","declineInvite","fetchPolicy","data","projectList","listProjects","users","flag","roleVar","forEach","project","members","member","invitation","role","push","projectID","id","projectName","name","user_name","length","map","root","avatarDiv","avatarBackground","alignContent","username","email","projectDiv","buttonDiv","butnOutline","variables","project_id"],"mappings":"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","sourcesContent":["import { useMutation, useQuery } from '@apollo/client';\nimport { Avatar, Paper, Typography } from '@material-ui/core';\nimport { ButtonFilled, ButtonOutlined } from 'litmus-ui';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  ACCEPT_INVITE,\n  ALL_USERS,\n  DECLINE_INVITE,\n  LIST_PROJECTS,\n} from '../../../../../graphql';\nimport {\n  MemberInvitation,\n  UserInvite,\n} from '../../../../../models/graphql/invite';\nimport { Projects } from '../../../../../models/graphql/user';\nimport { getUserId } from '../../../../../utils/auth';\nimport { userInitials } from '../../../../../utils/userInitials';\nimport useStyles from './styles';\n\ninterface ReceivedInvitation {\n  projectName: string;\n  user_id: string;\n  role: string;\n  projectID: string;\n  user_name: string;\n}\n\nconst ReceivedInvitations: React.FC = () => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  // for response data\n  const [rows, setRows] = useState<ReceivedInvitation[]>([]);\n  const [allUsers, setAllUsers] = useState<UserInvite[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  // stores the user whose invitation is accepted/declined\n  const [acceptDecline, setAcceptDecline] = useState<string>('');\n\n  const userID = getUserId();\n  // mutation to accept the invitation\n  const [acceptInvite] = useMutation<MemberInvitation>(ACCEPT_INVITE, {\n    onCompleted: () => {\n      setRows(rows.filter((row) => row.user_id !== acceptDecline));\n    },\n    refetchQueries: [{ query: LIST_PROJECTS }],\n  });\n\n  // mutation to decline the invitation\n  const [declineInvite] = useMutation<MemberInvitation>(DECLINE_INVITE, {\n    onCompleted: () => {\n      setRows(rows.filter((row) => row.user_id !== acceptDecline));\n    },\n    refetchQueries: [{ query: LIST_PROJECTS }],\n  });\n\n  const { data } = useQuery<Projects>(LIST_PROJECTS, {\n    fetchPolicy: 'cache-and-network',\n  });\n\n  useEffect(() => {\n    const projectList = data?.listProjects ?? [];\n    const users: ReceivedInvitation[] = [];\n\n    let flag = 0;\n    let roleVar = '';\n\n    projectList.forEach((project) => {\n      project.members.forEach((member) => {\n        if (member.user_id === userID && member.invitation === 'Pending') {\n          flag = 1;\n          roleVar = member.role;\n        }\n      });\n      if (flag === 1) {\n        project.members.forEach((member) => {\n          if (member.user_id !== userID && member.role === 'Owner') {\n            users.push({\n              projectID: project.id,\n              projectName: project.name,\n              role: roleVar,\n              user_id: member.user_id,\n              user_name: member.user_name,\n            });\n          }\n        });\n        flag = 0;\n      }\n    });\n    setRows([...users]);\n  }, [data]);\n\n  useQuery(ALL_USERS, {\n    onCompleted: (data) => {\n      setAllUsers([...data.users]);\n      setLoading(false);\n    },\n  });\n\n  return (\n    <div data-cy=\"receivedInvitationModal\">\n      {!loading ? (\n        <>\n          {rows.length > 0 ? (\n            rows.map((row) => (\n              <Paper className={classes.root} key={`${row}`}>\n                <div className={classes.avatarDiv}>\n                  <Avatar\n                    data-cy=\"avatar\"\n                    alt=\"User\"\n                    className={classes.avatarBackground}\n                    style={{ alignContent: 'right' }}\n                  >\n                    {userInitials(\n                      allUsers.filter((data) => {\n                        return row.user_id === data.id;\n                      })[0].username\n                    )}\n                  </Avatar>\n                  <div>\n                    <Typography className={classes.name}>\n                      {\n                        allUsers.filter((data) => {\n                          return row.user_id === data.id;\n                        })[0].username\n                      }\n                    </Typography>\n                    <Typography className={classes.email}>\n                      {t(\n                        'settings.teamingTab.invitation.receivedInvitation.inviteTextFirst'\n                      )}{' '}\n                      {row.role === 'Editor' ? 'an' : 'a'}{' '}\n                      <strong>{row.role}</strong>{' '}\n                      {t(\n                        'settings.teamingTab.invitation.receivedInvitation.inviteTextSecond'\n                      )}\n                    </Typography>\n                  </div>\n                </div>\n                <div className={classes.projectDiv}>\n                  <Typography className={classes.projectName}>\n                    {row.projectName}\n                  </Typography>\n                </div>\n                <div className={classes.buttonDiv}>\n                  <ButtonOutlined\n                    className={classes.butnOutline}\n                    onClick={() => {\n                      setAcceptDecline(row.user_id);\n                      declineInvite({\n                        variables: {\n                          member: {\n                            project_id: row.projectID,\n                            user_id: getUserId(),\n                            role: row.role,\n                          },\n                        },\n                      });\n                    }}\n                    disabled={false}\n                  >\n                    <div>\n                      {t(\n                        'settings.teamingTab.invitation.receivedInvitation.button.ignore'\n                      )}\n                    </div>\n                  </ButtonOutlined>\n                  <div data-cy=\"receivedInvitationAccept\">\n                    <ButtonFilled\n                      onClick={() => {\n                        setAcceptDecline(row.user_id);\n                        acceptInvite({\n                          variables: {\n                            member: {\n                              project_id: row.projectID,\n                              user_id: getUserId(),\n                              role: row.role,\n                            },\n                          },\n                        });\n                      }}\n                      disabled={false}\n                    >\n                      {t(\n                        'settings.teamingTab.invitation.receivedInvitation.button.accept'\n                      )}\n                    </ButtonFilled>\n                  </div>\n                </div>{' '}\n              </Paper>\n            ))\n          ) : (\n            <></>\n          )}\n        </>\n      ) : (\n        <></>\n      )}\n    </div>\n  );\n};\n\nexport default ReceivedInvitations;\n"]},"metadata":{},"sourceType":"module"}