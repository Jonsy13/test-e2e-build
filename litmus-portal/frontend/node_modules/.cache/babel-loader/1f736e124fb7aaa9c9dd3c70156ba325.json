{"ast":null,"code":"import _objectSpread from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/ChaosWorkflows/BrowseSchedule/index.tsx\";\n\nimport { useMutation, useQuery } from '@apollo/client';\nimport { FormControl, IconButton, InputAdornment, InputBase, InputLabel, MenuItem, Paper, Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow, Typography } from '@material-ui/core';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport YAML from 'yaml';\nimport Loader from '../../../components/Loader';\nimport { DELETE_WORKFLOW, GET_CLUSTER_NAMES, UPDATE_SCHEDULE, WORKFLOW_LIST_DETAILS } from '../../../graphql';\nimport { getProjectID } from '../../../utils/getSearchParams';\nimport useStyles from './styles';\nimport TableData from './TableData';\n\nvar BrowseSchedule = function BrowseSchedule() {\n  var _clusterList$getClust, _data$ListWorkflow$to;\n\n  var classes = useStyles();\n  var projectID = getProjectID();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t; // State for pagination\n\n\n  var _useState = useState({\n    page: 0,\n    limit: 10\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      paginationData = _useState2[0],\n      setPaginationData = _useState2[1]; // States for filters\n\n\n  var _useState3 = useState({\n    workflow_name: '',\n    cluster_name: 'All',\n    suspended: 'All'\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filters = _useState4[0],\n      setFilters = _useState4[1]; // State for sorting\n\n\n  var _useState5 = useState({\n    field: 'Time',\n    descending: true\n  }),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sortData = _useState6[0],\n      setSortData = _useState6[1]; // Apollo query to get the scheduled data\n\n\n  var _useQuery = useQuery(WORKFLOW_LIST_DETAILS, {\n    variables: {\n      workflowInput: {\n        project_id: projectID,\n        pagination: {\n          page: paginationData.page,\n          limit: paginationData.limit\n        },\n        sort: sortData,\n        filter: {\n          workflow_name: filters.workflow_name,\n          cluster_name: filters.cluster_name\n        }\n      }\n    },\n    fetchPolicy: 'cache-and-network'\n  }),\n      data = _useQuery.data,\n      refetch = _useQuery.refetch,\n      loading = _useQuery.loading,\n      error = _useQuery.error; // Apollo mutation to delete the selected schedule\n\n\n  var _useMutation = useMutation(DELETE_WORKFLOW, {\n    onCompleted: function onCompleted() {\n      return refetch();\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      deleteSchedule = _useMutation2[0]; // State for search and filtering\n\n\n  var _useMutation3 = useMutation(UPDATE_SCHEDULE, {\n    onCompleted: function onCompleted() {\n      return refetch();\n    }\n  }),\n      _useMutation4 = _slicedToArray(_useMutation3, 1),\n      updateSchedule = _useMutation4[0]; // Disable and re-enable a schedule\n\n\n  var handleToggleSchedule = function handleToggleSchedule(schedule) {\n    var yaml = YAML.parse(schedule.workflow_manifest);\n\n    if (yaml.spec.suspend === undefined || yaml.spec.suspend === false) {\n      yaml.spec.suspend = true;\n    } else {\n      yaml.spec.suspend = false;\n    }\n\n    var weightData = [];\n    schedule.weightages.forEach(function (weightEntry) {\n      weightData.push({\n        experiment_name: weightEntry.experiment_name,\n        weightage: weightEntry.weightage\n      });\n    });\n    updateSchedule({\n      variables: {\n        ChaosWorkFlowInput: {\n          workflow_id: schedule.workflow_id,\n          workflow_name: schedule.workflow_name,\n          workflow_description: schedule.workflow_description,\n          isCustomWorkflow: schedule.isCustomWorkflow,\n          cronSyntax: schedule.cronSyntax,\n          workflow_manifest: JSON.stringify(yaml, null, 2),\n          project_id: schedule.project_id,\n          cluster_id: schedule.cluster_id,\n          weightages: weightData\n        }\n      }\n    });\n  }; // Query to get list of Clusters\n\n\n  var _useQuery2 = useQuery(GET_CLUSTER_NAMES, {\n    variables: {\n      project_id: projectID\n    }\n  }),\n      clusterList = _useQuery2.data;\n\n  var filteredWorkflows = data === null || data === void 0 ? void 0 : data.ListWorkflow.workflows.filter(function (dataRow) {\n    return filters.suspended === 'All' ? true : filters.suspended === 'true' ? YAML.parse(dataRow.workflow_manifest).spec.suspend === true : filters.suspended === 'false' ? YAML.parse(dataRow.workflow_manifest).spec.suspend === undefined : false;\n  });\n\n  var deleteRow = function deleteRow(wfid) {\n    deleteSchedule({\n      variables: {\n        workflowid: wfid,\n        workflow_run_id: ''\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"data-cy\": \"workflowSchedulesTable\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"Heading section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.headerSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(InputBase, {\n    id: \"input-with-icon-adornment\",\n    placeholder: \"Search\",\n    className: classes.search,\n    value: filters.workflow_name,\n    onChange: function onChange(event) {\n      return setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n        workflow_name: event.target.value\n      }));\n    },\n    startAdornment: /*#__PURE__*/React.createElement(InputAdornment, {\n      position: \"start\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(SearchIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 17\n      }\n    })),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.selectText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(Select, {\n    value: filters.suspended,\n    onChange: function onChange(event) {\n      return setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n        suspended: event.target.value\n      }));\n    },\n    label: \"Name\",\n    className: classes.selectText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"All\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 15\n    }\n  }, t('chaosWorkflows.browseSchedules.options.all')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"false\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, t('chaosWorkflows.browseSchedules.options.enabledOnly')), /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"true\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 15\n    }\n  }, t('chaosWorkflows.browseSchedules.options.disabledOnly')))), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    className: classes.selectText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, \"Target Agent\"), /*#__PURE__*/React.createElement(Select, {\n    value: filters.cluster_name,\n    onChange: function onChange(event) {\n      return setFilters(_objectSpread(_objectSpread({}, filters), {}, {\n        cluster_name: event.target.value\n      }));\n    },\n    label: \"Target Cluster\",\n    className: classes.selectText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"All\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, \"All\"), clusterList === null || clusterList === void 0 ? void 0 : (_clusterList$getClust = clusterList.getCluster) === null || _clusterList$getClust === void 0 ? void 0 : _clusterList$getClust.map(function (cluster) {\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: cluster.cluster_name,\n      value: cluster.cluster_name,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    }, cluster.cluster_name);\n  }))))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.root,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    \"data-cy\": \"browseScheduleTable\",\n    className: classes.tableMain,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    stickyHeader: true,\n    \"aria-label\": \"simple table\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableHead, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TableRow, {\n    className: classes.tableHead,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    className: classes.workflowName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'row'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    style: {\n      paddingLeft: 30,\n      paddingTop: 12\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  }, t('chaosWorkflows.browseSchedules.name')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.sortDiv,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"sort name ascending\",\n    size: \"small\",\n    onClick: function onClick() {\n      return setSortData({\n        field: 'Name',\n        descending: false\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(ExpandLessIcon, {\n    fontSize: \"inherit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    \"aria-label\": \"sort name descending\",\n    size: \"small\",\n    onClick: function onClick() {\n      return setSortData({\n        field: 'Name',\n        descending: true\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n    fontSize: \"inherit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 25\n    }\n  }))))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.targetCluster,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, t('chaosWorkflows.browseSchedules.agent'))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.showExp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 19\n    }\n  }, t('chaosWorkflows.browseSchedules.experiments'))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.showExp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 19\n    }\n  }, t('chaosWorkflows.browseSchedules.schedule'))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.showExp,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 19\n    }\n  }, t('chaosWorkflows.browseSchedules.nextRun'))), /*#__PURE__*/React.createElement(TableCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 13\n    }\n  }, loading ? /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    colSpan: 7,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 21\n    }\n  }))) : error ? /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    \"data-cy\": \"browseScheduleError\",\n    colSpan: 7,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 21\n    }\n  }, \"Unable to fetch data\"))) : filteredWorkflows && filteredWorkflows.length ? filteredWorkflows.map(function (data) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      \"data-cy\": \"workflowSchedulesTableRow\",\n      key: data.workflow_id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TableData, {\n      data: data,\n      deleteRow: deleteRow,\n      handleToggleSchedule: handleToggleSchedule,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(TableRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(TableCell, {\n    \"data-cy\": \"browseScheduleNoData\",\n    colSpan: 7,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 21\n    }\n  }, \"No records available\")))))), /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [10, 25, 50],\n    component: \"div\",\n    count: (_data$ListWorkflow$to = data === null || data === void 0 ? void 0 : data.ListWorkflow.total_no_of_workflows) !== null && _data$ListWorkflow$to !== void 0 ? _data$ListWorkflow$to : 0,\n    rowsPerPage: paginationData.limit,\n    page: paginationData.page,\n    onChangePage: function onChangePage(_, page) {\n      return setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        page: page\n      }));\n    },\n    onChangeRowsPerPage: function onChangeRowsPerPage(event) {\n      setPaginationData(_objectSpread(_objectSpread({}, paginationData), {}, {\n        page: 0,\n        limit: parseInt(event.target.value, 10)\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }\n  })));\n};\n\nexport default BrowseSchedule;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/ChaosWorkflows/BrowseSchedule/index.tsx"],"names":["useMutation","useQuery","FormControl","IconButton","InputAdornment","InputBase","InputLabel","MenuItem","Paper","Select","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Typography","ExpandLessIcon","ExpandMoreIcon","SearchIcon","React","useState","useTranslation","YAML","Loader","DELETE_WORKFLOW","GET_CLUSTER_NAMES","UPDATE_SCHEDULE","WORKFLOW_LIST_DETAILS","getProjectID","useStyles","TableData","BrowseSchedule","classes","projectID","t","page","limit","paginationData","setPaginationData","workflow_name","cluster_name","suspended","filters","setFilters","field","descending","sortData","setSortData","variables","workflowInput","project_id","pagination","sort","filter","fetchPolicy","data","refetch","loading","error","onCompleted","deleteSchedule","updateSchedule","handleToggleSchedule","schedule","yaml","parse","workflow_manifest","spec","suspend","undefined","weightData","weightages","forEach","weightEntry","push","experiment_name","weightage","ChaosWorkFlowInput","workflow_id","workflow_description","isCustomWorkflow","cronSyntax","JSON","stringify","cluster_id","clusterList","filteredWorkflows","ListWorkflow","workflows","dataRow","deleteRow","wfid","workflowid","workflow_run_id","headerSection","search","event","target","value","formControl","selectText","getCluster","map","cluster","root","tableMain","tableHead","workflowName","display","flexDirection","paddingLeft","paddingTop","sortDiv","targetCluster","showExp","length","total_no_of_workflows","_","parseInt"],"mappings":"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","sourcesContent":["import { useMutation, useQuery } from '@apollo/client';\nimport {\n  FormControl,\n  IconButton,\n  InputAdornment,\n  InputBase,\n  InputLabel,\n  MenuItem,\n  Paper,\n  Select,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport SearchIcon from '@material-ui/icons/Search';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport YAML from 'yaml';\nimport Loader from '../../../components/Loader';\nimport {\n  DELETE_WORKFLOW,\n  GET_CLUSTER_NAMES,\n  UPDATE_SCHEDULE,\n  WORKFLOW_LIST_DETAILS,\n} from '../../../graphql';\nimport { Clusters, ClusterVars } from '../../../models/graphql/clusterData';\nimport { WeightMap } from '../../../models/graphql/createWorkflowData';\nimport { DeleteSchedule } from '../../../models/graphql/scheduleData';\nimport {\n  ListWorkflowsInput,\n  Pagination,\n  ScheduledWorkflow,\n  ScheduledWorkflows,\n  SortInput,\n  WorkflowFilterInput,\n} from '../../../models/graphql/workflowListData';\nimport { getProjectID } from '../../../utils/getSearchParams';\nimport useStyles from './styles';\nimport TableData from './TableData';\n\ninterface FilterOption extends WorkflowFilterInput {\n  suspended?: string;\n}\n\nconst BrowseSchedule: React.FC = () => {\n  const classes = useStyles();\n  const projectID = getProjectID();\n  const { t } = useTranslation();\n\n  // State for pagination\n  const [paginationData, setPaginationData] = useState<Pagination>({\n    page: 0,\n    limit: 10,\n  });\n\n  // States for filters\n  const [filters, setFilters] = useState<FilterOption>({\n    workflow_name: '',\n    cluster_name: 'All',\n    suspended: 'All',\n  });\n\n  // State for sorting\n  const [sortData, setSortData] = useState<SortInput>({\n    field: 'Time',\n    descending: true,\n  });\n\n  // Apollo query to get the scheduled data\n  const { data, refetch, loading, error } = useQuery<\n    ScheduledWorkflows,\n    ListWorkflowsInput\n  >(WORKFLOW_LIST_DETAILS, {\n    variables: {\n      workflowInput: {\n        project_id: projectID,\n        pagination: {\n          page: paginationData.page,\n          limit: paginationData.limit,\n        },\n        sort: sortData,\n        filter: {\n          workflow_name: filters.workflow_name,\n          cluster_name: filters.cluster_name,\n        },\n      },\n    },\n    fetchPolicy: 'cache-and-network',\n  });\n\n  // Apollo mutation to delete the selected schedule\n  const [deleteSchedule] = useMutation<DeleteSchedule>(DELETE_WORKFLOW, {\n    onCompleted: () => refetch(),\n  });\n\n  // State for search and filtering\n\n  const [updateSchedule] = useMutation(UPDATE_SCHEDULE, {\n    onCompleted: () => refetch(),\n  });\n\n  // Disable and re-enable a schedule\n  const handleToggleSchedule = (schedule: ScheduledWorkflow) => {\n    const yaml = YAML.parse(schedule.workflow_manifest);\n    if (yaml.spec.suspend === undefined || yaml.spec.suspend === false) {\n      yaml.spec.suspend = true;\n    } else {\n      yaml.spec.suspend = false;\n    }\n\n    const weightData: WeightMap[] = [];\n\n    schedule.weightages.forEach((weightEntry) => {\n      weightData.push({\n        experiment_name: weightEntry.experiment_name,\n        weightage: weightEntry.weightage,\n      });\n    });\n\n    updateSchedule({\n      variables: {\n        ChaosWorkFlowInput: {\n          workflow_id: schedule.workflow_id,\n          workflow_name: schedule.workflow_name,\n          workflow_description: schedule.workflow_description,\n          isCustomWorkflow: schedule.isCustomWorkflow,\n          cronSyntax: schedule.cronSyntax,\n          workflow_manifest: JSON.stringify(yaml, null, 2),\n          project_id: schedule.project_id,\n          cluster_id: schedule.cluster_id,\n          weightages: weightData,\n        },\n      },\n    });\n  };\n\n  // Query to get list of Clusters\n  const { data: clusterList } = useQuery<Partial<Clusters>, ClusterVars>(\n    GET_CLUSTER_NAMES,\n    {\n      variables: {\n        project_id: projectID,\n      },\n    }\n  );\n\n  const filteredWorkflows = data?.ListWorkflow.workflows.filter((dataRow) =>\n    filters.suspended === 'All'\n      ? true\n      : filters.suspended === 'true'\n      ? YAML.parse(dataRow.workflow_manifest).spec.suspend === true\n      : filters.suspended === 'false'\n      ? YAML.parse(dataRow.workflow_manifest).spec.suspend === undefined\n      : false\n  );\n\n  const deleteRow = (wfid: string) => {\n    deleteSchedule({\n      variables: { workflowid: wfid, workflow_run_id: '' },\n    });\n  };\n  return (\n    <div data-cy=\"workflowSchedulesTable\">\n      <section className=\"Heading section\">\n        <div className={classes.headerSection}>\n          {/* Search Field */}\n          <InputBase\n            id=\"input-with-icon-adornment\"\n            placeholder=\"Search\"\n            className={classes.search}\n            value={filters.workflow_name}\n            onChange={(event) =>\n              setFilters({\n                ...filters,\n                workflow_name: event.target.value as string,\n              })\n            }\n            startAdornment={\n              <InputAdornment position=\"start\">\n                <SearchIcon />\n              </InputAdornment>\n            }\n          />\n\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel className={classes.selectText}>Name</InputLabel>\n            <Select\n              value={filters.suspended}\n              onChange={(event) =>\n                setFilters({\n                  ...filters,\n                  suspended: event.target.value as string,\n                })\n              }\n              label=\"Name\"\n              className={classes.selectText}\n            >\n              <MenuItem value=\"All\">\n                {t('chaosWorkflows.browseSchedules.options.all')}\n              </MenuItem>\n              <MenuItem value=\"false\">\n                {t('chaosWorkflows.browseSchedules.options.enabledOnly')}\n              </MenuItem>\n              <MenuItem value=\"true\">\n                {t('chaosWorkflows.browseSchedules.options.disabledOnly')}\n              </MenuItem>\n            </Select>\n          </FormControl>\n\n          {/* Select Cluster */}\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel className={classes.selectText}>Target Agent</InputLabel>\n            <Select\n              value={filters.cluster_name}\n              onChange={(event) =>\n                setFilters({\n                  ...filters,\n                  cluster_name: event.target.value as string,\n                })\n              }\n              label=\"Target Cluster\"\n              className={classes.selectText}\n            >\n              <MenuItem value=\"All\">All</MenuItem>\n              {clusterList?.getCluster?.map((cluster) => (\n                <MenuItem\n                  key={cluster.cluster_name}\n                  value={cluster.cluster_name}\n                >\n                  {cluster.cluster_name}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n        </div>\n      </section>\n      <Paper className={classes.root}>\n        {/* Table Header */}\n        <TableContainer\n          data-cy=\"browseScheduleTable\"\n          className={classes.tableMain}\n        >\n          <Table stickyHeader aria-label=\"simple table\">\n            <TableHead>\n              <TableRow className={classes.tableHead}>\n                {/* WorkFlow Name */}\n                <TableCell className={classes.workflowName}>\n                  <div style={{ display: 'flex', flexDirection: 'row' }}>\n                    <Typography style={{ paddingLeft: 30, paddingTop: 12 }}>\n                      {t('chaosWorkflows.browseSchedules.name')}\n                    </Typography>\n                    <div className={classes.sortDiv}>\n                      <IconButton\n                        aria-label=\"sort name ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            field: 'Name',\n                            descending: false,\n                          })\n                        }\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort name descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            field: 'Name',\n                            descending: true,\n                          })\n                        }\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* Cluster */}\n                <TableCell>\n                  <Typography className={classes.targetCluster}>\n                    {t('chaosWorkflows.browseSchedules.agent')}\n                  </Typography>\n                </TableCell>\n\n                {/* Show Experiments */}\n                <TableCell>\n                  <Typography className={classes.showExp}>\n                    {t('chaosWorkflows.browseSchedules.experiments')}\n                  </Typography>\n                </TableCell>\n\n                {/* Show Schedule Details */}\n                <TableCell>\n                  <Typography className={classes.showExp}>\n                    {t('chaosWorkflows.browseSchedules.schedule')}\n                  </Typography>\n                </TableCell>\n\n                {/* Next Run */}\n                <TableCell>\n                  <Typography className={classes.showExp}>\n                    {t('chaosWorkflows.browseSchedules.nextRun')}\n                  </Typography>\n                </TableCell>\n\n                <TableCell />\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {loading ? (\n                <TableRow>\n                  <TableCell colSpan={7}>\n                    <Loader />\n                  </TableCell>\n                </TableRow>\n              ) : error ? (\n                <TableRow>\n                  <TableCell data-cy=\"browseScheduleError\" colSpan={7}>\n                    <Typography align=\"center\">Unable to fetch data</Typography>\n                  </TableCell>\n                </TableRow>\n              ) : filteredWorkflows && filteredWorkflows.length ? (\n                filteredWorkflows.map((data) => (\n                  <TableRow\n                    data-cy=\"workflowSchedulesTableRow\"\n                    key={data.workflow_id}\n                  >\n                    <TableData\n                      data={data}\n                      deleteRow={deleteRow}\n                      handleToggleSchedule={handleToggleSchedule}\n                    />\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell data-cy=\"browseScheduleNoData\" colSpan={7}>\n                    <Typography align=\"center\">No records available</Typography>\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n\n        {/* Pagination Section */}\n        <TablePagination\n          rowsPerPageOptions={[10, 25, 50]}\n          component=\"div\"\n          count={data?.ListWorkflow.total_no_of_workflows ?? 0}\n          rowsPerPage={paginationData.limit}\n          page={paginationData.page}\n          onChangePage={(_, page) =>\n            setPaginationData({ ...paginationData, page })\n          }\n          onChangeRowsPerPage={(event) => {\n            setPaginationData({\n              ...paginationData,\n              page: 0,\n              limit: parseInt(event.target.value, 10),\n            });\n          }}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport default BrowseSchedule;\n"]},"metadata":{},"sourceType":"module"}