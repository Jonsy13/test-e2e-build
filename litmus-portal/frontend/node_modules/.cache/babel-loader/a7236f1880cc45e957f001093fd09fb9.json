{"ast":null,"code":"import _slicedToArray from \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Home/ProjectInfoContainer/index.tsx\";\n\nimport { useQuery } from '@apollo/client';\nimport { Paper, Typography } from '@material-ui/core';\nimport { ButtonOutlined } from 'litmus-ui';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { LIST_PROJECTS } from '../../../graphql';\nimport { InvitationStatus, Role } from '../../../models/graphql/user';\nimport useActions from '../../../redux/actions';\nimport * as TabActions from '../../../redux/actions/tabs';\nimport { history } from '../../../redux/configureStore';\nimport { getUserId } from '../../../utils/auth';\nimport { getProjectID, getProjectRole } from '../../../utils/getSearchParams';\nimport useStyles from './styles';\n\nvar ProjectInfoContainer = function ProjectInfoContainer() {\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var tabs = useActions(TabActions);\n  var userID = getUserId();\n  var projectID = getProjectID();\n  var projectRole = getProjectRole();\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      projectOwnerCount = _useState2[0],\n      setProjectOwnerCount = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      projectOtherCount = _useState4[0],\n      setProjectOtherCount = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      invitationsCount = _useState6[0],\n      setInvitationCount = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      projects = _useState8[0],\n      setProjects = _useState8[1];\n\n  var _useQuery = useQuery(LIST_PROJECTS, {\n    onCompleted: function onCompleted() {\n      if (dataProject === null || dataProject === void 0 ? void 0 : dataProject.listProjects) {\n        setProjects(dataProject === null || dataProject === void 0 ? void 0 : dataProject.listProjects);\n      }\n    },\n    fetchPolicy: 'cache-and-network'\n  }),\n      dataProject = _useQuery.data;\n\n  useEffect(function () {\n    var projectOwner = 0;\n    var projectInvitation = 0;\n    var projectOther = 0;\n    projects.forEach(function (project) {\n      project.members.forEach(function (member) {\n        if (member.user_id === userID && member.role === Role.owner) {\n          projectOwner++;\n        } else if (member.user_id === userID && member.invitation === InvitationStatus.PENDING) {\n          projectInvitation++;\n        } else if (member.user_id === userID && member.role !== Role.owner && member.invitation === InvitationStatus.ACCEPTED) {\n          projectOther++;\n        }\n      });\n    });\n    setProjectOwnerCount(projectOwner);\n    setInvitationCount(projectInvitation);\n    setProjectOtherCount(projectOther);\n  }, [projects, dataProject]);\n  var projectCount = projectOwnerCount + projectOtherCount;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.projectInfoContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.projectInfoBlock,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.projectInfoData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    id: \"projectCount\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, projectCount), projectCount === 1 ? /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, t('homeViews.projectInfoContainer.project')) : /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, t('homeViews.projectInfoContainer.projects'))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    id: \"invitationCount\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, invitationsCount), invitationsCount === 1 ? /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, t('homeViews.projectInfoContainer.invitation')) : /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, t('homeViews.projectInfoContainer.invitations'))))), projectRole === Role.owner && /*#__PURE__*/React.createElement(ButtonOutlined, {\n    onClick: function onClick() {\n      tabs.changeSettingsTabs(1);\n      history.push({\n        pathname: '/settings',\n        search: \"?projectID=\".concat(projectID, \"&projectRole=\").concat(projectRole)\n      });\n    },\n    className: classes.viewProjectButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./icons/viewProjects.svg\",\n    alt: \"View projects\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), t('homeViews.projectInfoContainer.viewProjects')))));\n};\n\nexport { ProjectInfoContainer };","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Home/ProjectInfoContainer/index.tsx"],"names":["useQuery","Paper","Typography","ButtonOutlined","React","useEffect","useState","useTranslation","LIST_PROJECTS","InvitationStatus","Role","useActions","TabActions","history","getUserId","getProjectID","getProjectRole","useStyles","ProjectInfoContainer","classes","t","tabs","userID","projectID","projectRole","projectOwnerCount","setProjectOwnerCount","projectOtherCount","setProjectOtherCount","invitationsCount","setInvitationCount","projects","setProjects","onCompleted","dataProject","listProjects","fetchPolicy","data","projectOwner","projectInvitation","projectOther","forEach","project","members","member","user_id","role","owner","invitation","PENDING","ACCEPTED","projectCount","projectInfoContainer","projectInfoBlock","projectInfoData","changeSettingsTabs","push","pathname","search","viewProjectButton"],"mappings":"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","sourcesContent":["import { useQuery } from '@apollo/client';\nimport { Paper, Typography } from '@material-ui/core';\nimport { ButtonOutlined } from 'litmus-ui';\nimport React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { LIST_PROJECTS } from '../../../graphql';\nimport {\n  InvitationStatus,\n  Member,\n  Project,\n  Projects,\n  Role,\n} from '../../../models/graphql/user';\nimport useActions from '../../../redux/actions';\nimport * as TabActions from '../../../redux/actions/tabs';\nimport { history } from '../../../redux/configureStore';\nimport { getUserId } from '../../../utils/auth';\nimport { getProjectID, getProjectRole } from '../../../utils/getSearchParams';\nimport useStyles from './styles';\n\nconst ProjectInfoContainer: React.FC = () => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const tabs = useActions(TabActions);\n\n  const userID = getUserId();\n\n  const projectID = getProjectID();\n  const projectRole = getProjectRole();\n\n  const [projectOwnerCount, setProjectOwnerCount] = useState<number>(0);\n  const [projectOtherCount, setProjectOtherCount] = useState<number>(0);\n  const [invitationsCount, setInvitationCount] = useState<number>(0);\n  const [projects, setProjects] = useState<Project[]>([]);\n\n  const { data: dataProject } = useQuery<Projects>(LIST_PROJECTS, {\n    onCompleted: () => {\n      if (dataProject?.listProjects) {\n        setProjects(dataProject?.listProjects);\n      }\n    },\n    fetchPolicy: 'cache-and-network',\n  });\n\n  useEffect(() => {\n    let projectOwner = 0;\n    let projectInvitation = 0;\n    let projectOther = 0;\n    projects.forEach((project) => {\n      project.members.forEach((member: Member) => {\n        if (member.user_id === userID && member.role === Role.owner) {\n          projectOwner++;\n        } else if (\n          member.user_id === userID &&\n          member.invitation === InvitationStatus.PENDING\n        ) {\n          projectInvitation++;\n        } else if (\n          member.user_id === userID &&\n          member.role !== Role.owner &&\n          member.invitation === InvitationStatus.ACCEPTED\n        ) {\n          projectOther++;\n        }\n      });\n    });\n    setProjectOwnerCount(projectOwner);\n    setInvitationCount(projectInvitation);\n    setProjectOtherCount(projectOther);\n  }, [projects, dataProject]);\n\n  const projectCount = projectOwnerCount + projectOtherCount;\n\n  return (\n    <div>\n      {/* Project Level info container */}\n      <Paper className={classes.projectInfoContainer}>\n        <div className={classes.projectInfoBlock}>\n          <div className={classes.projectInfoData}>\n            <div>\n              <Typography id=\"projectCount\">{projectCount}</Typography>\n              {projectCount === 1 ? (\n                <Typography>\n                  {t('homeViews.projectInfoContainer.project')}\n                </Typography>\n              ) : (\n                <Typography>\n                  {t('homeViews.projectInfoContainer.projects')}\n                </Typography>\n              )}\n            </div>\n            <div>\n              <Typography id=\"invitationCount\">{invitationsCount}</Typography>\n              {invitationsCount === 1 ? (\n                <Typography>\n                  {t('homeViews.projectInfoContainer.invitation')}\n                </Typography>\n              ) : (\n                <Typography>\n                  {t('homeViews.projectInfoContainer.invitations')}\n                </Typography>\n              )}\n            </div>\n          </div>\n        </div>\n        {projectRole === Role.owner && (\n          <ButtonOutlined\n            onClick={() => {\n              tabs.changeSettingsTabs(1);\n              history.push({\n                pathname: '/settings',\n                search: `?projectID=${projectID}&projectRole=${projectRole}`,\n              });\n            }}\n            className={classes.viewProjectButton}\n          >\n            <Typography>\n              <img src=\"./icons/viewProjects.svg\" alt=\"View projects\" />\n              {t('homeViews.projectInfoContainer.viewProjects')}\n            </Typography>\n          </ButtonOutlined>\n        )}\n      </Paper>\n    </div>\n  );\n};\n\nexport { ProjectInfoContainer };\n"]},"metadata":{},"sourceType":"module"}