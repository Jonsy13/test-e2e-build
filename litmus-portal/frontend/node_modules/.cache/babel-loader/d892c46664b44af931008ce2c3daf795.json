{"ast":null,"code":"import _objectSpread from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useQuery}from'@apollo/client';import{IconButton,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TablePagination,TableRow,Typography}from'@material-ui/core';import{Search}from'litmus-ui';import React,{useState}from'react';import{useTranslation}from'react-i18next';import ExpandLessIcon from'@material-ui/icons/ExpandLess';import ExpandMoreIcon from'@material-ui/icons/ExpandMore';import Loader from'../../../components/Loader';import{GLOBAL_PROJECT_DATA}from'../../../graphql';import useStyles from'./styles';var UsageTable=function UsageTable(){var _data$UsageQuery$Proj;var classes=useStyles();var _useTranslation=useTranslation(),t=_useTranslation.t;var _useState=useState({page:0,limit:10}),_useState2=_slicedToArray(_useState,2),paginationData=_useState2[0],setPaginationData=_useState2[1];var _useState3=useState({Field:'Project',Descending:false}),_useState4=_slicedToArray(_useState3,2),sortData=_useState4[0],setSortData=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useQuery=useQuery(GLOBAL_PROJECT_DATA,{variables:{query:{DateRange:{start_date:Math.trunc(new Date(new Date().getFullYear(),new Date().getMonth(),1).getTime()/1000).toString(),end_date:Math.trunc(new Date().getTime()/1000).toString()},Pagination:{page:paginationData.page,limit:paginationData.limit},SearchProject:search,Sort:sortData}}}),data=_useQuery.data,loading=_useQuery.loading;return/*#__PURE__*/React.createElement(\"div\",{className:classes.table},/*#__PURE__*/React.createElement(\"div\",{className:classes.headerSection},/*#__PURE__*/React.createElement(Search,{className:classes.search,\"data-cy\":\"projectSearch\",id:\"input-with-icon-textfield\",placeholder:\"Search Projects\",value:search,onChange:function onChange(event){return setSearch(event.target.value);}})),/*#__PURE__*/React.createElement(Paper,null,/*#__PURE__*/React.createElement(TableContainer,{className:classes.tableMain},/*#__PURE__*/React.createElement(Table,{stickyHeader:true,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,{className:classes.tableHead},/*#__PURE__*/React.createElement(TableCell,{className:classes.projectName},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.project')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort project ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Project',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort project descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Project',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.owner')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort owner ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Owner',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort owner descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Owner',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.agents')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort agent ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Agents',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort agents descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Agents',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.schedules')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort schedules ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Schedules',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort schedules descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'Schedules',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.wfRuns')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort WorkflowRuns ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'WorkflowRuns',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort WorkflowRuns descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'WorkflowRuns',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.expRuns')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort ExperimentRuns ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'ExperimentRuns',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort ExperimentRuns descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'ExperimentRuns',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(Typography,{className:classes.tableHeadName},t('usage.table.team')),/*#__PURE__*/React.createElement(\"div\",{className:classes.sortIconDiv},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort TeamMembers ascending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'TeamMembers',Descending:false});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandLessIcon,{fontSize:\"inherit\"})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"sort TeamMembers descending\",size:\"small\",onClick:function onClick(){return setSortData({Field:'TeamMembers',Descending:true});},className:classes.imgSize},/*#__PURE__*/React.createElement(ExpandMoreIcon,{fontSize:\"inherit\"}))))))),/*#__PURE__*/React.createElement(TableBody,null,loading?/*#__PURE__*/React.createElement(Loader,null):(data===null||data===void 0?void 0:data.UsageQuery.Projects.length)>0?data===null||data===void 0?void 0:data.UsageQuery.Projects.map(function(project){return/*#__PURE__*/React.createElement(TableRow,{key:project.Name,className:classes.projectData},/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\",className:classes.tableDataProjectName},project.Name),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},project.Members.Owner.Username),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},project.Agents.Total),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},project.Workflows.Schedules),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},project.Workflows.Runs),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},project.Workflows.Runs),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},project.Members.Total));}):/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{colSpan:7},/*#__PURE__*/React.createElement(Typography,{className:classes.center},/*#__PURE__*/React.createElement(\"strong\",null,t('usage.table.noProject')))))))),/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[10,25,50],component:\"div\",count:(_data$UsageQuery$Proj=data===null||data===void 0?void 0:data.UsageQuery.Projects.length)!==null&&_data$UsageQuery$Proj!==void 0?_data$UsageQuery$Proj:0,rowsPerPage:paginationData.limit,page:paginationData.page,onChangePage:function onChangePage(_,page){return setPaginationData(_objectSpread(_objectSpread({},paginationData),{},{page:page}));},onChangeRowsPerPage:function onChangeRowsPerPage(event){setPaginationData(_objectSpread(_objectSpread({},paginationData),{},{page:0,limit:parseInt(event.target.value,10)}));}})));};export default UsageTable;","map":{"version":3,"sources":["/home/vedant/go/src/github.com/litmus/litmus-portal/frontend/src/views/Usage/UsageTable/index.tsx"],"names":["useQuery","IconButton","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TablePagination","TableRow","Typography","Search","React","useState","useTranslation","ExpandLessIcon","ExpandMoreIcon","Loader","GLOBAL_PROJECT_DATA","useStyles","UsageTable","classes","t","page","limit","paginationData","setPaginationData","Field","Descending","sortData","setSortData","search","setSearch","variables","query","DateRange","start_date","Math","trunc","Date","getFullYear","getMonth","getTime","toString","end_date","Pagination","SearchProject","Sort","data","loading","table","headerSection","event","target","value","tableMain","tableHead","projectName","display","tableHeadName","sortIconDiv","imgSize","UsageQuery","Projects","length","map","project","Name","projectData","tableDataProjectName","Members","Owner","Username","Agents","Total","Workflows","Schedules","Runs","center","_","parseInt"],"mappings":"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","sourcesContent":["import { useQuery } from '@apollo/client';\nimport {\n  IconButton,\n  Paper,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TablePagination,\n  TableRow,\n  Typography,\n} from '@material-ui/core';\nimport { Search } from 'litmus-ui';\nimport React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Loader from '../../../components/Loader';\nimport { GLOBAL_PROJECT_DATA } from '../../../graphql';\nimport { Pagination } from '../../../models/graphql/workflowListData';\nimport useStyles from './styles';\n\ninterface SortInput {\n  Field:\n    | 'Project'\n    | 'Owner'\n    | 'Agents'\n    | 'Schedules'\n    | 'WorkflowRuns'\n    | 'ExperimentRuns'\n    | 'TeamMembers';\n  Descending?: boolean;\n}\n\nconst UsageTable = () => {\n  const classes = useStyles();\n  const { t } = useTranslation();\n  const [paginationData, setPaginationData] = useState<Pagination>({\n    page: 0,\n    limit: 10,\n  });\n  const [sortData, setSortData] = useState<SortInput>({\n    Field: 'Project',\n    Descending: false,\n  });\n  const [search, setSearch] = useState<string>('');\n  const { data, loading } = useQuery(GLOBAL_PROJECT_DATA, {\n    variables: {\n      query: {\n        DateRange: {\n          start_date: Math.trunc(\n            new Date(\n              new Date().getFullYear(),\n              new Date().getMonth(),\n              1\n            ).getTime() / 1000\n          ).toString(),\n          end_date: Math.trunc(new Date().getTime() / 1000).toString(),\n        },\n        Pagination: {\n          page: paginationData.page,\n          limit: paginationData.limit,\n        },\n        SearchProject: search,\n        Sort: sortData,\n      },\n    },\n  });\n\n  return (\n    <div className={classes.table}>\n      <div className={classes.headerSection}>\n        {/* Search Bar */}\n        <Search\n          className={classes.search}\n          data-cy=\"projectSearch\"\n          id=\"input-with-icon-textfield\"\n          placeholder=\"Search Projects\"\n          value={search}\n          onChange={(event: any) => setSearch(event.target.value)}\n        />\n      </div>\n\n      <Paper>\n        <TableContainer className={classes.tableMain}>\n          <Table stickyHeader aria-label=\"simple table\">\n            <TableHead>\n              <TableRow className={classes.tableHead}>\n                {/* Projects */}\n                <TableCell className={classes.projectName}>\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.project')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort project ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Project',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort project descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Project',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* Owners */}\n                <TableCell align=\"left\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.owner')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort owner ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Owner',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort owner descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Owner',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* Agents */}\n                <TableCell align=\"center\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.agents')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort agent ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Agents',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort agents descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Agents',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* Schedules */}\n                <TableCell align=\"center\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.schedules')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort schedules ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Schedules',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort schedules descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'Schedules',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* WorkflowRuns */}\n                <TableCell align=\"center\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.wfRuns')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort WorkflowRuns ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'WorkflowRuns',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort WorkflowRuns descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'WorkflowRuns',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* ExperimentRuns */}\n                <TableCell align=\"center\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.expRuns')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort ExperimentRuns ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'ExperimentRuns',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort ExperimentRuns descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'ExperimentRuns',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n\n                {/* Team Mambers */}\n                <TableCell align=\"center\">\n                  <div style={{ display: 'flex' }}>\n                    <Typography className={classes.tableHeadName}>\n                      {t('usage.table.team')}\n                    </Typography>\n                    <div className={classes.sortIconDiv}>\n                      <IconButton\n                        aria-label=\"sort TeamMembers ascending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'TeamMembers',\n                            Descending: false,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandLessIcon fontSize=\"inherit\" />\n                      </IconButton>\n                      <IconButton\n                        aria-label=\"sort TeamMembers descending\"\n                        size=\"small\"\n                        onClick={() =>\n                          setSortData({\n                            Field: 'TeamMembers',\n                            Descending: true,\n                          })\n                        }\n                        className={classes.imgSize}\n                      >\n                        <ExpandMoreIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </div>\n                  </div>\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {loading ? (\n                <Loader />\n              ) : data?.UsageQuery.Projects.length > 0 ? (\n                data?.UsageQuery.Projects.map((project: any) => (\n                  <TableRow key={project.Name} className={classes.projectData}>\n                    <TableCell\n                      component=\"th\"\n                      scope=\"row\"\n                      className={classes.tableDataProjectName}\n                    >\n                      {project.Name}\n                    </TableCell>\n                    <TableCell align=\"left\">\n                      {project.Members.Owner.Username}\n                    </TableCell>\n                    <TableCell align=\"center\">{project.Agents.Total}</TableCell>\n                    <TableCell align=\"center\">\n                      {project.Workflows.Schedules}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {project.Workflows.Runs}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {project.Workflows.Runs}\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {project.Members.Total}\n                    </TableCell>\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell colSpan={7}>\n                    <Typography className={classes.center}>\n                      <strong>{t('usage.table.noProject')}</strong>\n                    </Typography>\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={[10, 25, 50]}\n          component=\"div\"\n          count={data?.UsageQuery.Projects.length ?? 0}\n          rowsPerPage={paginationData.limit}\n          page={paginationData.page}\n          onChangePage={(_, page) =>\n            setPaginationData({ ...paginationData, page })\n          }\n          onChangeRowsPerPage={(event) => {\n            setPaginationData({\n              ...paginationData,\n              page: 0,\n              limit: parseInt(event.target.value, 10),\n            });\n          }}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport default UsageTable;\n"]},"metadata":{},"sourceType":"module"}