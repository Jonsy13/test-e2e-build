(this["webpackJsonplitmus-portal"]=this["webpackJsonplitmus-portal"]||[]).push([[35],{1208:function(e,t,a){"use strict";t.a=function(e){return function(e,t){var a=e-t;return a<2e4?"Just now":a<6e4?"less than 1 min ago":a<36e5?"".concat(Math.round(a/6e4)," mins ago"):a<864e5?"".concat(Math.round(a/36e5)," hours ago"):a<2592e6?"".concat(Math.round(a/864e5)," days ago"):a<31536e6?"".concat(Math.round(a/2592e6)," months ago"):"".concat(Math.round(a/31536e6)," years ago")}((new Date).getTime(),1e3*e)}},1302:function(e,t,a){"use strict";var r=a(0),n=a(60);t.a=Object(n.a)(r.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight")},1303:function(e,t,a){"use strict";var r=a(0),n=a(60);t.a=Object(n.a)(r.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft")},1550:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return o}));var r=function(e,t){return e===t?0:e<t?-1:1},n=function(e,t){return e===t?0:e>t?-1:1},l=function(e,t){return e===t?0:e<t?-1:1},o=function(e,t){return e===t?0:e>t?-1:1}},3470:function(e,t,a){"use strict";a.r(t);var r=a(449),n=a(1582),l=a(453),o=a(0),c=a.n(o),s=a(3088),i=a(1106),m=a(130),u=a(228),d=a(13),g=a(41),p=a(7),f=a(968),h=a(1039),b=a(1040),w=a(1041),E=a(1042),C=a(1043),v=a(970),D=a(1044),k=a(1976),N=a(1096),O=a.n(N),j=a(229),y=a(366),x=a(1550),S=a(684),_=a(1034),T=a(1031),L=a(1056),P=a(1048),R=a(1583),I=a(1032),M=a(1240),A=a.n(M),B=a(1190),V=a.n(B),Y=a(1215),z=a.n(Y),H=a(1381),F=a(131),W=(a(1382),a(1383),a(678)),J=Object(W.a)((function(e){return{headerSection:{width:"100%",height:"5.625rem",display:"flex",flexDirection:"row",alignContent:"center",alignItems:"center",justifyContent:"center",border:"0.0625rem solid",borderColor:e.palette.border.main,backgroundColor:e.palette.common.white},popOver:{marginTop:e.spacing(5)},search:{fontSize:"1rem",marginRight:"auto",borderBottom:"1px solid ".concat(e.palette.border.main),marginLeft:e.spacing(6.25)},formControl:{margin:e.spacing(.5),marginRight:e.spacing(2.5),height:"2.5rem",minWidth:"9rem"},selectText:{height:"2.5rem",padding:e.spacing(.5)},selectDate:{display:"flex",flexDirection:"row",height:"2.5rem",minWidth:"9rem",border:"1.7px solid",borderRadius:"2rem",borderColor:e.palette.secondary.main,marginRight:e.spacing(3.75),textTransform:"none"},displayDate:{marginLeft:e.spacing(1),width:"100%"},root:{backgroundColor:e.palette.background.paper},tableMain:{marginTop:e.spacing(4.25),border:"1px solid ".concat(e.palette.border.main),backgroundColor:e.palette.common.white,height:"28.219rem","&::-webkit-scrollbar":{width:"0.2em"},"&::-webkit-scrollbar-track":{webkitBoxShadow:"inset 0 0 6px ".concat(e.palette.common.black)},"&::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.dark}},tableRows:{padding:e.spacing(4),color:e.palette.text.primary,height:"4.6875rem"},dataRow:{height:"4.6875rem"},headerStatus:{paddingLeft:e.spacing(7),color:e.palette.text.primary},workflowName:{borderRight:"1px solid ".concat(e.palette.border.main),color:e.palette.text.primary},targetsIcon:{paddingLeft:e.spacing(1.5)},headData:{color:e.palette.text.primary},tableDataStatus:{paddingLeft:e.spacing(5)},progressBar:{width:"6.5rem"},steps:{marginLeft:e.spacing(5.625)},workflowNameData:{maxWidth:"15.625rem",borderRight:"1px solid ".concat(e.palette.border.main),paddingLeft:e.spacing(4)},targetCluster:{paddingLeft:e.spacing(3.75),color:e.palette.text.primary},clusterName:{marginLeft:e.spacing(4)},reliabiltyData:{width:"8.125rem"},stepsData:{paddingLeft:e.spacing(5)},stepsDataTime:{paddingLeft:e.spacing(7)},stepsDataschedule:{paddingLeft:e.spacing(8)},optionBtn:{marginLeft:"auto"},timeDiv:{display:"flex",flexDirection:"row"},success:{color:e.palette.primary.dark},iconButton:{width:"2rem",height:"2rem"},tableCell:{display:"flex",flexDirection:"row"},expDiv:{display:"flex",flexDirection:"row",cursor:"pointer"},btnImg:{width:"0.8125rem",height:"0.8125rem",marginTop:e.spacing(.375)},btnText:{paddingLeft:e.spacing(1.625)},datePickerColor:{color:e.palette.secondary.dark},statusFont:{fontSize:"0.725rem"},body:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:e.spacing(7.5)},text:{width:"31.93rem",height:"5.875rem",marginTop:e.spacing(3.75),marginBottom:e.spacing(3.75)},typo:{fontSize:"2rem"},textSecond:{width:"29.06rem",height:"1.6875rem",marginTop:e.spacing(1.875),marginBottom:e.spacing(3.75)},disconnectForever:{fontSize:"1rem",marginTop:e.spacing(2)},buttonGroup:{display:"flex",marginTop:e.spacing(2.5),justifyContent:"space-between",gap:"1rem"},dateBtn:{marginRight:e.spacing(2.5)},w7:{width:"7rem"},delDiv:{maxWidth:"8.56rem",display:"flex",marginTop:e.spacing(3),color:e.palette.error.dark},bin:{marginRight:e.spacing(1.485)},otherTC:{maxWidth:"15.375rem"},deleteCluster:{display:"flex",flexDirection:"column"},error:{borderColor:e.palette.error.main,"&:hover":{borderColor:e.palette.error.main,boxShadow:""},"&$focused":{backgroundColor:e.palette.common.white,borderColor:e.palette.error.main,color:e.palette.error.main}},customTooltip:{backgroundColor:e.palette.secondary.light,color:e.palette.text.primary,fontSize:"0.775rem"}}})),G=function(e){var t=e.searchValue,a=e.statusValue,n=e.clusterValue,i=e.isOpen,m=e.popAnchorEl,u=e.displayDate,d=e.changeSearch,p=e.changeStatus,f=e.changeCluster,h=e.popOverClick,b=e.popOverClose,w=e.selectDate,E=J(),C=Object(F.a)().palette,D=Object(o.useState)([{startDate:new Date,endDate:new Date,key:"selection"}]),k=Object(g.a)(D,2),N=k[0],O=k[1],j=Object(s.a)().t;return c.a.createElement("div",null,c.a.createElement("div",{className:E.headerSection},c.a.createElement(S.a,{id:"input-with-icon-adornment",placeholder:"Search",className:E.search,value:t,onChange:d,startAdornment:c.a.createElement(_.a,{position:"start"},c.a.createElement(z.a,null))}),c.a.createElement(T.a,{variant:"outlined",className:E.formControl,color:"primary",focused:!0},c.a.createElement(L.a,{className:E.selectText},j("workflowCluster.header.status")),c.a.createElement(P.a,{value:a,onChange:p,label:"Cluster Status",className:E.selectText},c.a.createElement(R.a,{value:"All"},j("workflowCluster.header.formControl.menu")),c.a.createElement(R.a,{value:"true"},j("workflowCluster.header.formControl.menu1")),c.a.createElement(R.a,{value:"false"},j("workflowCluster.header.formControl.menu2")),c.a.createElement(R.a,{value:"pending"},j("workflowCluster.header.formControl.menu6")))),c.a.createElement(T.a,{variant:"outlined",className:E.formControl,color:"primary",focused:!0},c.a.createElement(L.a,{className:E.selectText},j("workflowCluster.header.target")),c.a.createElement(P.a,{value:n,onChange:f,label:"Target Agent",className:E.selectText},c.a.createElement(R.a,{value:"All"},j("workflowCluster.header.formControl.menu")),c.a.createElement(R.a,{value:"Internal"},j("workflowCluster.header.formControl.menu4")),c.a.createElement(R.a,{value:"External"},j("workflowCluster.header.formControl.menu5")))),c.a.createElement("div",{className:E.dateBtn},c.a.createElement(l.c,{disabled:!1,onClick:h},c.a.createElement(r.a,{className:E.displayDate},u,c.a.createElement(v.a,{className:E.iconButton},i?c.a.createElement(V.a,null):c.a.createElement(A.a,null))))),c.a.createElement(I.a,{open:i,anchorEl:m,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},className:E.popOver},c.a.createElement(H.DateRangePicker,{onChange:function(e){O([e.selection]),w("".concat(e.selection.startDate),"".concat(e.selection.endDate))},showSelectionPreview:!0,moveRangeOnFirstSelection:!1,months:1,ranges:N,direction:"vertical",editableDateInputs:!0,rangeColors:[C.secondary.dark],showMonthAndYearPickers:!0}))))},K=a(1208),Q=function(e){var t=e.data,a=e.deleteRow,o=J(),i=Object(s.a)().t,m=Object(u.b)(),d=c.a.useState(!1),p=Object(g.a)(d,2),f=p[0],h=p[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(C.a,{className:o.tableDataStatus},!1===t.is_cluster_confirmed?c.a.createElement(l.f,{variant:"warning",label:i("workflowCluster.header.formControl.menu6")}):!0===t.is_cluster_confirmed&&t.is_active?c.a.createElement(l.f,{variant:"success",label:i("workflowCluster.header.formControl.menu1")}):c.a.createElement(l.f,{variant:"danger",label:i("workflowCluster.header.formControl.menu2")})),c.a.createElement(C.a,{className:o.workflowNameData},c.a.createElement(r.a,null,t.cluster_name)),c.a.createElement(C.a,{className:o.stepsDataTime},function(e){var t=new Date(1e3*parseInt(e,10)).toString(),a=O()(t).format("DD MMM YYYY");return e?a:"Date not available"}(t.updated_at)),c.a.createElement(C.a,null,c.a.createElement(r.a,{className:o.stepsData},t.no_of_workflows)),c.a.createElement(C.a,{className:o.stepsDataschedule},c.a.createElement(r.a,null,t.no_of_schedules)),c.a.createElement(C.a,{className:o.stepsData},"0"===t.last_workflow_timestamp?c.a.createElement(r.a,null,"Not Yet"):Object(K.a)(t.last_workflow_timestamp)),c.a.createElement(C.a,null,c.a.createElement(n.a,{classes:{tooltip:o.customTooltip},disableFocusListener:!0,disableHoverListener:"Viewer"!==m,placement:"bottom",title:"Insufficient Permissions"},c.a.createElement("div",{className:o.deleteCluster},c.a.createElement("div",{className:o.targetsIcon},c.a.createElement(v.a,{disabled:"Viewer"===m,onClick:function(){h(!0)}},c.a.createElement("img",{alt:"delete",src:"./icons/ClusterDisconnect.svg"}))),c.a.createElement("div",null,c.a.createElement(r.a,null,i("targets.modalDelete.disconnect"))))),c.a.createElement("div",null,f&&c.a.createElement("div",null,c.a.createElement(l.j,{open:f,onClose:function(){h(!1)},width:"60%",modalActions:c.a.createElement(l.c,{onClick:function(){h(!1)}},"\u2715")},c.a.createElement("div",{className:o.body},c.a.createElement("img",{src:"/icons/DisconnectIcon.svg",alt:"disconnect"}),c.a.createElement("div",{className:o.text},c.a.createElement(r.a,{className:o.typo,align:"center"},i("targets.modalDelete.head1")," ",c.a.createElement("br",null),i("targets.modalDelete.head2"),c.a.createElement("br",null),c.a.createElement("strong",null,t.cluster_name," ",i("targets.modalDelete.head4")))),c.a.createElement("div",{className:o.textSecond},c.a.createElement(r.a,{className:o.disconnectForever,align:"center"},i("targets.modalDelete.head3"))),c.a.createElement("div",{className:o.buttonGroup},c.a.createElement(l.c,{onClick:function(){h(!1)}},c.a.createElement(c.a.Fragment,null," ",i("targets.modalDelete.no"))),c.a.createElement(l.b,{disabled:"Viewer"===m,variant:"error",onClick:function(){a(t.cluster_id),h(!1)},className:o.w7},c.a.createElement(c.a.Fragment,null,i("targets.modalDelete.yes"))))))))))},$=function(){var e,t=J(),a=Object(u.a)(),n=Object(o.useState)({search:"",status:"All",cluster:"All"}),l=Object(g.a)(n,2),i=l[0],m=l[1],N=Object(p.useQuery)(y.p,{variables:{project_id:a},fetchPolicy:"cache-and-network",pollInterval:3e3}),S=N.data,_=N.loading,T=N.error,L=Object(p.useMutation)(y.j),P=Object(g.a)(L,1)[0],R=c.a.useState({dateValue:"Select a period",fromDate:new Date(0).toString(),toDate:new Date((new Date).setHours(23,59,59)).toString()}),I=Object(g.a)(R,2),M=I[0],A=I[1],B=Object(o.useState)({name:{sort:!1,ascending:!0},lastRun:{sort:!0,ascending:!0}}),V=Object(g.a)(B,2),Y=V[0],z=V[1],H=null===S||void 0===S?void 0:S.getCluster.filter((function(e){return e.cluster_name.toLowerCase().includes(i.search.toLowerCase())})).filter((function(e){if("All"===i.status)return!0;if(!e.is_cluster_confirmed){return"pending".includes(i.status.toLowerCase())}return e.is_active.toString().toLowerCase().includes(i.status.toLowerCase())})).filter((function(e){return"All"===i.cluster||e.cluster_type.toLowerCase().includes(i.cluster.toLowerCase())})).filter((function(e){return!(!M.fromDate||void 0!==M.toDate)||1e3*parseInt(e.updated_at,10)>=new Date(O()(M.fromDate).format()).getTime()&&1e3*parseInt(e.updated_at,10)<=new Date(O()(M.toDate).format()).getTime()})).sort((function(e,t){if(Y.name.sort){var a=e.cluster_name,r=t.cluster_name;return Y.name.ascending?Object(x.a)(a,r):Object(x.b)(a,r)}if(Y.lastRun.sort){var n=parseInt(e.created_at,10),l=parseInt(t.created_at,10);return Y.lastRun.ascending?Object(x.c)(l,n):Object(x.d)(l,n)}return 0})),F=Object(o.useState)({pageNo:0,rowsPerPage:5}),W=Object(g.a)(F,2),K=W[0],$=W[1],q=c.a.useState(null),U=Object(g.a)(q,2),X=U[0],Z=U[1],ee=Boolean(X),te=c.a.useState(!1),ae=Object(g.a)(te,2),re=ae[0],ne=ae[1],le=Object(s.a)().t,oe=function(e){P({variables:{cluster_id:e}})};return c.a.createElement("div",null,c.a.createElement("section",{className:"Heading section"},c.a.createElement(G,{searchValue:i.search,changeSearch:function(e){m(Object(d.a)(Object(d.a)({},i),{},{search:e.target.value}))},statusValue:i.status,changeStatus:function(e){m(Object(d.a)(Object(d.a)({},i),{},{status:e.target.value}))},clusterValue:i.cluster,changeCluster:function(e){m(Object(d.a)(Object(d.a)({},i),{},{cluster:e.target.value}))},popOverClick:function(e){Z(e.currentTarget),ne(!0)},popOverClose:function(){Z(null),ne(!1)},isOpen:ee,popAnchorEl:X,isDateOpen:re,displayDate:M.dateValue,selectDate:function(e,t){A({dateValue:"".concat(O()(e).format("DD.MM.YYYY").toString(),"-").concat(O()(t).format("DD.MM.YYYY").toString()),fromDate:new Date(new Date(e).setHours(0,0,0)).toString(),toDate:new Date(new Date(t).setHours(23,59,59)).toString()})}})),c.a.createElement(f.a,{className:t.root},c.a.createElement(h.a,{className:t.tableMain},c.a.createElement(b.a,{stickyHeader:!0,"aria-label":"simple table"},c.a.createElement(w.a,null,c.a.createElement(E.a,{className:t.tableRows},c.a.createElement(C.a,{className:t.headerStatus},c.a.createElement("div",{className:t.tableCell},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.tableStatus")),c.a.createElement(v.a,{"aria-label":"sort in descending order",size:"small",onClick:function(){return z(Object(d.a)(Object(d.a)({},Y),{},{lastRun:{sort:!0,ascending:!1}}))}},c.a.createElement("div",{className:t.targetsIcon},c.a.createElement("img",{src:"/icons/arrow_downward.svg",alt:"ConnectTarget icon"}))))),c.a.createElement(C.a,{className:t.workflowName},c.a.createElement("div",{className:t.tableCell},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.tableCluster")),c.a.createElement(v.a,{"aria-label":"sort in descending",size:"small",onClick:function(){return z(Object(d.a)(Object(d.a)({},Y),{},{name:{sort:!0,ascending:!1}}))}},c.a.createElement("div",{className:t.targetsIcon},c.a.createElement("img",{src:"/icons/arrow_downward.svg",alt:"ConnectTarget icon"}))))),c.a.createElement(C.a,null,c.a.createElement(r.a,{className:t.targetCluster},le("workflowCluster.header.formControl.connectionDate"))),c.a.createElement(C.a,{className:t.headData},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.noWorkflows"))),c.a.createElement(C.a,{className:t.headData},c.a.createElement("div",{className:t.tableCell},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.noSchedules")))),c.a.createElement(C.a,{className:t.headData},c.a.createElement("div",{className:t.tableCell},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.run")))),c.a.createElement(C.a,{className:t.headData},c.a.createElement("div",{className:t.tableCell},c.a.createElement(r.a,null,le("workflowCluster.header.formControl.disconnect")))))),c.a.createElement(D.a,null,_?c.a.createElement(E.a,null,c.a.createElement(C.a,{colSpan:7},c.a.createElement(j.a,null))):T?c.a.createElement(E.a,null,c.a.createElement(C.a,{"data-cy":"browseClusterError",colSpan:7},c.a.createElement(r.a,{align:"center"},le("workflowCluster.header.formControl.fetchingError")))):H?H.slice(K.pageNo*K.rowsPerPage,K.pageNo*K.rowsPerPage+K.rowsPerPage).map((function(e){return c.a.createElement(E.a,{"data-cy":"browseClusterData",key:e.cluster_id,className:t.dataRow},c.a.createElement(Q,{data:e,deleteRow:oe}))})):c.a.createElement(E.a,null,c.a.createElement(C.a,{"data-cy":"browseClusterNoData",colSpan:0},c.a.createElement(r.a,{align:"center"},le("workflowCluster.header.formControl.recordAvailable"))))))),c.a.createElement(k.a,{rowsPerPageOptions:[5,10,25],component:"div",count:null!==(e=null===H||void 0===H?void 0:H.length)&&void 0!==e?e:0,rowsPerPage:K.rowsPerPage,page:K.pageNo,onChangePage:function(e,t){return $(Object(d.a)(Object(d.a)({},K),{},{pageNo:t}))},onChangeRowsPerPage:function(e){$(Object(d.a)(Object(d.a)({},K),{},{pageNo:0,rowsPerPage:parseInt(e.target.value,10)}))}})))},q=Object(W.a)((function(e){return{appBar:{background:"transparent",boxShadow:"none"},header:{width:"100%",display:"flex",margin:e.spacing(1,0,2.5,0)},scheduleBtn:{marginLeft:"auto"},customTooltip:{backgroundColor:e.palette.secondary.light,color:e.palette.text.primary,fontSize:"0.775rem"}}}));t.default=function(){var e=q(),t=Object(s.a)().t,a=Object(u.a)(),o=Object(u.b)();return c.a.createElement(i.a,null,c.a.createElement("section",{className:"Header section"},c.a.createElement("div",{className:e.header},c.a.createElement(r.a,{variant:"h3"},t("targets.connectHome.head")),c.a.createElement(n.a,{classes:{tooltip:e.customTooltip},disableFocusListener:!0,disableHoverListener:"Viewer"!==o,placement:"bottom",title:"Insufficient Permissions"},c.a.createElement("div",{className:e.scheduleBtn},c.a.createElement(l.b,{variant:"success",onClick:function(){m.b.push({pathname:"/target-connect",search:"?projectID=".concat(a,"&projectRole=").concat(o)})},disabled:"Viewer"===o},c.a.createElement("div",null,t("targets.connectHome.connectText"))))))),c.a.createElement($,null))}}}]);
//# sourceMappingURL=35.5ca25c15.chunk.js.map